var _l=Object.create;var _r=Object.defineProperty;var Ll=Object.getOwnPropertyDescriptor;var Al=Object.getOwnPropertyNames;var Nl=Object.getPrototypeOf,xl=Object.prototype.hasOwnProperty;var G=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Rl=(r,e)=>{for(var t in e)_r(r,t,{get:e[t],enumerable:!0})},ls=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Al(e))!xl.call(r,i)&&i!==t&&_r(r,i,{get:()=>e[i],enumerable:!(n=Ll(e,i))||n.enumerable});return r};var ae=(r,e,t)=>(t=r!=null?_l(Nl(r)):{},ls(e||!r||!r.__esModule?_r(t,"default",{value:r,enumerable:!0}):t,r)),Ml=r=>ls(_r({},"__esModule",{value:!0}),r);var ps=G((Rf,Fe)=>{"use strict";function fs(r,e){for(var t=r.toString();t.length<e;)t="0"+t;return t}function mt(r){return fs(r,2)}function Fl(r){var e=Math.abs(r),t=String(Math.floor(e/60)),n=String(e%60);return t=("0"+t).slice(-2),n=("0"+n).slice(-2),r===0?"Z":(r<0?"+":"-")+t+":"+n}function hs(r,e){typeof r!="string"&&(e=r,r=Fe.exports.ISO8601_FORMAT),e||(e=Fe.exports.now());var t=mt(e.getDate()),n=mt(e.getMonth()+1),i=mt(e.getFullYear()),o=mt(i.substring(2,4)),a=r.indexOf("yyyy")>-1?i:o,l=mt(e.getHours()),p=mt(e.getMinutes()),g=mt(e.getSeconds()),P=fs(e.getMilliseconds(),3),w=Fl(e.getTimezoneOffset()),y=r.replace(/dd/g,t).replace(/MM/g,n).replace(/y{1,4}/g,a).replace(/hh/g,l).replace(/mm/g,p).replace(/ss/g,g).replace(/SSS/g,P).replace(/O/g,w);return y}function st(r,e,t,n){r["set"+(n?"":"UTC")+e](t)}function ql(r,e,t){var n=r.indexOf("O")<0,i=!1,o=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function(w,y){st(w,"FullYear",y,n)}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function(w,y){st(w,"Month",y-1,n),w.getMonth()!==y-1&&(i=!0)}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function(w,y){i&&st(w,"Month",w.getMonth()-1,n),st(w,"Date",y,n)}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function(w,y){st(w,"Hours",y,n)}},{pattern:/mm/,regexp:"\\d\\d",fn:function(w,y){st(w,"Minutes",y,n)}},{pattern:/ss/,regexp:"\\d\\d",fn:function(w,y){st(w,"Seconds",y,n)}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function(w,y){st(w,"Milliseconds",y,n)}},{pattern:/O/,regexp:"[+-]\\d{1,2}:?\\d{2}?|Z",fn:function(w,y){y==="Z"?y=0:y=y.replace(":","");var m=Math.abs(y),D=(y>0?-1:1)*(m%100+Math.floor(m/100)*60);w.setUTCMinutes(w.getUTCMinutes()+D)}}],a=o.reduce(function(w,y){return y.pattern.test(w.regexp)?(y.index=w.regexp.match(y.pattern).index,w.regexp=w.regexp.replace(y.pattern,"("+y.regexp+")")):y.index=-1,w},{regexp:r,index:[]}),l=o.filter(function(w){return w.index>-1});l.sort(function(w,y){return w.index-y.index});var p=new RegExp(a.regexp),g=p.exec(e);if(g){var P=t||Fe.exports.now();return l.forEach(function(w,y){w.fn(P,g[y+1])}),P}throw new Error("String '"+e+"' could not be parsed as '"+r+"'")}function kl(r,e,t){if(!r)throw new Error("pattern must be supplied");return ql(r,e,t)}function Bl(){return new Date}Fe.exports=hs;Fe.exports.asString=hs;Fe.exports.parse=kl;Fe.exports.now=Bl;Fe.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS";Fe.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO";Fe.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS";Fe.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"});var xr=G(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.Event=ut.Response=ut.Message=void 0;var Qt=class{constructor(e){this.seq=0,this.type=e}};ut.Message=Qt;var oi=class extends Qt{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};ut.Response=oi;var si=class extends Qt{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}};ut.Event=si});var ys=G(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.ProtocolServer=void 0;var Vl=require("events"),Zt=xr(),ai=class{get event(){return this._event||(this._event=(e,t)=>{this._listener=e,this._this=t;let n;return n={dispose:()=>{this._listener=void 0,this._this=void 0}},n}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch{}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}},yt=class extends Vl.EventEmitter{constructor(){super(),this._sendMessage=new ai,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if(e.type==="request")this.dispatchRequest(e);else if(e.type==="response"){let t=e,n=this._pendingRequests.get(t.request_seq);n&&(this._pendingRequests.delete(t.request_seq),n(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",n=>this._handleData(n)),e.on("close",()=>{this._emitEvent(new Zt.Event("close"))}),e.on("error",n=>{this._emitEvent(new Zt.Event("error","inStream error: "+(n&&n.message)))}),t.on("error",n=>{this._emitEvent(new Zt.Event("error","outStream error: "+(n&&n.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,n,i){let o={command:e};if(t&&Object.keys(t).length>0&&(o.arguments=t),this._send("request",o),i){this._pendingRequests.set(o.seq,i);let a=setTimeout(()=>{clearTimeout(a);let l=this._pendingRequests.get(o.seq);l&&(this._pendingRequests.delete(o.seq),l(new Zt.Response(o,"timeout")))},n)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){let n=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(n,"utf8")}\r
\r
${n}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let t=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,t.length>0)try{let n=JSON.parse(t);this.handleMessage(n)}catch(n){this._emitEvent(new Zt.Event("error","Error handling data: "+(n&&n.message)))}continue}}else{let t=this._rawData.indexOf(yt.TWO_CRLF);if(t!==-1){let i=this._rawData.toString("utf8",0,t).split(`\r
`);for(let o=0;o<i.length;o++){let a=i[o].split(/: +/);a[0]=="Content-Length"&&(this._contentLength=+a[1])}this._rawData=this._rawData.slice(t+yt.TWO_CRLF.length);continue}}break}}};Rr.ProtocolServer=yt;yt.TWO_CRLF=`\r
\r
`});var vs=G(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.runDebugAdapter=void 0;var Ul=require("net");function Xl(r){let e=0;if(process.argv.slice(2).forEach(function(n,i,o){let a=/^--server=(\d{4,5})$/.exec(n);a&&(e=parseInt(a[1],10))}),e>0)console.error(`waiting for debug protocol on port ${e}`),Ul.createServer(n=>{console.error(">> accepted connection from client"),n.on("end",()=>{console.error(`>> client connection closed
`)});let i=new r(!1,!0);i.setRunAsServer(!0),i.start(n,n)}).listen(e);else{let n=new r(!1);process.on("SIGTERM",()=>{n.shutdown()}),n.start(process.stdin,process.stdout)}}Mr.runDebugAdapter=Xl});var Fr=G(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.DebugSession=z.ErrorDestination=z.MemoryEvent=z.InvalidatedEvent=z.ProgressEndEvent=z.ProgressUpdateEvent=z.ProgressStartEvent=z.CapabilitiesEvent=z.LoadedSourceEvent=z.ModuleEvent=z.BreakpointEvent=z.ThreadEvent=z.OutputEvent=z.ExitedEvent=z.TerminatedEvent=z.InitializedEvent=z.ContinuedEvent=z.StoppedEvent=z.CompletionItem=z.Module=z.Breakpoint=z.Variable=z.Thread=z.StackFrame=z.Scope=z.Source=void 0;var $l=ys(),we=xr(),Hl=vs(),bs=require("url"),ui=class{constructor(e,t,n=0,i,o){this.name=e,this.path=t,this.sourceReference=n,i&&(this.origin=i),o&&(this.adapterData=o)}};z.Source=ui;var ci=class{constructor(e,t,n=!1){this.name=e,this.variablesReference=t,this.expensive=n}};z.Scope=ci;var li=class{constructor(e,t,n,i=0,o=0){this.id=e,this.source=n,this.line=i,this.column=o,this.name=t}};z.StackFrame=li;var fi=class{constructor(e,t){this.id=e,t?this.name=t:this.name="Thread #"+e}};z.Thread=fi;var hi=class{constructor(e,t,n=0,i,o){this.name=e,this.value=t,this.variablesReference=n,typeof o=="number"&&(this.namedVariables=o),typeof i=="number"&&(this.indexedVariables=i)}};z.Variable=hi;var pi=class{constructor(e,t,n,i){this.verified=e;let o=this;typeof t=="number"&&(o.line=t),typeof n=="number"&&(o.column=n),i&&(o.source=i)}setId(e){this.id=e}};z.Breakpoint=pi;var di=class{constructor(e,t){this.id=e,this.name=t}};z.Module=di;var mi=class{constructor(e,t,n=0){this.label=e,this.start=t,this.length=n}};z.CompletionItem=mi;var gi=class extends we.Event{constructor(e,t,n){super("stopped"),this.body={reason:e},typeof t=="number"&&(this.body.threadId=t),typeof n=="string"&&(this.body.text=n)}};z.StoppedEvent=gi;var yi=class extends we.Event{constructor(e,t){super("continued"),this.body={threadId:e},typeof t=="boolean"&&(this.body.allThreadsContinued=t)}};z.ContinuedEvent=yi;var vi=class extends we.Event{constructor(){super("initialized")}};z.InitializedEvent=vi;var bi=class extends we.Event{constructor(e){if(super("terminated"),typeof e=="boolean"||e){let t=this;t.body={restart:e}}}};z.TerminatedEvent=bi;var wi=class extends we.Event{constructor(e){super("exited"),this.body={exitCode:e}}};z.ExitedEvent=wi;var Ti=class extends we.Event{constructor(e,t="console",n){super("output"),this.body={category:t,output:e},n!==void 0&&(this.body.data=n)}};z.OutputEvent=Ti;var Ei=class extends we.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}};z.ThreadEvent=Ei;var Di=class extends we.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}};z.BreakpointEvent=Di;var Ci=class extends we.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}};z.ModuleEvent=Ci;var Pi=class extends we.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}};z.LoadedSourceEvent=Pi;var Oi=class extends we.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}};z.CapabilitiesEvent=Oi;var Ii=class extends we.Event{constructor(e,t,n){super("progressStart"),this.body={progressId:e,title:t},typeof n=="string"&&(this.body.message=n)}};z.ProgressStartEvent=Ii;var Si=class extends we.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};z.ProgressUpdateEvent=Si;var _i=class extends we.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};z.ProgressEndEvent=_i;var Li=class extends we.Event{constructor(e,t,n){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),n&&(this.body.stackFrameId=n)}};z.InvalidatedEvent=Li;var Ai=class extends we.Event{constructor(e,t,n){super("memory"),this.body={memoryReference:e,offset:t,count:n}}};z.MemoryEvent=Ai;var vt;(function(r){r[r.User=1]="User",r[r.Telemetry=2]="Telemetry"})(vt=z.ErrorDestination||(z.ErrorDestination={}));var Ve=class extends $l.ProtocolServer{constructor(e,t){super();let n=typeof e=="boolean"?e:!1;this._debuggerLinesStartAt1=n,this._debuggerColumnsStartAt1=n,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer=typeof t=="boolean"?t:!1,this.on("close",()=>{this.shutdown()}),this.on("error",i=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs=e!=="path"}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,Hl.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,n,i,o=vt.User){let a;typeof t=="number"?(a={id:t,format:n},i&&(a.variables=i),o&vt.User&&(a.showUser=!0),o&vt.Telemetry&&(a.sendTelemetry=!0)):a=t,e.success=!1,e.message=Ve.formatPII(a.format,!0,a.variables),e.body||(e.body={}),e.body.error=a,this.sendResponse(e)}runInTerminalRequest(e,t,n){this.sendRequest("runInTerminal",e,t,n)}dispatchRequest(e){let t=new we.Response(e);try{if(e.command==="initialize"){var n=e.arguments;if(typeof n.linesStartAt1=="boolean"&&(this._clientLinesStartAt1=n.linesStartAt1),typeof n.columnsStartAt1=="boolean"&&(this._clientColumnsStartAt1=n.columnsStartAt1),n.pathFormat!=="path")this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,vt.Telemetry);else{let i=t;i.body={},this.initializeRequest(i,n)}}else e.command==="launch"?this.launchRequest(t,e.arguments,e):e.command==="attach"?this.attachRequest(t,e.arguments,e):e.command==="disconnect"?this.disconnectRequest(t,e.arguments,e):e.command==="terminate"?this.terminateRequest(t,e.arguments,e):e.command==="restart"?this.restartRequest(t,e.arguments,e):e.command==="setBreakpoints"?this.setBreakPointsRequest(t,e.arguments,e):e.command==="setFunctionBreakpoints"?this.setFunctionBreakPointsRequest(t,e.arguments,e):e.command==="setExceptionBreakpoints"?this.setExceptionBreakPointsRequest(t,e.arguments,e):e.command==="configurationDone"?this.configurationDoneRequest(t,e.arguments,e):e.command==="continue"?this.continueRequest(t,e.arguments,e):e.command==="next"?this.nextRequest(t,e.arguments,e):e.command==="stepIn"?this.stepInRequest(t,e.arguments,e):e.command==="stepOut"?this.stepOutRequest(t,e.arguments,e):e.command==="stepBack"?this.stepBackRequest(t,e.arguments,e):e.command==="reverseContinue"?this.reverseContinueRequest(t,e.arguments,e):e.command==="restartFrame"?this.restartFrameRequest(t,e.arguments,e):e.command==="goto"?this.gotoRequest(t,e.arguments,e):e.command==="pause"?this.pauseRequest(t,e.arguments,e):e.command==="stackTrace"?this.stackTraceRequest(t,e.arguments,e):e.command==="scopes"?this.scopesRequest(t,e.arguments,e):e.command==="variables"?this.variablesRequest(t,e.arguments,e):e.command==="setVariable"?this.setVariableRequest(t,e.arguments,e):e.command==="setExpression"?this.setExpressionRequest(t,e.arguments,e):e.command==="source"?this.sourceRequest(t,e.arguments,e):e.command==="threads"?this.threadsRequest(t,e):e.command==="terminateThreads"?this.terminateThreadsRequest(t,e.arguments,e):e.command==="evaluate"?this.evaluateRequest(t,e.arguments,e):e.command==="stepInTargets"?this.stepInTargetsRequest(t,e.arguments,e):e.command==="gotoTargets"?this.gotoTargetsRequest(t,e.arguments,e):e.command==="completions"?this.completionsRequest(t,e.arguments,e):e.command==="exceptionInfo"?this.exceptionInfoRequest(t,e.arguments,e):e.command==="loadedSources"?this.loadedSourcesRequest(t,e.arguments,e):e.command==="dataBreakpointInfo"?this.dataBreakpointInfoRequest(t,e.arguments,e):e.command==="setDataBreakpoints"?this.setDataBreakpointsRequest(t,e.arguments,e):e.command==="readMemory"?this.readMemoryRequest(t,e.arguments,e):e.command==="writeMemory"?this.writeMemoryRequest(t,e.arguments,e):e.command==="disassemble"?this.disassembleRequest(t,e.arguments,e):e.command==="cancel"?this.cancelRequest(t,e.arguments,e):e.command==="breakpointLocations"?this.breakpointLocationsRequest(t,e.arguments,e):e.command==="setInstructionBreakpoints"?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(i){this.sendErrorResponse(t,1104,"{_stack}",{_exception:i.message,_stack:i.stack},vt.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,n){this.sendResponse(e),this.shutdown()}launchRequest(e,t,n){this.sendResponse(e)}attachRequest(e,t,n){this.sendResponse(e)}terminateRequest(e,t,n){this.sendResponse(e)}restartRequest(e,t,n){this.sendResponse(e)}setBreakPointsRequest(e,t,n){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,n){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,n){this.sendResponse(e)}configurationDoneRequest(e,t,n){this.sendResponse(e)}continueRequest(e,t,n){this.sendResponse(e)}nextRequest(e,t,n){this.sendResponse(e)}stepInRequest(e,t,n){this.sendResponse(e)}stepOutRequest(e,t,n){this.sendResponse(e)}stepBackRequest(e,t,n){this.sendResponse(e)}reverseContinueRequest(e,t,n){this.sendResponse(e)}restartFrameRequest(e,t,n){this.sendResponse(e)}gotoRequest(e,t,n){this.sendResponse(e)}pauseRequest(e,t,n){this.sendResponse(e)}sourceRequest(e,t,n){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,n){this.sendResponse(e)}stackTraceRequest(e,t,n){this.sendResponse(e)}scopesRequest(e,t,n){this.sendResponse(e)}variablesRequest(e,t,n){this.sendResponse(e)}setVariableRequest(e,t,n){this.sendResponse(e)}setExpressionRequest(e,t,n){this.sendResponse(e)}evaluateRequest(e,t,n){this.sendResponse(e)}stepInTargetsRequest(e,t,n){this.sendResponse(e)}gotoTargetsRequest(e,t,n){this.sendResponse(e)}completionsRequest(e,t,n){this.sendResponse(e)}exceptionInfoRequest(e,t,n){this.sendResponse(e)}loadedSourcesRequest(e,t,n){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,n){this.sendResponse(e)}setDataBreakpointsRequest(e,t,n){this.sendResponse(e)}readMemoryRequest(e,t,n){this.sendResponse(e)}writeMemoryRequest(e,t,n){this.sendResponse(e)}disassembleRequest(e,t,n){this.sendResponse(e)}cancelRequest(e,t,n){this.sendResponse(e)}breakpointLocationsRequest(e,t,n){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,n){this.sendResponse(e)}customRequest(e,t,n,i){this.sendErrorResponse(t,1014,"unrecognized request",null,vt.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?Ve.uri2path(e):Ve.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?Ve.uri2path(e):Ve.path2uri(e):e}static path2uri(e){process.platform==="win32"&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new bs.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new bs.URL(e),n=decodeURIComponent(t.pathname);return process.platform==="win32"&&(/^\/[a-zA-Z]:/.test(n)&&(n=n[1].toLowerCase()+n.substr(2)),n=n.replace(/\//g,"\\")),n}static formatPII(e,t,n){return e.replace(Ve._formatPIIRegexp,function(i,o){return t&&o.length>0&&o[0]!=="_"?i:n[o]&&n.hasOwnProperty(o)?n[o]:i})}};z.DebugSession=Ve;Ve._formatPIIRegexp=/{([^}]+)}/g});var Ds=G(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.InternalLogger=void 0;var ws=require("fs"),Ts=require("path"),Ae=Br(),Ni=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=Ae.LogLevel.Warn,this.disposeCallback=(n,i)=>{this.dispose(),i=i||2,i+=128,process.exit(i)}}async setup(e){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(!Ts.isAbsolute(e.logFilePath))this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,Ae.LogLevel.Error);else{let t=n=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${n.toString()}
`,Ae.LogLevel.Error);try{await ws.promises.mkdir(Ts.dirname(e.logFilePath),{recursive:!0}),this.log(`Verbose logs are written to:
`,Ae.LogLevel.Warn),this.log(e.logFilePath+`
`,Ae.LogLevel.Warn),this._logFileStream=ws.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",n=>{t(n)})}catch(n){t(n)}}}logDateTime(){let e=new Date,n=e.getUTCFullYear()+`-${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+Es();this.log(n+`
`,Ae.LogLevel.Verbose,!1)}setupShutdownListeners(){process.on("beforeExit",this.beforeExitCallback),process.on("SIGTERM",this.disposeCallback),process.on("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise(e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()})}log(e,t,n=!0){if(this._minLogLevel!==Ae.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){let i=t===Ae.LogLevel.Error?console.error:t===Ae.LogLevel.Warn?console.warn:null;i&&i((0,Ae.trimLastNewline)(e))}t===Ae.LogLevel.Error&&(e=`[${Ae.LogLevel[t]}] ${e}`),this._prependTimestamp&&n&&(e="["+Es()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){let n=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",n&&(e=e+`
`)}if(this._logCallback){let n=new Ae.LogOutputEvent(e,t);this._logCallback(n)}}};kr.InternalLogger=Ni;function Es(){let r=new Date,e=qr(2,String(r.getUTCHours())),t=qr(2,String(r.getUTCMinutes())),n=qr(2,String(r.getUTCSeconds())),i=qr(3,String(r.getUTCMilliseconds()));return e+":"+t+":"+n+"."+i+" UTC"}function qr(r,e){return e.length>=r?e:String("0".repeat(r)+e).slice(-r)}});var Br=G(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.trimLastNewline=Ne.LogOutputEvent=Ne.logger=Ne.Logger=Ne.LogLevel=void 0;var Gl=Ds(),Wl=Fr(),ct;(function(r){r[r.Verbose=0]="Verbose",r[r.Log=1]="Log",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Stop=4]="Stop"})(ct=Ne.LogLevel||(Ne.LogLevel={}));var jr=class{constructor(){this._pendingLogQ=[]}log(e,t=ct.Log){e=e+`
`,this._write(e,t)}verbose(e){this.log(e,ct.Verbose)}warn(e){this.log(e,ct.Warn)}error(e){this.log(e,ct.Error)}dispose(){if(this._currentLogger){let e=this._currentLogger.dispose();return this._currentLogger=null,e}else return Promise.resolve()}_write(e,t=ct.Log){e=e+"",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,n=!0){let i=typeof t=="string"?t:t&&this._logFilePathFromInit;if(this._currentLogger){let o={consoleMinLogLevel:e,logFilePath:i,prependTimestamp:n};this._currentLogger.setup(o).then(()=>{if(this._pendingLogQ){let a=this._pendingLogQ;this._pendingLogQ=null,a.forEach(l=>this._write(l.msg,l.level))}})}}init(e,t,n){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new Gl.InternalLogger(e,n),this._logFilePathFromInit=t}};Ne.Logger=jr;Ne.logger=new jr;var xi=class extends Wl.OutputEvent{constructor(e,t){let n=t===ct.Error?"stderr":t===ct.Warn?"console":"stdout";super(e,n)}};Ne.LogOutputEvent=xi;function zl(r){return r.replace(/(\n|\r\n)$/,"")}Ne.trimLastNewline=zl});var Os=G(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.LoggingDebugSession=void 0;var Ps=Br(),xt=Ps.logger,Cs=Fr(),Ri=class extends Cs.DebugSession{constructor(e,t,n){super(t,n),this.obsolete_logFilePath=e,this.on("error",i=>{xt.error(i.body)})}start(e,t){super.start(e,t),xt.init(n=>this.sendEvent(n),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof Ps.LogOutputEvent)){let t=e;e instanceof Cs.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t={...e},t.body={...e.body,output:"<output not logged>"}),xt.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,n,i){xt.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${n}`),super.sendRequest(e,t,n,i)}sendResponse(e){xt.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){xt.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}};Vr.LoggingDebugSession=Ri});var Is=G(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.Handles=void 0;var Mi=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}};Ur.Handles=Mi});var Jt=G($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.Handles=$.Response=$.Event=$.ErrorDestination=$.CompletionItem=$.Module=$.Source=$.Breakpoint=$.Variable=$.Scope=$.StackFrame=$.Thread=$.MemoryEvent=$.InvalidatedEvent=$.ProgressEndEvent=$.ProgressUpdateEvent=$.ProgressStartEvent=$.CapabilitiesEvent=$.LoadedSourceEvent=$.ModuleEvent=$.BreakpointEvent=$.ThreadEvent=$.OutputEvent=$.ContinuedEvent=$.StoppedEvent=$.ExitedEvent=$.TerminatedEvent=$.InitializedEvent=$.logger=$.Logger=$.LoggingDebugSession=$.DebugSession=void 0;var re=Fr();Object.defineProperty($,"DebugSession",{enumerable:!0,get:function(){return re.DebugSession}});Object.defineProperty($,"InitializedEvent",{enumerable:!0,get:function(){return re.InitializedEvent}});Object.defineProperty($,"TerminatedEvent",{enumerable:!0,get:function(){return re.TerminatedEvent}});Object.defineProperty($,"ExitedEvent",{enumerable:!0,get:function(){return re.ExitedEvent}});Object.defineProperty($,"StoppedEvent",{enumerable:!0,get:function(){return re.StoppedEvent}});Object.defineProperty($,"ContinuedEvent",{enumerable:!0,get:function(){return re.ContinuedEvent}});Object.defineProperty($,"OutputEvent",{enumerable:!0,get:function(){return re.OutputEvent}});Object.defineProperty($,"ThreadEvent",{enumerable:!0,get:function(){return re.ThreadEvent}});Object.defineProperty($,"BreakpointEvent",{enumerable:!0,get:function(){return re.BreakpointEvent}});Object.defineProperty($,"ModuleEvent",{enumerable:!0,get:function(){return re.ModuleEvent}});Object.defineProperty($,"LoadedSourceEvent",{enumerable:!0,get:function(){return re.LoadedSourceEvent}});Object.defineProperty($,"CapabilitiesEvent",{enumerable:!0,get:function(){return re.CapabilitiesEvent}});Object.defineProperty($,"ProgressStartEvent",{enumerable:!0,get:function(){return re.ProgressStartEvent}});Object.defineProperty($,"ProgressUpdateEvent",{enumerable:!0,get:function(){return re.ProgressUpdateEvent}});Object.defineProperty($,"ProgressEndEvent",{enumerable:!0,get:function(){return re.ProgressEndEvent}});Object.defineProperty($,"InvalidatedEvent",{enumerable:!0,get:function(){return re.InvalidatedEvent}});Object.defineProperty($,"MemoryEvent",{enumerable:!0,get:function(){return re.MemoryEvent}});Object.defineProperty($,"Thread",{enumerable:!0,get:function(){return re.Thread}});Object.defineProperty($,"StackFrame",{enumerable:!0,get:function(){return re.StackFrame}});Object.defineProperty($,"Scope",{enumerable:!0,get:function(){return re.Scope}});Object.defineProperty($,"Variable",{enumerable:!0,get:function(){return re.Variable}});Object.defineProperty($,"Breakpoint",{enumerable:!0,get:function(){return re.Breakpoint}});Object.defineProperty($,"Source",{enumerable:!0,get:function(){return re.Source}});Object.defineProperty($,"Module",{enumerable:!0,get:function(){return re.Module}});Object.defineProperty($,"CompletionItem",{enumerable:!0,get:function(){return re.CompletionItem}});Object.defineProperty($,"ErrorDestination",{enumerable:!0,get:function(){return re.ErrorDestination}});var Yl=Os();Object.defineProperty($,"LoggingDebugSession",{enumerable:!0,get:function(){return Yl.LoggingDebugSession}});var Ss=Br();$.Logger=Ss;var _s=xr();Object.defineProperty($,"Event",{enumerable:!0,get:function(){return _s.Event}});Object.defineProperty($,"Response",{enumerable:!0,get:function(){return _s.Response}});var Kl=Is();Object.defineProperty($,"Handles",{enumerable:!0,get:function(){return Kl.Handles}});var Ql=Ss.logger;$.logger=Ql});var Xr=G(Fi=>{(function(){Fi.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(Fi)});var We=G((Ls,lt)=>{(function(){var r,e,t,n,i,o,a,l=[].slice,p={}.hasOwnProperty;r=function(){var g,P,w,y,m,D;if(D=arguments[0],m=2<=arguments.length?l.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(g=0,w=m.length;g<w;g++)if(y=m[g],y!=null)for(P in y)!p.call(y,P)||(D[P]=y[P]);return D},i=function(g){return!!g&&Object.prototype.toString.call(g)==="[object Function]"},o=function(g){var P;return!!g&&((P=typeof g)=="function"||P==="object")},t=function(g){return i(Array.isArray)?Array.isArray(g):Object.prototype.toString.call(g)==="[object Array]"},n=function(g){var P;if(t(g))return!g.length;for(P in g)if(!!p.call(g,P))return!1;return!0},a=function(g){var P,w;return o(g)&&(w=Object.getPrototypeOf(g))&&(P=w.constructor)&&typeof P=="function"&&P instanceof P&&Function.prototype.toString.call(P)===Function.prototype.toString.call(Object)},e=function(g){return i(g.valueOf)?g.valueOf():g},lt.exports.assign=r,lt.exports.isFunction=i,lt.exports.isObject=o,lt.exports.isArray=t,lt.exports.isEmpty=n,lt.exports.isPlainObject=a,lt.exports.getValue=e}).call(Ls)});var qi=G((As,Ns)=>{(function(){var r;Ns.exports=r=function(){function e(){}return e.prototype.hasFeature=function(t,n){return!0},e.prototype.createDocumentType=function(t,n,i){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,n,i){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,n){throw new Error("This DOM method is not implemented.")},e}()}).call(As)});var Ms=G((xs,Rs)=>{(function(){var r;Rs.exports=r=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(xs)});var ks=G((Fs,qs)=>{(function(){var r;qs.exports=r=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(Fs)});var Vs=G((Bs,js)=>{(function(){var r,e,t;e=Ms(),t=ks(),js.exports=r=function(){function n(){var i;this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=i=Object.create(this.defaultParams)}return Object.defineProperty(n.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),n.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},n.prototype.canSetParameter=function(i,o){return!0},n.prototype.setParameter=function(i,o){return o!=null?this.params[i]=o:delete this.params[i]},n}()}).call(Bs)});var fe=G((Us,Xs)=>{(function(){Xs.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(Us)});var ki=G(($s,Hs)=>{(function(){var r,e,t;r=fe(),t=xe(),Hs.exports=e=function(){function n(i,o,a){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),o==null)throw new Error("Missing attribute name. "+this.debugInfo(o));this.name=this.stringify.name(o),this.value=this.stringify.attValue(a),this.type=r.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(n.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(n.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(n.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(n.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(n.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(n.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(n.prototype,"specified",{get:function(){return!0}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},n.prototype.debugInfo=function(i){return i=i||this.name,i==null?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},n.prototype.isEqualNode=function(i){return!(i.namespaceURI!==this.namespaceURI||i.prefix!==this.prefix||i.localName!==this.localName||i.value!==this.value)},n}()}).call($s)});var $r=G((Gs,Ws)=>{(function(){var r;Ws.exports=r=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var n;return n=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,n||null},e.prototype.removeNamedItem=function(t){var n;return n=this.nodes[t],delete this.nodes[t],n||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,n){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,n){throw new Error("This DOM method is not implemented.")},e}()}).call(Gs)});var Hr=G((zs,Ys)=>{(function(){var r,e,t,n,i,o,a,l,p,g=function(w,y){for(var m in y)P.call(y,m)&&(w[m]=y[m]);function D(){this.constructor=w}return D.prototype=y.prototype,w.prototype=new D,w.__super__=y.prototype,w},P={}.hasOwnProperty;p=We(),l=p.isObject,a=p.isFunction,o=p.getValue,i=xe(),r=fe(),e=ki(),n=$r(),Ys.exports=t=function(w){g(y,w);function y(m,D,L){var A,_,j,T;if(y.__super__.constructor.call(this,m),D==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(D),this.type=r.Element,this.attribs={},this.schemaTypeInfo=null,L!=null&&this.attribute(L),m.type===r.Document&&(this.isRoot=!0,this.documentObject=m,m.rootObject=this,m.children)){for(T=m.children,_=0,j=T.length;_<j;_++)if(A=T[_],A.type===r.DocType){A.name=this.name;break}}}return Object.defineProperty(y.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(y.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(y.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(y.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(y.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(y.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(y.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(y.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new n(this.attribs)),this.attributeMap}}),y.prototype.clone=function(){var m,D,L,A;L=Object.create(this),L.isRoot&&(L.documentObject=null),L.attribs={},A=this.attribs;for(D in A)!P.call(A,D)||(m=A[D],L.attribs[D]=m.clone());return L.children=[],this.children.forEach(function(_){var j;return j=_.clone(),j.parent=L,L.children.push(j)}),L},y.prototype.attribute=function(m,D){var L,A;if(m!=null&&(m=o(m)),l(m))for(L in m)!P.call(m,L)||(A=m[L],this.attribute(L,A));else a(D)&&(D=D.apply()),this.options.keepNullAttributes&&D==null?this.attribs[m]=new e(this,m,""):D!=null&&(this.attribs[m]=new e(this,m,D));return this},y.prototype.removeAttribute=function(m){var D,L,A;if(m==null)throw new Error("Missing attribute name. "+this.debugInfo());if(m=o(m),Array.isArray(m))for(L=0,A=m.length;L<A;L++)D=m[L],delete this.attribs[D];else delete this.attribs[m];return this},y.prototype.toString=function(m){return this.options.writer.element(this,this.options.writer.filterOptions(m))},y.prototype.att=function(m,D){return this.attribute(m,D)},y.prototype.a=function(m,D){return this.attribute(m,D)},y.prototype.getAttribute=function(m){return this.attribs.hasOwnProperty(m)?this.attribs[m].value:null},y.prototype.setAttribute=function(m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getAttributeNode=function(m){return this.attribs.hasOwnProperty(m)?this.attribs[m]:null},y.prototype.setAttributeNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.removeAttributeNode=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getElementsByTagName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getAttributeNS=function(m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.setAttributeNS=function(m,D,L){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.removeAttributeNS=function(m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getAttributeNodeNS=function(m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.setAttributeNodeNS=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getElementsByTagNameNS=function(m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.hasAttribute=function(m){return this.attribs.hasOwnProperty(m)},y.prototype.hasAttributeNS=function(m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.setIdAttribute=function(m,D){return this.attribs.hasOwnProperty(m)?this.attribs[m].isId:D},y.prototype.setIdAttributeNS=function(m,D,L){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.setIdAttributeNode=function(m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getElementsByTagName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getElementsByTagNameNS=function(m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getElementsByClassName=function(m){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.isEqualNode=function(m){var D,L,A;if(!y.__super__.isEqualNode.apply(this,arguments).isEqualNode(m)||m.namespaceURI!==this.namespaceURI||m.prefix!==this.prefix||m.localName!==this.localName||m.attribs.length!==this.attribs.length)return!1;for(D=L=0,A=this.attribs.length-1;0<=A?L<=A:L>=A;D=0<=A?++L:--L)if(!this.attribs[D].isEqualNode(m.attribs[D]))return!1;return!0},y}(i)}).call(zs)});var er=G((Ks,Qs)=>{(function(){var r,e,t=function(i,o){for(var a in o)n.call(o,a)&&(i[a]=o[a]);function l(){this.constructor=i}return l.prototype=o.prototype,i.prototype=new l,i.__super__=o.prototype,i},n={}.hasOwnProperty;e=xe(),Qs.exports=r=function(i){t(o,i);function o(a){o.__super__.constructor.call(this,a),this.value=""}return Object.defineProperty(o.prototype,"data",{get:function(){return this.value},set:function(a){return this.value=a||""}}),Object.defineProperty(o.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.value},set:function(a){return this.value=a||""}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.substringData=function(a,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.appendData=function(a){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.insertData=function(a,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.deleteData=function(a,l){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceData=function(a,l,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.isEqualNode=function(a){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(a)||a.data!==this.data)},o}(e)}).call(Ks)});var Gr=G((Zs,Js)=>{(function(){var r,e,t,n=function(o,a){for(var l in a)i.call(a,l)&&(o[l]=a[l]);function p(){this.constructor=o}return p.prototype=a.prototype,o.prototype=new p,o.__super__=a.prototype,o},i={}.hasOwnProperty;r=fe(),t=er(),Js.exports=e=function(o){n(a,o);function a(l,p){if(a.__super__.constructor.call(this,l),p==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=r.CData,this.value=this.stringify.cdata(p)}return a.prototype.clone=function(){return Object.create(this)},a.prototype.toString=function(l){return this.options.writer.cdata(this,this.options.writer.filterOptions(l))},a}(t)}).call(Zs)});var Wr=G((ea,ta)=>{(function(){var r,e,t,n=function(o,a){for(var l in a)i.call(a,l)&&(o[l]=a[l]);function p(){this.constructor=o}return p.prototype=a.prototype,o.prototype=new p,o.__super__=a.prototype,o},i={}.hasOwnProperty;r=fe(),e=er(),ta.exports=t=function(o){n(a,o);function a(l,p){if(a.__super__.constructor.call(this,l),p==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=r.Comment,this.value=this.stringify.comment(p)}return a.prototype.clone=function(){return Object.create(this)},a.prototype.toString=function(l){return this.options.writer.comment(this,this.options.writer.filterOptions(l))},a}(e)}).call(ea)});var zr=G((ra,na)=>{(function(){var r,e,t,n,i=function(a,l){for(var p in l)o.call(l,p)&&(a[p]=l[p]);function g(){this.constructor=a}return g.prototype=l.prototype,a.prototype=new g,a.__super__=l.prototype,a},o={}.hasOwnProperty;n=We().isObject,t=xe(),r=fe(),na.exports=e=function(a){i(l,a);function l(p,g,P,w){var y;l.__super__.constructor.call(this,p),n(g)&&(y=g,g=y.version,P=y.encoding,w=y.standalone),g||(g="1.0"),this.type=r.Declaration,this.version=this.stringify.xmlVersion(g),P!=null&&(this.encoding=this.stringify.xmlEncoding(P)),w!=null&&(this.standalone=this.stringify.xmlStandalone(w))}return l.prototype.toString=function(p){return this.options.writer.declaration(this,this.options.writer.filterOptions(p))},l}(t)}).call(ra)});var Yr=G((ia,oa)=>{(function(){var r,e,t,n=function(o,a){for(var l in a)i.call(a,l)&&(o[l]=a[l]);function p(){this.constructor=o}return p.prototype=a.prototype,o.prototype=new p,o.__super__=a.prototype,o},i={}.hasOwnProperty;t=xe(),r=fe(),oa.exports=e=function(o){n(a,o);function a(l,p,g,P,w,y){if(a.__super__.constructor.call(this,l),p==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(g==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(p));if(!P)throw new Error("Missing DTD attribute type. "+this.debugInfo(p));if(!w)throw new Error("Missing DTD attribute default. "+this.debugInfo(p));if(w.indexOf("#")!==0&&(w="#"+w),!w.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(p));if(y&&!w.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(p));this.elementName=this.stringify.name(p),this.type=r.AttributeDeclaration,this.attributeName=this.stringify.name(g),this.attributeType=this.stringify.dtdAttType(P),y&&(this.defaultValue=this.stringify.dtdAttDefault(y)),this.defaultValueType=w}return a.prototype.toString=function(l){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(l))},a}(t)}).call(ia)});var Kr=G((sa,aa)=>{(function(){var r,e,t,n,i=function(a,l){for(var p in l)o.call(l,p)&&(a[p]=l[p]);function g(){this.constructor=a}return g.prototype=l.prototype,a.prototype=new g,a.__super__=l.prototype,a},o={}.hasOwnProperty;n=We().isObject,t=xe(),r=fe(),aa.exports=e=function(a){i(l,a);function l(p,g,P,w){if(l.__super__.constructor.call(this,p),P==null)throw new Error("Missing DTD entity name. "+this.debugInfo(P));if(w==null)throw new Error("Missing DTD entity value. "+this.debugInfo(P));if(this.pe=!!g,this.name=this.stringify.name(P),this.type=r.EntityDeclaration,!n(w))this.value=this.stringify.dtdEntityValue(w),this.internal=!0;else{if(!w.pubID&&!w.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(P));if(w.pubID&&!w.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(P));if(this.internal=!1,w.pubID!=null&&(this.pubID=this.stringify.dtdPubID(w.pubID)),w.sysID!=null&&(this.sysID=this.stringify.dtdSysID(w.sysID)),w.nData!=null&&(this.nData=this.stringify.dtdNData(w.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(P))}}return Object.defineProperty(l.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(l.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(l.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(l.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(l.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(l.prototype,"xmlVersion",{get:function(){return null}}),l.prototype.toString=function(p){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(p))},l}(t)}).call(sa)});var Qr=G((ua,ca)=>{(function(){var r,e,t,n=function(o,a){for(var l in a)i.call(a,l)&&(o[l]=a[l]);function p(){this.constructor=o}return p.prototype=a.prototype,o.prototype=new p,o.__super__=a.prototype,o},i={}.hasOwnProperty;t=xe(),r=fe(),ca.exports=e=function(o){n(a,o);function a(l,p,g){if(a.__super__.constructor.call(this,l),p==null)throw new Error("Missing DTD element name. "+this.debugInfo());g||(g="(#PCDATA)"),Array.isArray(g)&&(g="("+g.join(",")+")"),this.name=this.stringify.name(p),this.type=r.ElementDeclaration,this.value=this.stringify.dtdElementValue(g)}return a.prototype.toString=function(l){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(l))},a}(t)}).call(ua)});var Zr=G((la,fa)=>{(function(){var r,e,t,n=function(o,a){for(var l in a)i.call(a,l)&&(o[l]=a[l]);function p(){this.constructor=o}return p.prototype=a.prototype,o.prototype=new p,o.__super__=a.prototype,o},i={}.hasOwnProperty;t=xe(),r=fe(),fa.exports=e=function(o){n(a,o);function a(l,p,g){if(a.__super__.constructor.call(this,l),p==null)throw new Error("Missing DTD notation name. "+this.debugInfo(p));if(!g.pubID&&!g.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(p));this.name=this.stringify.name(p),this.type=r.NotationDeclaration,g.pubID!=null&&(this.pubID=this.stringify.dtdPubID(g.pubID)),g.sysID!=null&&(this.sysID=this.stringify.dtdSysID(g.sysID))}return Object.defineProperty(a.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(a.prototype,"systemId",{get:function(){return this.sysID}}),a.prototype.toString=function(l){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(l))},a}(t)}).call(la)});var Jr=G((ha,pa)=>{(function(){var r,e,t,n,i,o,a,l,p,g=function(w,y){for(var m in y)P.call(y,m)&&(w[m]=y[m]);function D(){this.constructor=w}return D.prototype=y.prototype,w.prototype=new D,w.__super__=y.prototype,w},P={}.hasOwnProperty;p=We().isObject,l=xe(),r=fe(),e=Yr(),n=Kr(),t=Qr(),i=Zr(),a=$r(),pa.exports=o=function(w){g(y,w);function y(m,D,L){var A,_,j,T,f,c;if(y.__super__.constructor.call(this,m),this.type=r.DocType,m.children){for(T=m.children,_=0,j=T.length;_<j;_++)if(A=T[_],A.type===r.Element){this.name=A.name;break}}this.documentObject=m,p(D)&&(f=D,D=f.pubID,L=f.sysID),L==null&&(c=[D,L],L=c[0],D=c[1]),D!=null&&(this.pubID=this.stringify.dtdPubID(D)),L!=null&&(this.sysID=this.stringify.dtdSysID(L))}return Object.defineProperty(y.prototype,"entities",{get:function(){var m,D,L,A,_;for(A={},_=this.children,D=0,L=_.length;D<L;D++)m=_[D],m.type===r.EntityDeclaration&&!m.pe&&(A[m.name]=m);return new a(A)}}),Object.defineProperty(y.prototype,"notations",{get:function(){var m,D,L,A,_;for(A={},_=this.children,D=0,L=_.length;D<L;D++)m=_[D],m.type===r.NotationDeclaration&&(A[m.name]=m);return new a(A)}}),Object.defineProperty(y.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(y.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(y.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),y.prototype.element=function(m,D){var L;return L=new t(this,m,D),this.children.push(L),this},y.prototype.attList=function(m,D,L,A,_){var j;return j=new e(this,m,D,L,A,_),this.children.push(j),this},y.prototype.entity=function(m,D){var L;return L=new n(this,!1,m,D),this.children.push(L),this},y.prototype.pEntity=function(m,D){var L;return L=new n(this,!0,m,D),this.children.push(L),this},y.prototype.notation=function(m,D){var L;return L=new i(this,m,D),this.children.push(L),this},y.prototype.toString=function(m){return this.options.writer.docType(this,this.options.writer.filterOptions(m))},y.prototype.ele=function(m,D){return this.element(m,D)},y.prototype.att=function(m,D,L,A,_){return this.attList(m,D,L,A,_)},y.prototype.ent=function(m,D){return this.entity(m,D)},y.prototype.pent=function(m,D){return this.pEntity(m,D)},y.prototype.not=function(m,D){return this.notation(m,D)},y.prototype.up=function(){return this.root()||this.documentObject},y.prototype.isEqualNode=function(m){return!(!y.__super__.isEqualNode.apply(this,arguments).isEqualNode(m)||m.name!==this.name||m.publicId!==this.publicId||m.systemId!==this.systemId)},y}(l)}).call(ha)});var en=G((da,ma)=>{(function(){var r,e,t,n=function(o,a){for(var l in a)i.call(a,l)&&(o[l]=a[l]);function p(){this.constructor=o}return p.prototype=a.prototype,o.prototype=new p,o.__super__=a.prototype,o},i={}.hasOwnProperty;r=fe(),e=xe(),ma.exports=t=function(o){n(a,o);function a(l,p){if(a.__super__.constructor.call(this,l),p==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=r.Raw,this.value=this.stringify.raw(p)}return a.prototype.clone=function(){return Object.create(this)},a.prototype.toString=function(l){return this.options.writer.raw(this,this.options.writer.filterOptions(l))},a}(e)}).call(da)});var tn=G((ga,ya)=>{(function(){var r,e,t,n=function(o,a){for(var l in a)i.call(a,l)&&(o[l]=a[l]);function p(){this.constructor=o}return p.prototype=a.prototype,o.prototype=new p,o.__super__=a.prototype,o},i={}.hasOwnProperty;r=fe(),e=er(),ya.exports=t=function(o){n(a,o);function a(l,p){if(a.__super__.constructor.call(this,l),p==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=r.Text,this.value=this.stringify.text(p)}return Object.defineProperty(a.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(a.prototype,"wholeText",{get:function(){var l,p,g;for(g="",p=this.previousSibling;p;)g=p.data+g,p=p.previousSibling;for(g+=this.data,l=this.nextSibling;l;)g=g+l.data,l=l.nextSibling;return g}}),a.prototype.clone=function(){return Object.create(this)},a.prototype.toString=function(l){return this.options.writer.text(this,this.options.writer.filterOptions(l))},a.prototype.splitText=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.replaceWholeText=function(l){throw new Error("This DOM method is not implemented."+this.debugInfo())},a}(e)}).call(ga)});var rn=G((va,ba)=>{(function(){var r,e,t,n=function(o,a){for(var l in a)i.call(a,l)&&(o[l]=a[l]);function p(){this.constructor=o}return p.prototype=a.prototype,o.prototype=new p,o.__super__=a.prototype,o},i={}.hasOwnProperty;r=fe(),e=er(),ba.exports=t=function(o){n(a,o);function a(l,p,g){if(a.__super__.constructor.call(this,l),p==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=r.ProcessingInstruction,this.target=this.stringify.insTarget(p),this.name=this.target,g&&(this.value=this.stringify.insValue(g))}return a.prototype.clone=function(){return Object.create(this)},a.prototype.toString=function(l){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(l))},a.prototype.isEqualNode=function(l){return!(!a.__super__.isEqualNode.apply(this,arguments).isEqualNode(l)||l.target!==this.target)},a}(e)}).call(va)});var Bi=G((wa,Ta)=>{(function(){var r,e,t,n=function(o,a){for(var l in a)i.call(a,l)&&(o[l]=a[l]);function p(){this.constructor=o}return p.prototype=a.prototype,o.prototype=new p,o.__super__=a.prototype,o},i={}.hasOwnProperty;t=xe(),r=fe(),Ta.exports=e=function(o){n(a,o);function a(l){a.__super__.constructor.call(this,l),this.type=r.Dummy}return a.prototype.clone=function(){return Object.create(this)},a.prototype.toString=function(l){return""},a}(t)}).call(wa)});var Ca=G((Ea,Da)=>{(function(){var r;Da.exports=r=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(Ea)});var Ia=G((Pa,Oa)=>{(function(){Oa.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(Pa)});var xe=G((Sa,_a)=>{(function(){var r,e,t,n,i,o,a,l,p,g,P,w,y,m,D,L,A,_,j,T={}.hasOwnProperty;j=We(),_=j.isObject,A=j.isFunction,L=j.isEmpty,D=j.getValue,l=null,t=null,n=null,i=null,o=null,y=null,m=null,w=null,a=null,e=null,P=null,p=null,r=null,_a.exports=g=function(){function f(c){this.parent=c,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,l||(l=Hr(),t=Gr(),n=Wr(),i=zr(),o=Jr(),y=en(),m=tn(),w=rn(),a=Bi(),e=fe(),P=Ca(),p=$r(),r=Ia())}return Object.defineProperty(f.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(f.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(f.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(f.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(f.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new P(this.children)),this.childNodeList}}),Object.defineProperty(f.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(f.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(f.prototype,"previousSibling",{get:function(){var c;return c=this.parent.children.indexOf(this),this.parent.children[c-1]||null}}),Object.defineProperty(f.prototype,"nextSibling",{get:function(){var c;return c=this.parent.children.indexOf(this),this.parent.children[c+1]||null}}),Object.defineProperty(f.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(f.prototype,"textContent",{get:function(){var c,E,I,b,M;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(M="",b=this.children,E=0,I=b.length;E<I;E++)c=b[E],c.textContent&&(M+=c.textContent);return M}else return null},set:function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),f.prototype.setParent=function(c){var E,I,b,M,C;for(this.parent=c,c&&(this.options=c.options,this.stringify=c.stringify),M=this.children,C=[],I=0,b=M.length;I<b;I++)E=M[I],C.push(E.setParent(this));return C},f.prototype.element=function(c,E,I){var b,M,C,R,B,X,K,J,H,oe,Q;if(X=null,E===null&&I==null&&(H=[{},null],E=H[0],I=H[1]),E==null&&(E={}),E=D(E),_(E)||(oe=[E,I],I=oe[0],E=oe[1]),c!=null&&(c=D(c)),Array.isArray(c))for(C=0,K=c.length;C<K;C++)M=c[C],X=this.element(M);else if(A(c))X=this.element(c.apply());else if(_(c)){for(B in c)if(!!T.call(c,B))if(Q=c[B],A(Q)&&(Q=Q.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&B.indexOf(this.stringify.convertAttKey)===0)X=this.attribute(B.substr(this.stringify.convertAttKey.length),Q);else if(!this.options.separateArrayItems&&Array.isArray(Q)&&L(Q))X=this.dummy();else if(_(Q)&&L(Q))X=this.element(B);else if(!this.options.keepNullNodes&&Q==null)X=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(Q))for(R=0,J=Q.length;R<J;R++)M=Q[R],b={},b[B]=M,X=this.element(b);else _(Q)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&B.indexOf(this.stringify.convertTextKey)===0?X=this.element(Q):(X=this.element(B),X.element(Q)):X=this.element(B,Q)}else!this.options.keepNullNodes&&I===null?X=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&c.indexOf(this.stringify.convertTextKey)===0?X=this.text(I):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&c.indexOf(this.stringify.convertCDataKey)===0?X=this.cdata(I):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&c.indexOf(this.stringify.convertCommentKey)===0?X=this.comment(I):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&c.indexOf(this.stringify.convertRawKey)===0?X=this.raw(I):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&c.indexOf(this.stringify.convertPIKey)===0?X=this.instruction(c.substr(this.stringify.convertPIKey.length),I):X=this.node(c,E,I);if(X==null)throw new Error("Could not create any elements with: "+c+". "+this.debugInfo());return X},f.prototype.insertBefore=function(c,E,I){var b,M,C,R,B;if(c?.type)return C=c,R=E,C.setParent(this),R?(M=children.indexOf(R),B=children.splice(M),children.push(C),Array.prototype.push.apply(children,B)):children.push(C),C;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(c));return M=this.parent.children.indexOf(this),B=this.parent.children.splice(M),b=this.parent.element(c,E,I),Array.prototype.push.apply(this.parent.children,B),b},f.prototype.insertAfter=function(c,E,I){var b,M,C;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(c));return M=this.parent.children.indexOf(this),C=this.parent.children.splice(M+1),b=this.parent.element(c,E,I),Array.prototype.push.apply(this.parent.children,C),b},f.prototype.remove=function(){var c,E;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return c=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[c,c-c+1].concat(E=[])),this.parent},f.prototype.node=function(c,E,I){var b,M;return c!=null&&(c=D(c)),E||(E={}),E=D(E),_(E)||(M=[E,I],I=M[0],E=M[1]),b=new l(this,c,E),I!=null&&b.text(I),this.children.push(b),b},f.prototype.text=function(c){var E;return _(c)&&this.element(c),E=new m(this,c),this.children.push(E),this},f.prototype.cdata=function(c){var E;return E=new t(this,c),this.children.push(E),this},f.prototype.comment=function(c){var E;return E=new n(this,c),this.children.push(E),this},f.prototype.commentBefore=function(c){var E,I,b;return I=this.parent.children.indexOf(this),b=this.parent.children.splice(I),E=this.parent.comment(c),Array.prototype.push.apply(this.parent.children,b),this},f.prototype.commentAfter=function(c){var E,I,b;return I=this.parent.children.indexOf(this),b=this.parent.children.splice(I+1),E=this.parent.comment(c),Array.prototype.push.apply(this.parent.children,b),this},f.prototype.raw=function(c){var E;return E=new y(this,c),this.children.push(E),this},f.prototype.dummy=function(){var c;return c=new a(this),c},f.prototype.instruction=function(c,E){var I,b,M,C,R;if(c!=null&&(c=D(c)),E!=null&&(E=D(E)),Array.isArray(c))for(C=0,R=c.length;C<R;C++)I=c[C],this.instruction(I);else if(_(c))for(I in c)!T.call(c,I)||(b=c[I],this.instruction(I,b));else A(E)&&(E=E.apply()),M=new w(this,c,E),this.children.push(M);return this},f.prototype.instructionBefore=function(c,E){var I,b,M;return b=this.parent.children.indexOf(this),M=this.parent.children.splice(b),I=this.parent.instruction(c,E),Array.prototype.push.apply(this.parent.children,M),this},f.prototype.instructionAfter=function(c,E){var I,b,M;return b=this.parent.children.indexOf(this),M=this.parent.children.splice(b+1),I=this.parent.instruction(c,E),Array.prototype.push.apply(this.parent.children,M),this},f.prototype.declaration=function(c,E,I){var b,M;return b=this.document(),M=new i(b,c,E,I),b.children.length===0?b.children.unshift(M):b.children[0].type===e.Declaration?b.children[0]=M:b.children.unshift(M),b.root()||b},f.prototype.dtd=function(c,E){var I,b,M,C,R,B,X,K,J,H;for(b=this.document(),M=new o(b,c,E),J=b.children,C=R=0,X=J.length;R<X;C=++R)if(I=J[C],I.type===e.DocType)return b.children[C]=M,M;for(H=b.children,C=B=0,K=H.length;B<K;C=++B)if(I=H[C],I.isRoot)return b.children.splice(C,0,M),M;return b.children.push(M),M},f.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},f.prototype.root=function(){var c;for(c=this;c;){if(c.type===e.Document)return c.rootObject;if(c.isRoot)return c;c=c.parent}},f.prototype.document=function(){var c;for(c=this;c;){if(c.type===e.Document)return c;c=c.parent}},f.prototype.end=function(c){return this.document().end(c)},f.prototype.prev=function(){var c;if(c=this.parent.children.indexOf(this),c<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[c-1]},f.prototype.next=function(){var c;if(c=this.parent.children.indexOf(this),c===-1||c===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[c+1]},f.prototype.importDocument=function(c){var E;return E=c.root().clone(),E.parent=this,E.isRoot=!1,this.children.push(E),this},f.prototype.debugInfo=function(c){var E,I;return c=c||this.name,c==null&&!((E=this.parent)!=null&&E.name)?"":c==null?"parent: <"+this.parent.name+">":(I=this.parent)!=null&&I.name?"node: <"+c+">, parent: <"+this.parent.name+">":"node: <"+c+">"},f.prototype.ele=function(c,E,I){return this.element(c,E,I)},f.prototype.nod=function(c,E,I){return this.node(c,E,I)},f.prototype.txt=function(c){return this.text(c)},f.prototype.dat=function(c){return this.cdata(c)},f.prototype.com=function(c){return this.comment(c)},f.prototype.ins=function(c,E){return this.instruction(c,E)},f.prototype.doc=function(){return this.document()},f.prototype.dec=function(c,E,I){return this.declaration(c,E,I)},f.prototype.e=function(c,E,I){return this.element(c,E,I)},f.prototype.n=function(c,E,I){return this.node(c,E,I)},f.prototype.t=function(c){return this.text(c)},f.prototype.d=function(c){return this.cdata(c)},f.prototype.c=function(c){return this.comment(c)},f.prototype.r=function(c){return this.raw(c)},f.prototype.i=function(c,E){return this.instruction(c,E)},f.prototype.u=function(){return this.up()},f.prototype.importXMLBuilder=function(c){return this.importDocument(c)},f.prototype.replaceChild=function(c,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.removeChild=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.appendChild=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.hasChildNodes=function(){return this.children.length!==0},f.prototype.cloneNode=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.isSupported=function(c,E){return!0},f.prototype.hasAttributes=function(){return this.attribs.length!==0},f.prototype.compareDocumentPosition=function(c){var E,I;return E=this,E===c?0:this.document()!==c.document()?(I=r.Disconnected|r.ImplementationSpecific,Math.random()<.5?I|=r.Preceding:I|=r.Following,I):E.isAncestor(c)?r.Contains|r.Preceding:E.isDescendant(c)?r.Contains|r.Following:E.isPreceding(c)?r.Preceding:r.Following},f.prototype.isSameNode=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.lookupPrefix=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.isDefaultNamespace=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.lookupNamespaceURI=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.isEqualNode=function(c){var E,I,b;if(c.nodeType!==this.nodeType||c.children.length!==this.children.length)return!1;for(E=I=0,b=this.children.length-1;0<=b?I<=b:I>=b;E=0<=b?++I:--I)if(!this.children[E].isEqualNode(c.children[E]))return!1;return!0},f.prototype.getFeature=function(c,E){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.setUserData=function(c,E,I){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.getUserData=function(c){throw new Error("This DOM method is not implemented."+this.debugInfo())},f.prototype.contains=function(c){return c?c===this||this.isDescendant(c):!1},f.prototype.isDescendant=function(c){var E,I,b,M,C;for(C=this.children,b=0,M=C.length;b<M;b++)if(E=C[b],c===E||(I=E.isDescendant(c),I))return!0;return!1},f.prototype.isAncestor=function(c){return c.isDescendant(this)},f.prototype.isPreceding=function(c){var E,I;return E=this.treePosition(c),I=this.treePosition(this),E===-1||I===-1?!1:E<I},f.prototype.isFollowing=function(c){var E,I;return E=this.treePosition(c),I=this.treePosition(this),E===-1||I===-1?!1:E>I},f.prototype.treePosition=function(c){var E,I;return I=0,E=!1,this.foreachTreeNode(this.document(),function(b){if(I++,!E&&b===c)return E=!0}),E?I:-1},f.prototype.foreachTreeNode=function(c,E){var I,b,M,C,R;for(c||(c=this.document()),C=c.children,b=0,M=C.length;b<M;b++){if(I=C[b],R=E(I))return R;if(R=this.foreachTreeNode(I,E),R)return R}},f}()}).call(Sa)});var ji=G((La,Aa)=>{(function(){var r,e=function(n,i){return function(){return n.apply(i,arguments)}},t={}.hasOwnProperty;Aa.exports=r=function(){function n(i){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var o,a,l;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),a=i.stringify||{};for(o in a)!t.call(a,o)||(l=a[o],this[o]=l)}return n.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},n.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},n.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},n.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},n.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},n.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},n.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},n.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},n.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},n.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},n.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},n.prototype.convertAttKey="@",n.prototype.convertPIKey="?",n.prototype.convertTextKey="#text",n.prototype.convertCDataKey="#cdata",n.prototype.convertCommentKey="#comment",n.prototype.convertRawKey="#raw",n.prototype.assertLegalChar=function(i){var o,a;if(this.options.noValidation)return i;if(o="",this.options.version==="1.0"){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,a=i.match(o))throw new Error("Invalid character in string: "+i+" at index "+a.index)}else if(this.options.version==="1.1"&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,a=i.match(o)))throw new Error("Invalid character in string: "+i+" at index "+a.index);return i},n.prototype.assertLegalName=function(i){var o;if(this.options.noValidation)return i;if(this.assertLegalChar(i),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(o))throw new Error("Invalid character in name");return i},n.prototype.textEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},n.prototype.attEscape=function(i){var o;return this.options.noValidation?i:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},n}()}).call(La)});var tr=G((Na,xa)=>{(function(){xa.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(Na)});var Vi=G((Ra,Ma)=>{(function(){var r,e,t,n,i,o,a,l,p,g,P,w,y,m,D,L,A,_={}.hasOwnProperty;A=We().assign,r=fe(),p=zr(),g=Jr(),t=Gr(),n=Wr(),w=Hr(),m=en(),D=tn(),y=rn(),P=Bi(),i=Yr(),o=Qr(),a=Kr(),l=Zr(),e=tr(),Ma.exports=L=function(){function j(T){var f,c,E;T||(T={}),this.options=T,c=T.writer||{};for(f in c)!_.call(c,f)||(E=c[f],this["_"+f]=this[f],this[f]=E)}return j.prototype.filterOptions=function(T){var f,c,E,I,b,M,C,R;return T||(T={}),T=A({},this.options,T),f={writer:this},f.pretty=T.pretty||!1,f.allowEmpty=T.allowEmpty||!1,f.indent=(c=T.indent)!=null?c:"  ",f.newline=(E=T.newline)!=null?E:`
`,f.offset=(I=T.offset)!=null?I:0,f.dontPrettyTextNodes=(b=(M=T.dontPrettyTextNodes)!=null?M:T.dontprettytextnodes)!=null?b:0,f.spaceBeforeSlash=(C=(R=T.spaceBeforeSlash)!=null?R:T.spacebeforeslash)!=null?C:"",f.spaceBeforeSlash===!0&&(f.spaceBeforeSlash=" "),f.suppressPrettyCount=0,f.user={},f.state=e.None,f},j.prototype.indent=function(T,f,c){var E;return!f.pretty||f.suppressPrettyCount?"":f.pretty&&(E=(c||0)+f.offset+1,E>0)?new Array(E).join(f.indent):""},j.prototype.endline=function(T,f,c){return!f.pretty||f.suppressPrettyCount?"":f.newline},j.prototype.attribute=function(T,f,c){var E;return this.openAttribute(T,f,c),E=" "+T.name+'="'+T.value+'"',this.closeAttribute(T,f,c),E},j.prototype.cdata=function(T,f,c){var E;return this.openNode(T,f,c),f.state=e.OpenTag,E=this.indent(T,f,c)+"<![CDATA[",f.state=e.InsideTag,E+=T.value,f.state=e.CloseTag,E+="]]>"+this.endline(T,f,c),f.state=e.None,this.closeNode(T,f,c),E},j.prototype.comment=function(T,f,c){var E;return this.openNode(T,f,c),f.state=e.OpenTag,E=this.indent(T,f,c)+"<!-- ",f.state=e.InsideTag,E+=T.value,f.state=e.CloseTag,E+=" -->"+this.endline(T,f,c),f.state=e.None,this.closeNode(T,f,c),E},j.prototype.declaration=function(T,f,c){var E;return this.openNode(T,f,c),f.state=e.OpenTag,E=this.indent(T,f,c)+"<?xml",f.state=e.InsideTag,E+=' version="'+T.version+'"',T.encoding!=null&&(E+=' encoding="'+T.encoding+'"'),T.standalone!=null&&(E+=' standalone="'+T.standalone+'"'),f.state=e.CloseTag,E+=f.spaceBeforeSlash+"?>",E+=this.endline(T,f,c),f.state=e.None,this.closeNode(T,f,c),E},j.prototype.docType=function(T,f,c){var E,I,b,M,C;if(c||(c=0),this.openNode(T,f,c),f.state=e.OpenTag,M=this.indent(T,f,c),M+="<!DOCTYPE "+T.root().name,T.pubID&&T.sysID?M+=' PUBLIC "'+T.pubID+'" "'+T.sysID+'"':T.sysID&&(M+=' SYSTEM "'+T.sysID+'"'),T.children.length>0){for(M+=" [",M+=this.endline(T,f,c),f.state=e.InsideTag,C=T.children,I=0,b=C.length;I<b;I++)E=C[I],M+=this.writeChildNode(E,f,c+1);f.state=e.CloseTag,M+="]"}return f.state=e.CloseTag,M+=f.spaceBeforeSlash+">",M+=this.endline(T,f,c),f.state=e.None,this.closeNode(T,f,c),M},j.prototype.element=function(T,f,c){var E,I,b,M,C,R,B,X,K,J,H,oe,Q,Ke;c||(c=0),J=!1,H="",this.openNode(T,f,c),f.state=e.OpenTag,H+=this.indent(T,f,c)+"<"+T.name,oe=T.attribs;for(K in oe)!_.call(oe,K)||(E=oe[K],H+=this.attribute(E,f,c));if(b=T.children.length,M=b===0?null:T.children[0],b===0||T.children.every(function(Se){return(Se.type===r.Text||Se.type===r.Raw)&&Se.value===""}))f.allowEmpty?(H+=">",f.state=e.CloseTag,H+="</"+T.name+">"+this.endline(T,f,c)):(f.state=e.CloseTag,H+=f.spaceBeforeSlash+"/>"+this.endline(T,f,c));else if(f.pretty&&b===1&&(M.type===r.Text||M.type===r.Raw)&&M.value!=null)H+=">",f.state=e.InsideTag,f.suppressPrettyCount++,J=!0,H+=this.writeChildNode(M,f,c+1),f.suppressPrettyCount--,J=!1,f.state=e.CloseTag,H+="</"+T.name+">"+this.endline(T,f,c);else{if(f.dontPrettyTextNodes){for(Q=T.children,C=0,B=Q.length;C<B;C++)if(I=Q[C],(I.type===r.Text||I.type===r.Raw)&&I.value!=null){f.suppressPrettyCount++,J=!0;break}}for(H+=">"+this.endline(T,f,c),f.state=e.InsideTag,Ke=T.children,R=0,X=Ke.length;R<X;R++)I=Ke[R],H+=this.writeChildNode(I,f,c+1);f.state=e.CloseTag,H+=this.indent(T,f,c)+"</"+T.name+">",J&&f.suppressPrettyCount--,H+=this.endline(T,f,c),f.state=e.None}return this.closeNode(T,f,c),H},j.prototype.writeChildNode=function(T,f,c){switch(T.type){case r.CData:return this.cdata(T,f,c);case r.Comment:return this.comment(T,f,c);case r.Element:return this.element(T,f,c);case r.Raw:return this.raw(T,f,c);case r.Text:return this.text(T,f,c);case r.ProcessingInstruction:return this.processingInstruction(T,f,c);case r.Dummy:return"";case r.Declaration:return this.declaration(T,f,c);case r.DocType:return this.docType(T,f,c);case r.AttributeDeclaration:return this.dtdAttList(T,f,c);case r.ElementDeclaration:return this.dtdElement(T,f,c);case r.EntityDeclaration:return this.dtdEntity(T,f,c);case r.NotationDeclaration:return this.dtdNotation(T,f,c);default:throw new Error("Unknown XML node type: "+T.constructor.name)}},j.prototype.processingInstruction=function(T,f,c){var E;return this.openNode(T,f,c),f.state=e.OpenTag,E=this.indent(T,f,c)+"<?",f.state=e.InsideTag,E+=T.target,T.value&&(E+=" "+T.value),f.state=e.CloseTag,E+=f.spaceBeforeSlash+"?>",E+=this.endline(T,f,c),f.state=e.None,this.closeNode(T,f,c),E},j.prototype.raw=function(T,f,c){var E;return this.openNode(T,f,c),f.state=e.OpenTag,E=this.indent(T,f,c),f.state=e.InsideTag,E+=T.value,f.state=e.CloseTag,E+=this.endline(T,f,c),f.state=e.None,this.closeNode(T,f,c),E},j.prototype.text=function(T,f,c){var E;return this.openNode(T,f,c),f.state=e.OpenTag,E=this.indent(T,f,c),f.state=e.InsideTag,E+=T.value,f.state=e.CloseTag,E+=this.endline(T,f,c),f.state=e.None,this.closeNode(T,f,c),E},j.prototype.dtdAttList=function(T,f,c){var E;return this.openNode(T,f,c),f.state=e.OpenTag,E=this.indent(T,f,c)+"<!ATTLIST",f.state=e.InsideTag,E+=" "+T.elementName+" "+T.attributeName+" "+T.attributeType,T.defaultValueType!=="#DEFAULT"&&(E+=" "+T.defaultValueType),T.defaultValue&&(E+=' "'+T.defaultValue+'"'),f.state=e.CloseTag,E+=f.spaceBeforeSlash+">"+this.endline(T,f,c),f.state=e.None,this.closeNode(T,f,c),E},j.prototype.dtdElement=function(T,f,c){var E;return this.openNode(T,f,c),f.state=e.OpenTag,E=this.indent(T,f,c)+"<!ELEMENT",f.state=e.InsideTag,E+=" "+T.name+" "+T.value,f.state=e.CloseTag,E+=f.spaceBeforeSlash+">"+this.endline(T,f,c),f.state=e.None,this.closeNode(T,f,c),E},j.prototype.dtdEntity=function(T,f,c){var E;return this.openNode(T,f,c),f.state=e.OpenTag,E=this.indent(T,f,c)+"<!ENTITY",f.state=e.InsideTag,T.pe&&(E+=" %"),E+=" "+T.name,T.value?E+=' "'+T.value+'"':(T.pubID&&T.sysID?E+=' PUBLIC "'+T.pubID+'" "'+T.sysID+'"':T.sysID&&(E+=' SYSTEM "'+T.sysID+'"'),T.nData&&(E+=" NDATA "+T.nData)),f.state=e.CloseTag,E+=f.spaceBeforeSlash+">"+this.endline(T,f,c),f.state=e.None,this.closeNode(T,f,c),E},j.prototype.dtdNotation=function(T,f,c){var E;return this.openNode(T,f,c),f.state=e.OpenTag,E=this.indent(T,f,c)+"<!NOTATION",f.state=e.InsideTag,E+=" "+T.name,T.pubID&&T.sysID?E+=' PUBLIC "'+T.pubID+'" "'+T.sysID+'"':T.pubID?E+=' PUBLIC "'+T.pubID+'"':T.sysID&&(E+=' SYSTEM "'+T.sysID+'"'),f.state=e.CloseTag,E+=f.spaceBeforeSlash+">"+this.endline(T,f,c),f.state=e.None,this.closeNode(T,f,c),E},j.prototype.openNode=function(T,f,c){},j.prototype.closeNode=function(T,f,c){},j.prototype.openAttribute=function(T,f,c){},j.prototype.closeAttribute=function(T,f,c){},j}()}).call(Ra)});var nn=G((Fa,qa)=>{(function(){var r,e,t=function(i,o){for(var a in o)n.call(o,a)&&(i[a]=o[a]);function l(){this.constructor=i}return l.prototype=o.prototype,i.prototype=new l,i.__super__=o.prototype,i},n={}.hasOwnProperty;e=Vi(),qa.exports=r=function(i){t(o,i);function o(a){o.__super__.constructor.call(this,a)}return o.prototype.document=function(a,l){var p,g,P,w,y;for(l=this.filterOptions(l),w="",y=a.children,g=0,P=y.length;g<P;g++)p=y[g],w+=this.writeChildNode(p,l,0);return l.pretty&&w.slice(-l.newline.length)===l.newline&&(w=w.slice(0,-l.newline.length)),w},o}(e)}).call(Fa)});var Ui=G((ka,Ba)=>{(function(){var r,e,t,n,i,o,a,l,p=function(P,w){for(var y in w)g.call(w,y)&&(P[y]=w[y]);function m(){this.constructor=P}return m.prototype=w.prototype,P.prototype=new m,P.__super__=w.prototype,P},g={}.hasOwnProperty;l=We().isPlainObject,t=qi(),e=Vs(),i=xe(),r=fe(),a=ji(),o=nn(),Ba.exports=n=function(P){p(w,P);function w(y){w.__super__.constructor.call(this,null),this.name="#document",this.type=r.Document,this.documentURI=null,this.domConfig=new e,y||(y={}),y.writer||(y.writer=new o),this.options=y,this.stringify=new a(y)}return Object.defineProperty(w.prototype,"implementation",{value:new t}),Object.defineProperty(w.prototype,"doctype",{get:function(){var y,m,D,L;for(L=this.children,m=0,D=L.length;m<D;m++)if(y=L[m],y.type===r.DocType)return y;return null}}),Object.defineProperty(w.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(w.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(w.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(w.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===r.Declaration?this.children[0].encoding:null}}),Object.defineProperty(w.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===r.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(w.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===r.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(w.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(w.prototype,"origin",{get:function(){return null}}),Object.defineProperty(w.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(w.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(w.prototype,"contentType",{get:function(){return null}}),w.prototype.end=function(y){var m;return m={},y?l(y)&&(m=y,y=this.options.writer):y=this.options.writer,y.document(this,y.filterOptions(m))},w.prototype.toString=function(y){return this.options.writer.document(this,this.options.writer.filterOptions(y))},w.prototype.createElement=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createTextNode=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createComment=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createCDATASection=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createProcessingInstruction=function(y,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createAttribute=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createEntityReference=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementsByTagName=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.importNode=function(y,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createElementNS=function(y,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createAttributeNS=function(y,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementsByTagNameNS=function(y,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementById=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.adoptNode=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.renameNode=function(y,m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.getElementsByClassName=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createEvent=function(y){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createNodeIterator=function(y,m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},w.prototype.createTreeWalker=function(y,m,D){throw new Error("This DOM method is not implemented."+this.debugInfo())},w}(i)}).call(ka)});var Ua=G((ja,Va)=>{(function(){var r,e,t,n,i,o,a,l,p,g,P,w,y,m,D,L,A,_,j,T,f,c,E,I,b={}.hasOwnProperty;I=We(),c=I.isObject,f=I.isFunction,E=I.isPlainObject,T=I.getValue,r=fe(),w=Ui(),m=Hr(),n=Gr(),i=Wr(),L=en(),j=tn(),D=rn(),g=zr(),P=Jr(),o=Yr(),l=Kr(),a=Qr(),p=Zr(),t=ki(),_=ji(),A=nn(),e=tr(),Va.exports=y=function(){function M(C,R,B){var X;this.name="?xml",this.type=r.Document,C||(C={}),X={},C.writer?E(C.writer)&&(X=C.writer,C.writer=new A):C.writer=new A,this.options=C,this.writer=C.writer,this.writerOptions=this.writer.filterOptions(X),this.stringify=new _(C),this.onDataCallback=R||function(){},this.onEndCallback=B||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return M.prototype.createChildNode=function(C){var R,B,X,K,J,H,oe,Q;switch(C.type){case r.CData:this.cdata(C.value);break;case r.Comment:this.comment(C.value);break;case r.Element:X={},oe=C.attribs;for(B in oe)!b.call(oe,B)||(R=oe[B],X[B]=R.value);this.node(C.name,X);break;case r.Dummy:this.dummy();break;case r.Raw:this.raw(C.value);break;case r.Text:this.text(C.value);break;case r.ProcessingInstruction:this.instruction(C.target,C.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+C.constructor.name)}for(Q=C.children,J=0,H=Q.length;J<H;J++)K=Q[J],this.createChildNode(K),K.type===r.Element&&this.up();return this},M.prototype.dummy=function(){return this},M.prototype.node=function(C,R,B){var X;if(C==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(C));return this.openCurrent(),C=T(C),R==null&&(R={}),R=T(R),c(R)||(X=[R,B],B=X[0],R=X[1]),this.currentNode=new m(this,C,R),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,B!=null&&this.text(B),this},M.prototype.element=function(C,R,B){var X,K,J,H,oe,Q;if(this.currentNode&&this.currentNode.type===r.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(C)||c(C)||f(C))for(H=this.options.noValidation,this.options.noValidation=!0,Q=new w(this.options).element("TEMP_ROOT"),Q.element(C),this.options.noValidation=H,oe=Q.children,K=0,J=oe.length;K<J;K++)X=oe[K],this.createChildNode(X),X.type===r.Element&&this.up();else this.node(C,R,B);return this},M.prototype.attribute=function(C,R){var B,X;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(C));if(C!=null&&(C=T(C)),c(C))for(B in C)!b.call(C,B)||(X=C[B],this.attribute(B,X));else f(R)&&(R=R.apply()),this.options.keepNullAttributes&&R==null?this.currentNode.attribs[C]=new t(this,C,""):R!=null&&(this.currentNode.attribs[C]=new t(this,C,R));return this},M.prototype.text=function(C){var R;return this.openCurrent(),R=new j(this,C),this.onData(this.writer.text(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},M.prototype.cdata=function(C){var R;return this.openCurrent(),R=new n(this,C),this.onData(this.writer.cdata(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},M.prototype.comment=function(C){var R;return this.openCurrent(),R=new i(this,C),this.onData(this.writer.comment(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},M.prototype.raw=function(C){var R;return this.openCurrent(),R=new L(this,C),this.onData(this.writer.raw(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},M.prototype.instruction=function(C,R){var B,X,K,J,H;if(this.openCurrent(),C!=null&&(C=T(C)),R!=null&&(R=T(R)),Array.isArray(C))for(B=0,J=C.length;B<J;B++)X=C[B],this.instruction(X);else if(c(C))for(X in C)!b.call(C,X)||(K=C[X],this.instruction(X,K));else f(R)&&(R=R.apply()),H=new D(this,C,R),this.onData(this.writer.processingInstruction(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},M.prototype.declaration=function(C,R,B){var X;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return X=new g(this,C,R,B),this.onData(this.writer.declaration(X,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},M.prototype.doctype=function(C,R,B){if(this.openCurrent(),C==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new P(this,R,B),this.currentNode.rootNodeName=C,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},M.prototype.dtdElement=function(C,R){var B;return this.openCurrent(),B=new a(this,C,R),this.onData(this.writer.dtdElement(B,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},M.prototype.attList=function(C,R,B,X,K){var J;return this.openCurrent(),J=new o(this,C,R,B,X,K),this.onData(this.writer.dtdAttList(J,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},M.prototype.entity=function(C,R){var B;return this.openCurrent(),B=new l(this,!1,C,R),this.onData(this.writer.dtdEntity(B,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},M.prototype.pEntity=function(C,R){var B;return this.openCurrent(),B=new l(this,!0,C,R),this.onData(this.writer.dtdEntity(B,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},M.prototype.notation=function(C,R){var B;return this.openCurrent(),B=new p(this,C,R),this.onData(this.writer.dtdNotation(B,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},M.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},M.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},M.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},M.prototype.openNode=function(C){var R,B,X,K;if(!C.isOpen){if(!this.root&&this.currentLevel===0&&C.type===r.Element&&(this.root=C),B="",C.type===r.Element){this.writerOptions.state=e.OpenTag,B=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<"+C.name,K=C.attribs;for(X in K)!b.call(K,X)||(R=K[X],B+=this.writer.attribute(R,this.writerOptions,this.currentLevel));B+=(C.children?">":"/>")+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,B=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+C.rootNodeName,C.pubID&&C.sysID?B+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.sysID&&(B+=' SYSTEM "'+C.sysID+'"'),C.children?(B+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,B+=">"),B+=this.writer.endline(C,this.writerOptions,this.currentLevel);return this.onData(B,this.currentLevel),C.isOpen=!0}},M.prototype.closeNode=function(C){var R;if(!C.isClosed)return R="",this.writerOptions.state=e.CloseTag,C.type===r.Element?R=this.writer.indent(C,this.writerOptions,this.currentLevel)+"</"+C.name+">"+this.writer.endline(C,this.writerOptions,this.currentLevel):R=this.writer.indent(C,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(R,this.currentLevel),C.isClosed=!0},M.prototype.onData=function(C,R){return this.documentStarted=!0,this.onDataCallback(C,R+1)},M.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},M.prototype.debugInfo=function(C){return C==null?"":"node: <"+C+">"},M.prototype.ele=function(){return this.element.apply(this,arguments)},M.prototype.nod=function(C,R,B){return this.node(C,R,B)},M.prototype.txt=function(C){return this.text(C)},M.prototype.dat=function(C){return this.cdata(C)},M.prototype.com=function(C){return this.comment(C)},M.prototype.ins=function(C,R){return this.instruction(C,R)},M.prototype.dec=function(C,R,B){return this.declaration(C,R,B)},M.prototype.dtd=function(C,R,B){return this.doctype(C,R,B)},M.prototype.e=function(C,R,B){return this.element(C,R,B)},M.prototype.n=function(C,R,B){return this.node(C,R,B)},M.prototype.t=function(C){return this.text(C)},M.prototype.d=function(C){return this.cdata(C)},M.prototype.c=function(C){return this.comment(C)},M.prototype.r=function(C){return this.raw(C)},M.prototype.i=function(C,R){return this.instruction(C,R)},M.prototype.att=function(){return this.currentNode&&this.currentNode.type===r.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},M.prototype.a=function(){return this.currentNode&&this.currentNode.type===r.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},M.prototype.ent=function(C,R){return this.entity(C,R)},M.prototype.pent=function(C,R){return this.pEntity(C,R)},M.prototype.not=function(C,R){return this.notation(C,R)},M}()}).call(ja)});var Ha=G((Xa,$a)=>{(function(){var r,e,t,n,i=function(a,l){for(var p in l)o.call(l,p)&&(a[p]=l[p]);function g(){this.constructor=a}return g.prototype=l.prototype,a.prototype=new g,a.__super__=l.prototype,a},o={}.hasOwnProperty;r=fe(),n=Vi(),e=tr(),$a.exports=t=function(a){i(l,a);function l(p,g){this.stream=p,l.__super__.constructor.call(this,g)}return l.prototype.endline=function(p,g,P){return p.isLastRootNode&&g.state===e.CloseTag?"":l.__super__.endline.call(this,p,g,P)},l.prototype.document=function(p,g){var P,w,y,m,D,L,A,_,j;for(A=p.children,w=y=0,D=A.length;y<D;w=++y)P=A[w],P.isLastRootNode=w===p.children.length-1;for(g=this.filterOptions(g),_=p.children,j=[],m=0,L=_.length;m<L;m++)P=_[m],j.push(this.writeChildNode(P,g,0));return j},l.prototype.attribute=function(p,g,P){return this.stream.write(l.__super__.attribute.call(this,p,g,P))},l.prototype.cdata=function(p,g,P){return this.stream.write(l.__super__.cdata.call(this,p,g,P))},l.prototype.comment=function(p,g,P){return this.stream.write(l.__super__.comment.call(this,p,g,P))},l.prototype.declaration=function(p,g,P){return this.stream.write(l.__super__.declaration.call(this,p,g,P))},l.prototype.docType=function(p,g,P){var w,y,m,D;if(P||(P=0),this.openNode(p,g,P),g.state=e.OpenTag,this.stream.write(this.indent(p,g,P)),this.stream.write("<!DOCTYPE "+p.root().name),p.pubID&&p.sysID?this.stream.write(' PUBLIC "'+p.pubID+'" "'+p.sysID+'"'):p.sysID&&this.stream.write(' SYSTEM "'+p.sysID+'"'),p.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(p,g,P)),g.state=e.InsideTag,D=p.children,y=0,m=D.length;y<m;y++)w=D[y],this.writeChildNode(w,g,P+1);g.state=e.CloseTag,this.stream.write("]")}return g.state=e.CloseTag,this.stream.write(g.spaceBeforeSlash+">"),this.stream.write(this.endline(p,g,P)),g.state=e.None,this.closeNode(p,g,P)},l.prototype.element=function(p,g,P){var w,y,m,D,L,A,_,j,T,f;P||(P=0),this.openNode(p,g,P),g.state=e.OpenTag,this.stream.write(this.indent(p,g,P)+"<"+p.name),T=p.attribs;for(_ in T)!o.call(T,_)||(w=T[_],this.attribute(w,g,P));if(m=p.children.length,D=m===0?null:p.children[0],m===0||p.children.every(function(c){return(c.type===r.Text||c.type===r.Raw)&&c.value===""}))g.allowEmpty?(this.stream.write(">"),g.state=e.CloseTag,this.stream.write("</"+p.name+">")):(g.state=e.CloseTag,this.stream.write(g.spaceBeforeSlash+"/>"));else if(g.pretty&&m===1&&(D.type===r.Text||D.type===r.Raw)&&D.value!=null)this.stream.write(">"),g.state=e.InsideTag,g.suppressPrettyCount++,j=!0,this.writeChildNode(D,g,P+1),g.suppressPrettyCount--,j=!1,g.state=e.CloseTag,this.stream.write("</"+p.name+">");else{for(this.stream.write(">"+this.endline(p,g,P)),g.state=e.InsideTag,f=p.children,L=0,A=f.length;L<A;L++)y=f[L],this.writeChildNode(y,g,P+1);g.state=e.CloseTag,this.stream.write(this.indent(p,g,P)+"</"+p.name+">")}return this.stream.write(this.endline(p,g,P)),g.state=e.None,this.closeNode(p,g,P)},l.prototype.processingInstruction=function(p,g,P){return this.stream.write(l.__super__.processingInstruction.call(this,p,g,P))},l.prototype.raw=function(p,g,P){return this.stream.write(l.__super__.raw.call(this,p,g,P))},l.prototype.text=function(p,g,P){return this.stream.write(l.__super__.text.call(this,p,g,P))},l.prototype.dtdAttList=function(p,g,P){return this.stream.write(l.__super__.dtdAttList.call(this,p,g,P))},l.prototype.dtdElement=function(p,g,P){return this.stream.write(l.__super__.dtdElement.call(this,p,g,P))},l.prototype.dtdEntity=function(p,g,P){return this.stream.write(l.__super__.dtdEntity.call(this,p,g,P))},l.prototype.dtdNotation=function(p,g,P){return this.stream.write(l.__super__.dtdNotation.call(this,p,g,P))},l}(n)}).call(Xa)});var Wa=G((Ga,ft)=>{(function(){var r,e,t,n,i,o,a,l,p,g;g=We(),l=g.assign,p=g.isFunction,t=qi(),n=Ui(),i=Ua(),a=nn(),o=Ha(),r=fe(),e=tr(),ft.exports.create=function(P,w,y,m){var D,L;if(P==null)throw new Error("Root element needs a name.");return m=l({},w,y,m),D=new n(m),L=D.element(P),m.headless||(D.declaration(m),(m.pubID!=null||m.sysID!=null)&&D.dtd(m)),L},ft.exports.begin=function(P,w,y){var m;return p(P)&&(m=[P,w],w=m[0],y=m[1],P={}),w?new i(P,w,y):new n(P)},ft.exports.stringWriter=function(P){return new a(P)},ft.exports.streamWriter=function(P,w){return new o(P,w)},ft.exports.implementation=new t,ft.exports.nodeType=r,ft.exports.writerState=e}).call(Ga)});var za=G(Xi=>{(function(){"use strict";var r,e,t,n,i,o={}.hasOwnProperty;r=Wa(),e=Xr().defaults,n=function(a){return typeof a=="string"&&(a.indexOf("&")>=0||a.indexOf(">")>=0||a.indexOf("<")>=0)},i=function(a){return"<![CDATA["+t(a)+"]]>"},t=function(a){return a.replace("]]>","]]]]><![CDATA[>")},Xi.Builder=function(){function a(l){var p,g,P;this.options={},g=e["0.2"];for(p in g)!o.call(g,p)||(P=g[p],this.options[p]=P);for(p in l)!o.call(l,p)||(P=l[p],this.options[p]=P)}return a.prototype.buildObject=function(l){var p,g,P,w,y;return p=this.options.attrkey,g=this.options.charkey,Object.keys(l).length===1&&this.options.rootName===e["0.2"].rootName?(y=Object.keys(l)[0],l=l[y]):y=this.options.rootName,P=function(m){return function(D,L){var A,_,j,T,f,c;if(typeof L!="object")m.options.cdata&&n(L)?D.raw(i(L)):D.txt(L);else if(Array.isArray(L)){for(T in L)if(!!o.call(L,T)){_=L[T];for(f in _)j=_[f],D=P(D.ele(f),j).up()}}else for(f in L)if(!!o.call(L,f))if(_=L[f],f===p){if(typeof _=="object")for(A in _)c=_[A],D=D.att(A,c)}else if(f===g)m.options.cdata&&n(_)?D=D.raw(i(_)):D=D.txt(_);else if(Array.isArray(_))for(T in _)!o.call(_,T)||(j=_[T],typeof j=="string"?m.options.cdata&&n(j)?D=D.ele(f).raw(i(j)).up():D=D.ele(f,j).up():D=P(D.ele(f),j).up());else typeof _=="object"?D=P(D.ele(f),_).up():typeof _=="string"&&m.options.cdata&&n(_)?D=D.ele(f).raw(i(_)).up():(_==null&&(_=""),D=D.ele(f,_.toString()).up());return D}}(this),w=r.create(y,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),P(w,l).end(this.options.renderOpts)},a}()}).call(Xi)});var Ya=G(on=>{(function(r){r.parser=function(d,u){return new t(d,u)},r.SAXParser=t,r.SAXStream=g,r.createStream=p,r.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];r.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(d,u){if(!(this instanceof t))return new t(d,u);var q=this;i(q),q.q=q.c="",q.bufferCheckPosition=r.MAX_BUFFER_LENGTH,q.opt=u||{},q.opt.lowercase=q.opt.lowercase||q.opt.lowercasetags,q.looseCase=q.opt.lowercase?"toLowerCase":"toUpperCase",q.tags=[],q.closed=q.closedRoot=q.sawRoot=!1,q.tag=q.error=null,q.strict=!!d,q.noscript=!!(d||q.opt.noscript),q.state=b.BEGIN,q.strictEntities=q.opt.strictEntities,q.ENTITIES=q.strictEntities?Object.create(r.XML_ENTITIES):Object.create(r.ENTITIES),q.attribList=[],q.opt.xmlns&&(q.ns=Object.create(D)),q.trackPosition=q.opt.position!==!1,q.trackPosition&&(q.position=q.line=q.column=0),C(q,"onready")}Object.create||(Object.create=function(d){function u(){}u.prototype=d;var q=new u;return q}),Object.keys||(Object.keys=function(d){var u=[];for(var q in d)d.hasOwnProperty(q)&&u.push(q);return u});function n(d){for(var u=Math.max(r.MAX_BUFFER_LENGTH,10),q=0,S=0,ee=e.length;S<ee;S++){var le=d[e[S]].length;if(le>u)switch(e[S]){case"textNode":B(d);break;case"cdata":R(d,"oncdata",d.cdata),d.cdata="";break;case"script":R(d,"onscript",d.script),d.script="";break;default:K(d,"Max buffer length exceeded: "+e[S])}q=Math.max(q,le)}var ue=r.MAX_BUFFER_LENGTH-q;d.bufferCheckPosition=ue+d.position}function i(d){for(var u=0,q=e.length;u<q;u++)d[e[u]]=""}function o(d){B(d),d.cdata!==""&&(R(d,"oncdata",d.cdata),d.cdata=""),d.script!==""&&(R(d,"onscript",d.script),d.script="")}t.prototype={end:function(){J(this)},write:pt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var a;try{a=require("stream").Stream}catch{a=function(){}}var l=r.EVENTS.filter(function(d){return d!=="error"&&d!=="end"});function p(d,u){return new g(d,u)}function g(d,u){if(!(this instanceof g))return new g(d,u);a.apply(this),this._parser=new t(d,u),this.writable=!0,this.readable=!0;var q=this;this._parser.onend=function(){q.emit("end")},this._parser.onerror=function(S){q.emit("error",S),q._parser.error=null},this._decoder=null,l.forEach(function(S){Object.defineProperty(q,"on"+S,{get:function(){return q._parser["on"+S]},set:function(ee){if(!ee)return q.removeAllListeners(S),q._parser["on"+S]=ee,ee;q.on(S,ee)},enumerable:!0,configurable:!1})})}g.prototype=Object.create(a.prototype,{constructor:{value:g}}),g.prototype.write=function(d){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(d)){if(!this._decoder){var u=require("string_decoder").StringDecoder;this._decoder=new u("utf8")}d=this._decoder.write(d)}return this._parser.write(d.toString()),this.emit("data",d),!0},g.prototype.end=function(d){return d&&d.length&&this.write(d),this._parser.end(),!0},g.prototype.on=function(d,u){var q=this;return!q._parser["on"+d]&&l.indexOf(d)!==-1&&(q._parser["on"+d]=function(){var S=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);S.splice(0,0,d),q.emit.apply(q,S)}),a.prototype.on.call(q,d,u)};var P="[CDATA[",w="DOCTYPE",y="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",D={xml:y,xmlns:m},L=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,j=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function T(d){return d===" "||d===`
`||d==="\r"||d==="	"}function f(d){return d==='"'||d==="'"}function c(d){return d===">"||T(d)}function E(d,u){return d.test(u)}function I(d,u){return!E(d,u)}var b=0;r.STATE={BEGIN:b++,BEGIN_WHITESPACE:b++,TEXT:b++,TEXT_ENTITY:b++,OPEN_WAKA:b++,SGML_DECL:b++,SGML_DECL_QUOTED:b++,DOCTYPE:b++,DOCTYPE_QUOTED:b++,DOCTYPE_DTD:b++,DOCTYPE_DTD_QUOTED:b++,COMMENT_STARTING:b++,COMMENT:b++,COMMENT_ENDING:b++,COMMENT_ENDED:b++,CDATA:b++,CDATA_ENDING:b++,CDATA_ENDING_2:b++,PROC_INST:b++,PROC_INST_BODY:b++,PROC_INST_ENDING:b++,OPEN_TAG:b++,OPEN_TAG_SLASH:b++,ATTRIB:b++,ATTRIB_NAME:b++,ATTRIB_NAME_SAW_WHITE:b++,ATTRIB_VALUE:b++,ATTRIB_VALUE_QUOTED:b++,ATTRIB_VALUE_CLOSED:b++,ATTRIB_VALUE_UNQUOTED:b++,ATTRIB_VALUE_ENTITY_Q:b++,ATTRIB_VALUE_ENTITY_U:b++,CLOSE_TAG:b++,CLOSE_TAG_SAW_WHITE:b++,SCRIPT:b++,SCRIPT_ENDING:b++},r.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},r.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(r.ENTITIES).forEach(function(d){var u=r.ENTITIES[d],q=typeof u=="number"?String.fromCharCode(u):u;r.ENTITIES[d]=q});for(var M in r.STATE)r.STATE[r.STATE[M]]=M;b=r.STATE;function C(d,u,q){d[u]&&d[u](q)}function R(d,u,q){d.textNode&&B(d),C(d,u,q)}function B(d){d.textNode=X(d.opt,d.textNode),d.textNode&&C(d,"ontext",d.textNode),d.textNode=""}function X(d,u){return d.trim&&(u=u.trim()),d.normalize&&(u=u.replace(/\s+/g," ")),u}function K(d,u){return B(d),d.trackPosition&&(u+=`
Line: `+d.line+`
Column: `+d.column+`
Char: `+d.c),u=new Error(u),d.error=u,C(d,"onerror",u),d}function J(d){return d.sawRoot&&!d.closedRoot&&H(d,"Unclosed root tag"),d.state!==b.BEGIN&&d.state!==b.BEGIN_WHITESPACE&&d.state!==b.TEXT&&K(d,"Unexpected end"),B(d),d.c="",d.closed=!0,C(d,"onend"),t.call(d,d.strict,d.opt),d}function H(d,u){if(typeof d!="object"||!(d instanceof t))throw new Error("bad call to strictFail");d.strict&&K(d,u)}function oe(d){d.strict||(d.tagName=d.tagName[d.looseCase]());var u=d.tags[d.tags.length-1]||d,q=d.tag={name:d.tagName,attributes:{}};d.opt.xmlns&&(q.ns=u.ns),d.attribList.length=0,R(d,"onopentagstart",q)}function Q(d,u){var q=d.indexOf(":"),S=q<0?["",d]:d.split(":"),ee=S[0],le=S[1];return u&&d==="xmlns"&&(ee="xmlns",le=""),{prefix:ee,local:le}}function Ke(d){if(d.strict||(d.attribName=d.attribName[d.looseCase]()),d.attribList.indexOf(d.attribName)!==-1||d.tag.attributes.hasOwnProperty(d.attribName)){d.attribName=d.attribValue="";return}if(d.opt.xmlns){var u=Q(d.attribName,!0),q=u.prefix,S=u.local;if(q==="xmlns")if(S==="xml"&&d.attribValue!==y)H(d,"xml: prefix must be bound to "+y+`
Actual: `+d.attribValue);else if(S==="xmlns"&&d.attribValue!==m)H(d,"xmlns: prefix must be bound to "+m+`
Actual: `+d.attribValue);else{var ee=d.tag,le=d.tags[d.tags.length-1]||d;ee.ns===le.ns&&(ee.ns=Object.create(le.ns)),ee.ns[S]=d.attribValue}d.attribList.push([d.attribName,d.attribValue])}else d.tag.attributes[d.attribName]=d.attribValue,R(d,"onattribute",{name:d.attribName,value:d.attribValue});d.attribName=d.attribValue=""}function Se(d,u){if(d.opt.xmlns){var q=d.tag,S=Q(d.tagName);q.prefix=S.prefix,q.local=S.local,q.uri=q.ns[S.prefix]||"",q.prefix&&!q.uri&&(H(d,"Unbound namespace prefix: "+JSON.stringify(d.tagName)),q.uri=S.prefix);var ee=d.tags[d.tags.length-1]||d;q.ns&&ee.ns!==q.ns&&Object.keys(q.ns).forEach(function(Vt){R(d,"onopennamespace",{prefix:Vt,uri:q.ns[Vt]})});for(var le=0,ue=d.attribList.length;le<ue;le++){var Te=d.attribList[le],_e=Te[0],Qe=Te[1],pe=Q(_e,!0),Be=pe.prefix,qn=pe.local,Oe=Be===""?"":q.ns[Be]||"",jt={name:_e,value:Qe,prefix:Be,local:qn,uri:Oe};Be&&Be!=="xmlns"&&!Oe&&(H(d,"Unbound namespace prefix: "+JSON.stringify(Be)),jt.uri=Be),d.tag.attributes[_e]=jt,R(d,"onattribute",jt)}d.attribList.length=0}d.tag.isSelfClosing=!!u,d.sawRoot=!0,d.tags.push(d.tag),R(d,"onopentag",d.tag),u||(!d.noscript&&d.tagName.toLowerCase()==="script"?d.state=b.SCRIPT:d.state=b.TEXT,d.tag=null,d.tagName=""),d.attribName=d.attribValue="",d.attribList.length=0}function kt(d){if(!d.tagName){H(d,"Weird empty close tag."),d.textNode+="</>",d.state=b.TEXT;return}if(d.script){if(d.tagName!=="script"){d.script+="</"+d.tagName+">",d.tagName="",d.state=b.SCRIPT;return}R(d,"onscript",d.script),d.script=""}var u=d.tags.length,q=d.tagName;d.strict||(q=q[d.looseCase]());for(var S=q;u--;){var ee=d.tags[u];if(ee.name!==S)H(d,"Unexpected close tag");else break}if(u<0){H(d,"Unmatched closing tag: "+d.tagName),d.textNode+="</"+d.tagName+">",d.state=b.TEXT;return}d.tagName=q;for(var le=d.tags.length;le-- >u;){var ue=d.tag=d.tags.pop();d.tagName=d.tag.name,R(d,"onclosetag",d.tagName);var Te={};for(var _e in ue.ns)Te[_e]=ue.ns[_e];var Qe=d.tags[d.tags.length-1]||d;d.opt.xmlns&&ue.ns!==Qe.ns&&Object.keys(ue.ns).forEach(function(pe){var Be=ue.ns[pe];R(d,"onclosenamespace",{prefix:pe,uri:Be})})}u===0&&(d.closedRoot=!0),d.tagName=d.attribValue=d.attribName="",d.attribList.length=0,d.state=b.TEXT}function Fn(d){var u=d.entity,q=u.toLowerCase(),S,ee="";return d.ENTITIES[u]?d.ENTITIES[u]:d.ENTITIES[q]?d.ENTITIES[q]:(u=q,u.charAt(0)==="#"&&(u.charAt(1)==="x"?(u=u.slice(2),S=parseInt(u,16),ee=S.toString(16)):(u=u.slice(1),S=parseInt(u,10),ee=S.toString(10))),u=u.replace(/^0+/,""),isNaN(S)||ee.toLowerCase()!==u?(H(d,"Invalid character entity"),"&"+d.entity+";"):String.fromCodePoint(S))}function sr(d,u){u==="<"?(d.state=b.OPEN_WAKA,d.startTagPosition=d.position):T(u)||(H(d,"Non-whitespace before first tag."),d.textNode=u,d.state=b.TEXT)}function Bt(d,u){var q="";return u<d.length&&(q=d.charAt(u)),q}function pt(d){var u=this;if(this.error)throw this.error;if(u.closed)return K(u,"Cannot write after close. Assign an onready handler.");if(d===null)return J(u);typeof d=="object"&&(d=d.toString());for(var q=0,S="";S=Bt(d,q++),u.c=S,!!S;)switch(u.trackPosition&&(u.position++,S===`
`?(u.line++,u.column=0):u.column++),u.state){case b.BEGIN:if(u.state=b.BEGIN_WHITESPACE,S==="\uFEFF")continue;sr(u,S);continue;case b.BEGIN_WHITESPACE:sr(u,S);continue;case b.TEXT:if(u.sawRoot&&!u.closedRoot){for(var ee=q-1;S&&S!=="<"&&S!=="&";)S=Bt(d,q++),S&&u.trackPosition&&(u.position++,S===`
`?(u.line++,u.column=0):u.column++);u.textNode+=d.substring(ee,q-1)}S==="<"&&!(u.sawRoot&&u.closedRoot&&!u.strict)?(u.state=b.OPEN_WAKA,u.startTagPosition=u.position):(!T(S)&&(!u.sawRoot||u.closedRoot)&&H(u,"Text data outside of root node."),S==="&"?u.state=b.TEXT_ENTITY:u.textNode+=S);continue;case b.SCRIPT:S==="<"?u.state=b.SCRIPT_ENDING:u.script+=S;continue;case b.SCRIPT_ENDING:S==="/"?u.state=b.CLOSE_TAG:(u.script+="<"+S,u.state=b.SCRIPT);continue;case b.OPEN_WAKA:if(S==="!")u.state=b.SGML_DECL,u.sgmlDecl="";else if(!T(S))if(E(L,S))u.state=b.OPEN_TAG,u.tagName=S;else if(S==="/")u.state=b.CLOSE_TAG,u.tagName="";else if(S==="?")u.state=b.PROC_INST,u.procInstName=u.procInstBody="";else{if(H(u,"Unencoded <"),u.startTagPosition+1<u.position){var le=u.position-u.startTagPosition;S=new Array(le).join(" ")+S}u.textNode+="<"+S,u.state=b.TEXT}continue;case b.SGML_DECL:(u.sgmlDecl+S).toUpperCase()===P?(R(u,"onopencdata"),u.state=b.CDATA,u.sgmlDecl="",u.cdata=""):u.sgmlDecl+S==="--"?(u.state=b.COMMENT,u.comment="",u.sgmlDecl=""):(u.sgmlDecl+S).toUpperCase()===w?(u.state=b.DOCTYPE,(u.doctype||u.sawRoot)&&H(u,"Inappropriately located doctype declaration"),u.doctype="",u.sgmlDecl=""):S===">"?(R(u,"onsgmldeclaration",u.sgmlDecl),u.sgmlDecl="",u.state=b.TEXT):(f(S)&&(u.state=b.SGML_DECL_QUOTED),u.sgmlDecl+=S);continue;case b.SGML_DECL_QUOTED:S===u.q&&(u.state=b.SGML_DECL,u.q=""),u.sgmlDecl+=S;continue;case b.DOCTYPE:S===">"?(u.state=b.TEXT,R(u,"ondoctype",u.doctype),u.doctype=!0):(u.doctype+=S,S==="["?u.state=b.DOCTYPE_DTD:f(S)&&(u.state=b.DOCTYPE_QUOTED,u.q=S));continue;case b.DOCTYPE_QUOTED:u.doctype+=S,S===u.q&&(u.q="",u.state=b.DOCTYPE);continue;case b.DOCTYPE_DTD:u.doctype+=S,S==="]"?u.state=b.DOCTYPE:f(S)&&(u.state=b.DOCTYPE_DTD_QUOTED,u.q=S);continue;case b.DOCTYPE_DTD_QUOTED:u.doctype+=S,S===u.q&&(u.state=b.DOCTYPE_DTD,u.q="");continue;case b.COMMENT:S==="-"?u.state=b.COMMENT_ENDING:u.comment+=S;continue;case b.COMMENT_ENDING:S==="-"?(u.state=b.COMMENT_ENDED,u.comment=X(u.opt,u.comment),u.comment&&R(u,"oncomment",u.comment),u.comment=""):(u.comment+="-"+S,u.state=b.COMMENT);continue;case b.COMMENT_ENDED:S!==">"?(H(u,"Malformed comment"),u.comment+="--"+S,u.state=b.COMMENT):u.state=b.TEXT;continue;case b.CDATA:S==="]"?u.state=b.CDATA_ENDING:u.cdata+=S;continue;case b.CDATA_ENDING:S==="]"?u.state=b.CDATA_ENDING_2:(u.cdata+="]"+S,u.state=b.CDATA);continue;case b.CDATA_ENDING_2:S===">"?(u.cdata&&R(u,"oncdata",u.cdata),R(u,"onclosecdata"),u.cdata="",u.state=b.TEXT):S==="]"?u.cdata+="]":(u.cdata+="]]"+S,u.state=b.CDATA);continue;case b.PROC_INST:S==="?"?u.state=b.PROC_INST_ENDING:T(S)?u.state=b.PROC_INST_BODY:u.procInstName+=S;continue;case b.PROC_INST_BODY:if(!u.procInstBody&&T(S))continue;S==="?"?u.state=b.PROC_INST_ENDING:u.procInstBody+=S;continue;case b.PROC_INST_ENDING:S===">"?(R(u,"onprocessinginstruction",{name:u.procInstName,body:u.procInstBody}),u.procInstName=u.procInstBody="",u.state=b.TEXT):(u.procInstBody+="?"+S,u.state=b.PROC_INST_BODY);continue;case b.OPEN_TAG:E(A,S)?u.tagName+=S:(oe(u),S===">"?Se(u):S==="/"?u.state=b.OPEN_TAG_SLASH:(T(S)||H(u,"Invalid character in tag name"),u.state=b.ATTRIB));continue;case b.OPEN_TAG_SLASH:S===">"?(Se(u,!0),kt(u)):(H(u,"Forward-slash in opening tag not followed by >"),u.state=b.ATTRIB);continue;case b.ATTRIB:if(T(S))continue;S===">"?Se(u):S==="/"?u.state=b.OPEN_TAG_SLASH:E(L,S)?(u.attribName=S,u.attribValue="",u.state=b.ATTRIB_NAME):H(u,"Invalid attribute name");continue;case b.ATTRIB_NAME:S==="="?u.state=b.ATTRIB_VALUE:S===">"?(H(u,"Attribute without value"),u.attribValue=u.attribName,Ke(u),Se(u)):T(S)?u.state=b.ATTRIB_NAME_SAW_WHITE:E(A,S)?u.attribName+=S:H(u,"Invalid attribute name");continue;case b.ATTRIB_NAME_SAW_WHITE:if(S==="=")u.state=b.ATTRIB_VALUE;else{if(T(S))continue;H(u,"Attribute without value"),u.tag.attributes[u.attribName]="",u.attribValue="",R(u,"onattribute",{name:u.attribName,value:""}),u.attribName="",S===">"?Se(u):E(L,S)?(u.attribName=S,u.state=b.ATTRIB_NAME):(H(u,"Invalid attribute name"),u.state=b.ATTRIB)}continue;case b.ATTRIB_VALUE:if(T(S))continue;f(S)?(u.q=S,u.state=b.ATTRIB_VALUE_QUOTED):(H(u,"Unquoted attribute value"),u.state=b.ATTRIB_VALUE_UNQUOTED,u.attribValue=S);continue;case b.ATTRIB_VALUE_QUOTED:if(S!==u.q){S==="&"?u.state=b.ATTRIB_VALUE_ENTITY_Q:u.attribValue+=S;continue}Ke(u),u.q="",u.state=b.ATTRIB_VALUE_CLOSED;continue;case b.ATTRIB_VALUE_CLOSED:T(S)?u.state=b.ATTRIB:S===">"?Se(u):S==="/"?u.state=b.OPEN_TAG_SLASH:E(L,S)?(H(u,"No whitespace between attributes"),u.attribName=S,u.attribValue="",u.state=b.ATTRIB_NAME):H(u,"Invalid attribute name");continue;case b.ATTRIB_VALUE_UNQUOTED:if(!c(S)){S==="&"?u.state=b.ATTRIB_VALUE_ENTITY_U:u.attribValue+=S;continue}Ke(u),S===">"?Se(u):u.state=b.ATTRIB;continue;case b.CLOSE_TAG:if(u.tagName)S===">"?kt(u):E(A,S)?u.tagName+=S:u.script?(u.script+="</"+u.tagName,u.tagName="",u.state=b.SCRIPT):(T(S)||H(u,"Invalid tagname in closing tag"),u.state=b.CLOSE_TAG_SAW_WHITE);else{if(T(S))continue;I(L,S)?u.script?(u.script+="</"+S,u.state=b.SCRIPT):H(u,"Invalid tagname in closing tag."):u.tagName=S}continue;case b.CLOSE_TAG_SAW_WHITE:if(T(S))continue;S===">"?kt(u):H(u,"Invalid characters in closing tag");continue;case b.TEXT_ENTITY:case b.ATTRIB_VALUE_ENTITY_Q:case b.ATTRIB_VALUE_ENTITY_U:var ue,Te;switch(u.state){case b.TEXT_ENTITY:ue=b.TEXT,Te="textNode";break;case b.ATTRIB_VALUE_ENTITY_Q:ue=b.ATTRIB_VALUE_QUOTED,Te="attribValue";break;case b.ATTRIB_VALUE_ENTITY_U:ue=b.ATTRIB_VALUE_UNQUOTED,Te="attribValue";break}S===";"?(u[Te]+=Fn(u),u.entity="",u.state=ue):E(u.entity.length?j:_,S)?u.entity+=S:(H(u,"Invalid character in entity name"),u[Te]+="&"+u.entity+S,u.entity="",u.state=ue);continue;default:throw new Error(u,"Unknown state: "+u.state)}return u.position>=u.bufferCheckPosition&&n(u),u}String.fromCodePoint||function(){var d=String.fromCharCode,u=Math.floor,q=function(){var S=16384,ee=[],le,ue,Te=-1,_e=arguments.length;if(!_e)return"";for(var Qe="";++Te<_e;){var pe=Number(arguments[Te]);if(!isFinite(pe)||pe<0||pe>1114111||u(pe)!==pe)throw RangeError("Invalid code point: "+pe);pe<=65535?ee.push(pe):(pe-=65536,le=(pe>>10)+55296,ue=pe%1024+56320,ee.push(le,ue)),(Te+1===_e||ee.length>S)&&(Qe+=d.apply(null,ee),ee.length=0)}return Qe};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:q,configurable:!0,writable:!0}):String.fromCodePoint=q}()})(typeof on>"u"?on.sax={}:on)});var Ka=G($i=>{(function(){"use strict";$i.stripBOM=function(r){return r[0]==="\uFEFF"?r.substring(1):r}}).call($i)});var Hi=G(bt=>{(function(){"use strict";var r;r=new RegExp(/(?!xmlns)^.*:/),bt.normalize=function(e){return e.toLowerCase()},bt.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},bt.stripPrefix=function(e){return e.replace(r,"")},bt.parseNumbers=function(e){return isNaN(e)||(e=e%1===0?parseInt(e,10):parseFloat(e)),e},bt.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e=e.toLowerCase()==="true"),e}}).call(bt)});var Qa=G(tt=>{(function(){"use strict";var r,e,t,n,i,o,a,l,p=function(w,y){return function(){return w.apply(y,arguments)}},g=function(w,y){for(var m in y)P.call(y,m)&&(w[m]=y[m]);function D(){this.constructor=w}return D.prototype=y.prototype,w.prototype=new D,w.__super__=y.prototype,w},P={}.hasOwnProperty;a=Ya(),t=require("events"),r=Ka(),o=Hi(),l=require("timers").setImmediate,e=Xr().defaults,n=function(w){return typeof w=="object"&&w!=null&&Object.keys(w).length===0},i=function(w,y,m){var D,L,A;for(D=0,L=w.length;D<L;D++)A=w[D],y=A(y,m);return y},tt.Parser=function(w){g(y,w);function y(m){this.parseStringPromise=p(this.parseStringPromise,this),this.parseString=p(this.parseString,this),this.reset=p(this.reset,this),this.assignOrPush=p(this.assignOrPush,this),this.processAsync=p(this.processAsync,this);var D,L,A;if(!(this instanceof tt.Parser))return new tt.Parser(m);this.options={},L=e["0.2"];for(D in L)!P.call(L,D)||(A=L[D],this.options[D]=A);for(D in m)!P.call(m,D)||(A=m[D],this.options[D]=A);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return y.prototype.processAsync=function(){var m,D;try{return this.remaining.length<=this.options.chunkSize?(m=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(m),this.saxParser.close()):(m=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(m),l(this.processAsync))}catch(L){if(D=L,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(D)}},y.prototype.assignOrPush=function(m,D,L){return D in m?(m[D]instanceof Array||(m[D]=[m[D]]),m[D].push(L)):this.options.explicitArray?m[D]=[L]:m[D]=L},y.prototype.reset=function(){var m,D,L,A;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(_){return function(j){if(_.saxParser.resume(),!_.saxParser.errThrown)return _.saxParser.errThrown=!0,_.emit("error",j)}}(this),this.saxParser.onend=function(_){return function(){if(!_.saxParser.ended)return _.saxParser.ended=!0,_.emit("end",_.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,A=[],m=this.options.attrkey,D=this.options.charkey,this.saxParser.onopentag=function(_){return function(j){var T,f,c,E,I;if(c={},c[D]="",!_.options.ignoreAttrs){I=j.attributes;for(T in I)!P.call(I,T)||(!(m in c)&&!_.options.mergeAttrs&&(c[m]={}),f=_.options.attrValueProcessors?i(_.options.attrValueProcessors,j.attributes[T],T):j.attributes[T],E=_.options.attrNameProcessors?i(_.options.attrNameProcessors,T):T,_.options.mergeAttrs?_.assignOrPush(c,E,f):c[m][E]=f)}return c["#name"]=_.options.tagNameProcessors?i(_.options.tagNameProcessors,j.name):j.name,_.options.xmlns&&(c[_.options.xmlnskey]={uri:j.uri,local:j.local}),A.push(c)}}(this),this.saxParser.onclosetag=function(_){return function(){var j,T,f,c,E,I,b,M,C,R;if(I=A.pop(),E=I["#name"],(!_.options.explicitChildren||!_.options.preserveChildrenOrder)&&delete I["#name"],I.cdata===!0&&(j=I.cdata,delete I.cdata),C=A[A.length-1],I[D].match(/^\s*$/)&&!j?(T=I[D],delete I[D]):(_.options.trim&&(I[D]=I[D].trim()),_.options.normalize&&(I[D]=I[D].replace(/\s{2,}/g," ").trim()),I[D]=_.options.valueProcessors?i(_.options.valueProcessors,I[D],E):I[D],Object.keys(I).length===1&&D in I&&!_.EXPLICIT_CHARKEY&&(I=I[D])),n(I)&&(I=_.options.emptyTag!==""?_.options.emptyTag:T),_.options.validator!=null&&(R="/"+function(){var B,X,K;for(K=[],B=0,X=A.length;B<X;B++)c=A[B],K.push(c["#name"]);return K}().concat(E).join("/"),function(){var B;try{return I=_.options.validator(R,C&&C[E],I)}catch(X){return B=X,_.emit("error",B)}}()),_.options.explicitChildren&&!_.options.mergeAttrs&&typeof I=="object"){if(!_.options.preserveChildrenOrder)c={},_.options.attrkey in I&&(c[_.options.attrkey]=I[_.options.attrkey],delete I[_.options.attrkey]),!_.options.charsAsChildren&&_.options.charkey in I&&(c[_.options.charkey]=I[_.options.charkey],delete I[_.options.charkey]),Object.getOwnPropertyNames(I).length>0&&(c[_.options.childkey]=I),I=c;else if(C){C[_.options.childkey]=C[_.options.childkey]||[],b={};for(f in I)!P.call(I,f)||(b[f]=I[f]);C[_.options.childkey].push(b),delete I["#name"],Object.keys(I).length===1&&D in I&&!_.EXPLICIT_CHARKEY&&(I=I[D])}}return A.length>0?_.assignOrPush(C,E,I):(_.options.explicitRoot&&(M=I,I={},I[E]=M),_.resultObject=I,_.saxParser.ended=!0,_.emit("end",_.resultObject))}}(this),L=function(_){return function(j){var T,f;if(f=A[A.length-1],f)return f[D]+=j,_.options.explicitChildren&&_.options.preserveChildrenOrder&&_.options.charsAsChildren&&(_.options.includeWhiteChars||j.replace(/\\n/g,"").trim()!=="")&&(f[_.options.childkey]=f[_.options.childkey]||[],T={"#name":"__text__"},T[D]=j,_.options.normalize&&(T[D]=T[D].replace(/\s{2,}/g," ").trim()),f[_.options.childkey].push(T)),f}}(this),this.saxParser.ontext=L,this.saxParser.oncdata=function(_){return function(j){var T;if(T=L(j),T)return T.cdata=!0}}(this)},y.prototype.parseString=function(m,D){var L;D!=null&&typeof D=="function"&&(this.on("end",function(A){return this.reset(),D(null,A)}),this.on("error",function(A){return this.reset(),D(A)}));try{return m=m.toString(),m.trim()===""?(this.emit("end",null),!0):(m=r.stripBOM(m),this.options.async?(this.remaining=m,l(this.processAsync),this.saxParser):this.saxParser.write(m).close())}catch(A){if(L=A,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw L}else return this.emit("error",L),this.saxParser.errThrown=!0}},y.prototype.parseStringPromise=function(m){return new Promise(function(D){return function(L,A){return D.parseString(m,function(_,j){return _?A(_):L(j)})}}(this))},y}(t),tt.parseString=function(w,y,m){var D,L,A;return m!=null?(typeof m=="function"&&(D=m),typeof y=="object"&&(L=y)):(typeof y=="function"&&(D=y),L={}),A=new tt.Parser(L),A.parseString(w,D)},tt.parseStringPromise=function(w,y){var m,D;return typeof y=="object"&&(m=y),D=new tt.Parser(m),D.parseStringPromise(w)}}).call(tt)});var Za=G(rt=>{(function(){"use strict";var r,e,t,n,i=function(a,l){for(var p in l)o.call(l,p)&&(a[p]=l[p]);function g(){this.constructor=a}return g.prototype=l.prototype,a.prototype=new g,a.__super__=l.prototype,a},o={}.hasOwnProperty;e=Xr(),r=za(),t=Qa(),n=Hi(),rt.defaults=e.defaults,rt.processors=n,rt.ValidationError=function(a){i(l,a);function l(p){this.message=p}return l}(Error),rt.Builder=r.Builder,rt.Parser=t.Parser,rt.parseString=t.parseString,rt.parseStringPromise=t.parseStringPromise}).call(rt)});var ru=G((dn,Ye)=>{(function(r,e){typeof dn=="object"&&typeof Ye<"u"?e(dn):typeof define=="function"&&define.amd?define(["exports"],e):e(r.async=r.async||{})})(dn,function(r){"use strict";function e(s,h){h=h|0;for(var v=Math.max(s.length-h,0),O=Array(v),x=0;x<v;x++)O[x]=s[h+x];return O}var t=function(s){var h=e(arguments,1);return function(){var v=e(arguments);return s.apply(null,h.concat(v))}},n=function(s){return function(){var h=e(arguments),v=h.pop();s.call(this,h,v)}};function i(s){var h=typeof s;return s!=null&&(h=="object"||h=="function")}var o=typeof setImmediate=="function"&&setImmediate,a=typeof process=="object"&&typeof process.nextTick=="function";function l(s){setTimeout(s,0)}function p(s){return function(h){var v=e(arguments,1);s(function(){h.apply(null,v)})}}var g;o?g=setImmediate:a?g=process.nextTick:g=l;var P=p(g);function w(s){return n(function(h,v){var O;try{O=s.apply(this,h)}catch(x){return v(x)}i(O)&&typeof O.then=="function"?O.then(function(x){y(v,null,x)},function(x){y(v,x.message?x:new Error(x))}):v(null,O)})}function y(s,h,v){try{s(h,v)}catch(O){P(m,O)}}function m(s){throw s}var D=typeof Symbol=="function";function L(s){return D&&s[Symbol.toStringTag]==="AsyncFunction"}function A(s){return L(s)?w(s):s}function _(s){return function(h){var v=e(arguments,1),O=n(function(x,N){var F=this;return s(h,function(k,V){A(k).apply(F,x.concat(V))},N)});return v.length?O.apply(this,v):O}}var j=typeof global=="object"&&global&&global.Object===Object&&global,T=typeof self=="object"&&self&&self.Object===Object&&self,f=j||T||Function("return this")(),c=f.Symbol,E=Object.prototype,I=E.hasOwnProperty,b=E.toString,M=c?c.toStringTag:void 0;function C(s){var h=I.call(s,M),v=s[M];try{s[M]=void 0;var O=!0}catch{}var x=b.call(s);return O&&(h?s[M]=v:delete s[M]),x}var R=Object.prototype,B=R.toString;function X(s){return B.call(s)}var K="[object Null]",J="[object Undefined]",H=c?c.toStringTag:void 0;function oe(s){return s==null?s===void 0?J:K:H&&H in Object(s)?C(s):X(s)}var Q="[object AsyncFunction]",Ke="[object Function]",Se="[object GeneratorFunction]",kt="[object Proxy]";function Fn(s){if(!i(s))return!1;var h=oe(s);return h==Ke||h==Se||h==Q||h==kt}var sr=9007199254740991;function Bt(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=sr}function pt(s){return s!=null&&Bt(s.length)&&!Fn(s)}var d={};function u(){}function q(s){return function(){if(s!==null){var h=s;s=null,h.apply(this,arguments)}}}var S=typeof Symbol=="function"&&Symbol.iterator,ee=function(s){return S&&s[S]&&s[S]()};function le(s,h){for(var v=-1,O=Array(s);++v<s;)O[v]=h(v);return O}function ue(s){return s!=null&&typeof s=="object"}var Te="[object Arguments]";function _e(s){return ue(s)&&oe(s)==Te}var Qe=Object.prototype,pe=Qe.hasOwnProperty,Be=Qe.propertyIsEnumerable,qn=_e(function(){return arguments}())?_e:function(s){return ue(s)&&pe.call(s,"callee")&&!Be.call(s,"callee")},Oe=Array.isArray;function jt(){return!1}var Vt=typeof r=="object"&&r&&!r.nodeType&&r,to=Vt&&typeof Ye=="object"&&Ye&&!Ye.nodeType&&Ye,xu=to&&to.exports===Vt,ro=xu?f.Buffer:void 0,Ru=ro?ro.isBuffer:void 0,Mu=Ru||jt,Fu=9007199254740991,qu=/^(?:0|[1-9]\d*)$/;function ku(s,h){var v=typeof s;return h=h??Fu,!!h&&(v=="number"||v!="symbol"&&qu.test(s))&&s>-1&&s%1==0&&s<h}var Bu="[object Arguments]",ju="[object Array]",Vu="[object Boolean]",Uu="[object Date]",Xu="[object Error]",$u="[object Function]",Hu="[object Map]",Gu="[object Number]",Wu="[object Object]",zu="[object RegExp]",Yu="[object Set]",Ku="[object String]",Qu="[object WeakMap]",Zu="[object ArrayBuffer]",Ju="[object DataView]",ec="[object Float32Array]",tc="[object Float64Array]",rc="[object Int8Array]",nc="[object Int16Array]",ic="[object Int32Array]",oc="[object Uint8Array]",sc="[object Uint8ClampedArray]",ac="[object Uint16Array]",uc="[object Uint32Array]",ne={};ne[ec]=ne[tc]=ne[rc]=ne[nc]=ne[ic]=ne[oc]=ne[sc]=ne[ac]=ne[uc]=!0,ne[Bu]=ne[ju]=ne[Zu]=ne[Vu]=ne[Ju]=ne[Uu]=ne[Xu]=ne[$u]=ne[Hu]=ne[Gu]=ne[Wu]=ne[zu]=ne[Yu]=ne[Ku]=ne[Qu]=!1;function cc(s){return ue(s)&&Bt(s.length)&&!!ne[oe(s)]}function lc(s){return function(h){return s(h)}}var no=typeof r=="object"&&r&&!r.nodeType&&r,Ut=no&&typeof Ye=="object"&&Ye&&!Ye.nodeType&&Ye,fc=Ut&&Ut.exports===no,kn=fc&&j.process,io=function(){try{var s=Ut&&Ut.require&&Ut.require("util").types;return s||kn&&kn.binding&&kn.binding("util")}catch{}}(),oo=io&&io.isTypedArray,hc=oo?lc(oo):cc,pc=Object.prototype,dc=pc.hasOwnProperty;function mc(s,h){var v=Oe(s),O=!v&&qn(s),x=!v&&!O&&Mu(s),N=!v&&!O&&!x&&hc(s),F=v||O||x||N,k=F?le(s.length,String):[],V=k.length;for(var W in s)(h||dc.call(s,W))&&!(F&&(W=="length"||x&&(W=="offset"||W=="parent")||N&&(W=="buffer"||W=="byteLength"||W=="byteOffset")||ku(W,V)))&&k.push(W);return k}var gc=Object.prototype;function yc(s){var h=s&&s.constructor,v=typeof h=="function"&&h.prototype||gc;return s===v}function vc(s,h){return function(v){return s(h(v))}}var bc=vc(Object.keys,Object),wc=Object.prototype,Tc=wc.hasOwnProperty;function Ec(s){if(!yc(s))return bc(s);var h=[];for(var v in Object(s))Tc.call(s,v)&&v!="constructor"&&h.push(v);return h}function Bn(s){return pt(s)?mc(s):Ec(s)}function Dc(s){var h=-1,v=s.length;return function(){return++h<v?{value:s[h],key:h}:null}}function Cc(s){var h=-1;return function(){var O=s.next();return O.done?null:(h++,{value:O.value,key:h})}}function Pc(s){var h=Bn(s),v=-1,O=h.length;return function x(){var N=h[++v];return N==="__proto__"?x():v<O?{value:s[N],key:N}:null}}function Oc(s){if(pt(s))return Dc(s);var h=ee(s);return h?Cc(h):Pc(s)}function Xe(s){return function(){if(s===null)throw new Error("Callback was already called.");var h=s;s=null,h.apply(this,arguments)}}function ar(s){return function(h,v,O){if(O=q(O||u),s<=0||!h)return O(null);var x=Oc(h),N=!1,F=0,k=!1;function V(U,Y){if(F-=1,U)N=!0,O(U);else{if(Y===d||N&&F<=0)return N=!0,O(null);k||W()}}function W(){for(k=!0;F<s&&!N;){var U=x();if(U===null){N=!0,F<=0&&O(null);return}F+=1,v(U.value,U.key,Xe(V))}k=!1}W()}}function dt(s,h,v,O){ar(h)(s,A(v),O)}function be(s,h){return function(v,O,x){return s(v,h,O,x)}}function Ic(s,h,v){v=q(v||u);var O=0,x=0,N=s.length;N===0&&v(null);function F(k,V){k?v(k):(++x===N||V===d)&&v(null)}for(;O<N;O++)h(s[O],O,Xe(F))}var Sc=be(dt,1/0),it=function(s,h,v){var O=pt(s)?Ic:Sc;O(s,A(h),v)};function Et(s){return function(h,v,O){return s(it,h,A(v),O)}}function so(s,h,v,O){O=O||u,h=h||[];var x=[],N=0,F=A(v);s(h,function(k,V,W){var U=N++;F(k,function(Y,ie){x[U]=ie,W(Y)})},function(k){O(k,x)})}var ur=Et(so),ao=_(ur);function Dt(s){return function(h,v,O,x){return s(ar(v),h,A(O),x)}}var Ct=Dt(so),jn=be(Ct,1),uo=_(jn);function cr(s,h){for(var v=-1,O=s==null?0:s.length;++v<O&&h(s[v],v,s)!==!1;);return s}function _c(s){return function(h,v,O){for(var x=-1,N=Object(h),F=O(h),k=F.length;k--;){var V=F[s?k:++x];if(v(N[V],V,N)===!1)break}return h}}var Lc=_c();function Xt(s,h){return s&&Lc(s,h,Bn)}function Ac(s,h,v,O){for(var x=s.length,N=v+(O?1:-1);O?N--:++N<x;)if(h(s[N],N,s))return N;return-1}function Nc(s){return s!==s}function xc(s,h,v){for(var O=v-1,x=s.length;++O<x;)if(s[O]===h)return O;return-1}function lr(s,h,v){return h===h?xc(s,h,v):Ac(s,Nc,v)}var Vn=function(s,h,v){typeof h=="function"&&(v=h,h=null),v=q(v||u);var O=Bn(s),x=O.length;if(!x)return v(null);h||(h=x);var N={},F=0,k=!1,V=Object.create(null),W=[],U=[],Y={};Xt(s,function(se,ce){if(!Oe(se)){ie(ce,[se]),U.push(ce);return}var ge=se.slice(0,se.length-1),Ze=ge.length;if(Ze===0){ie(ce,se),U.push(ce);return}Y[ce]=Ze,cr(ge,function(St){if(!s[St])throw new Error("async.auto task `"+ce+"` has a non-existent dependency `"+St+"` in "+ge.join(", "));$e(St,function(){Ze--,Ze===0&&ie(ce,se)})})}),Pl(),Ee();function ie(se,ce){W.push(function(){He(se,ce)})}function Ee(){if(W.length===0&&F===0)return v(null,N);for(;W.length&&F<h;){var se=W.shift();se()}}function $e(se,ce){var ge=V[se];ge||(ge=V[se]=[]),ge.push(ce)}function Re(se){var ce=V[se]||[];cr(ce,function(ge){ge()}),Ee()}function He(se,ce){if(!k){var ge=Xe(function(St,Jn){if(F--,arguments.length>2&&(Jn=e(arguments,1)),St){var ei={};Xt(N,function(Il,Sl){ei[Sl]=Il}),ei[se]=Jn,k=!0,V=Object.create(null),v(St,ei)}else N[se]=Jn,Re(se)});F++;var Ze=A(ce[ce.length-1]);ce.length>1?Ze(N,ge):Ze(ge)}}function Pl(){for(var se,ce=0;U.length;)se=U.pop(),ce++,cr(Ol(se),function(ge){--Y[ge]===0&&U.push(ge)});if(ce!==x)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function Ol(se){var ce=[];return Xt(s,function(ge,Ze){Oe(ge)&&lr(ge,se,0)>=0&&ce.push(Ze)}),ce}};function Pt(s,h){for(var v=-1,O=s==null?0:s.length,x=Array(O);++v<O;)x[v]=h(s[v],v,s);return x}var Rc="[object Symbol]";function Mc(s){return typeof s=="symbol"||ue(s)&&oe(s)==Rc}var Fc=1/0,co=c?c.prototype:void 0,lo=co?co.toString:void 0;function Un(s){if(typeof s=="string")return s;if(Oe(s))return Pt(s,Un)+"";if(Mc(s))return lo?lo.call(s):"";var h=s+"";return h=="0"&&1/s==-Fc?"-0":h}function qc(s,h,v){var O=-1,x=s.length;h<0&&(h=-h>x?0:x+h),v=v>x?x:v,v<0&&(v+=x),x=h>v?0:v-h>>>0,h>>>=0;for(var N=Array(x);++O<x;)N[O]=s[O+h];return N}function kc(s,h,v){var O=s.length;return v=v===void 0?O:v,!h&&v>=O?s:qc(s,h,v)}function Bc(s,h){for(var v=s.length;v--&&lr(h,s[v],0)>-1;);return v}function jc(s,h){for(var v=-1,O=s.length;++v<O&&lr(h,s[v],0)>-1;);return v}function Vc(s){return s.split("")}var Uc="\\ud800-\\udfff",Xc="\\u0300-\\u036f",$c="\\ufe20-\\ufe2f",Hc="\\u20d0-\\u20ff",Gc=Xc+$c+Hc,Wc="\\ufe0e\\ufe0f",zc="\\u200d",Yc=RegExp("["+zc+Uc+Gc+Wc+"]");function Kc(s){return Yc.test(s)}var fo="\\ud800-\\udfff",Qc="\\u0300-\\u036f",Zc="\\ufe20-\\ufe2f",Jc="\\u20d0-\\u20ff",el=Qc+Zc+Jc,tl="\\ufe0e\\ufe0f",rl="["+fo+"]",Xn="["+el+"]",$n="\\ud83c[\\udffb-\\udfff]",nl="(?:"+Xn+"|"+$n+")",ho="[^"+fo+"]",po="(?:\\ud83c[\\udde6-\\uddff]){2}",mo="[\\ud800-\\udbff][\\udc00-\\udfff]",il="\\u200d",go=nl+"?",yo="["+tl+"]?",ol="(?:"+il+"(?:"+[ho,po,mo].join("|")+")"+yo+go+")*",sl=yo+go+ol,al="(?:"+[ho+Xn+"?",Xn,po,mo,rl].join("|")+")",ul=RegExp($n+"(?="+$n+")|"+al+sl,"g");function cl(s){return s.match(ul)||[]}function vo(s){return Kc(s)?cl(s):Vc(s)}function ll(s){return s==null?"":Un(s)}var fl=/^\s+|\s+$/g;function hl(s,h,v){if(s=ll(s),s&&(v||h===void 0))return s.replace(fl,"");if(!s||!(h=Un(h)))return s;var O=vo(s),x=vo(h),N=jc(O,x),F=Bc(O,x)+1;return kc(O,N,F).join("")}var pl=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,dl=/,/,ml=/(=.+)?(\s*)$/,gl=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;function yl(s){return s=s.toString().replace(gl,""),s=s.match(pl)[2].replace(" ",""),s=s?s.split(dl):[],s=s.map(function(h){return hl(h.replace(ml,""))}),s}function bo(s,h){var v={};Xt(s,function(O,x){var N,F=L(O),k=!F&&O.length===1||F&&O.length===0;if(Oe(O))N=O.slice(0,-1),O=O[O.length-1],v[x]=N.concat(N.length>0?V:O);else if(k)v[x]=O;else{if(N=yl(O),O.length===0&&!F&&N.length===0)throw new Error("autoInject task functions require explicit parameters.");F||N.pop(),v[x]=N.concat(V)}function V(W,U){var Y=Pt(N,function(ie){return W[ie]});Y.push(U),A(O).apply(null,Y)}}),Vn(v,h)}function je(){this.head=this.tail=null,this.length=0}function wo(s,h){s.length=1,s.head=s.tail=h}je.prototype.removeLink=function(s){return s.prev?s.prev.next=s.next:this.head=s.next,s.next?s.next.prev=s.prev:this.tail=s.prev,s.prev=s.next=null,this.length-=1,s},je.prototype.empty=function(){for(;this.head;)this.shift();return this},je.prototype.insertAfter=function(s,h){h.prev=s,h.next=s.next,s.next?s.next.prev=h:this.tail=h,s.next=h,this.length+=1},je.prototype.insertBefore=function(s,h){h.prev=s.prev,h.next=s,s.prev?s.prev.next=h:this.head=h,s.prev=h,this.length+=1},je.prototype.unshift=function(s){this.head?this.insertBefore(this.head,s):wo(this,s)},je.prototype.push=function(s){this.tail?this.insertAfter(this.tail,s):wo(this,s)},je.prototype.shift=function(){return this.head&&this.removeLink(this.head)},je.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},je.prototype.toArray=function(){for(var s=Array(this.length),h=this.head,v=0;v<this.length;v++)s[v]=h.data,h=h.next;return s},je.prototype.remove=function(s){for(var h=this.head;h;){var v=h.next;s(h)&&this.removeLink(h),h=v}return this};function To(s,h,v){if(h==null)h=1;else if(h===0)throw new Error("Concurrency must not be zero");var O=A(s),x=0,N=[],F=!1;function k(Y,ie,Ee){if(Ee!=null&&typeof Ee!="function")throw new Error("task callback must be a function");if(U.started=!0,Oe(Y)||(Y=[Y]),Y.length===0&&U.idle())return P(function(){U.drain()});for(var $e=0,Re=Y.length;$e<Re;$e++){var He={data:Y[$e],callback:Ee||u};ie?U._tasks.unshift(He):U._tasks.push(He)}F||(F=!0,P(function(){F=!1,U.process()}))}function V(Y){return function(ie){x-=1;for(var Ee=0,$e=Y.length;Ee<$e;Ee++){var Re=Y[Ee],He=lr(N,Re,0);He===0?N.shift():He>0&&N.splice(He,1),Re.callback.apply(Re,arguments),ie!=null&&U.error(ie,Re.data)}x<=U.concurrency-U.buffer&&U.unsaturated(),U.idle()&&U.drain(),U.process()}}var W=!1,U={_tasks:new je,concurrency:h,payload:v,saturated:u,unsaturated:u,buffer:h/4,empty:u,drain:u,error:u,started:!1,paused:!1,push:function(Y,ie){k(Y,!1,ie)},kill:function(){U.drain=u,U._tasks.empty()},unshift:function(Y,ie){k(Y,!0,ie)},remove:function(Y){U._tasks.remove(Y)},process:function(){if(!W){for(W=!0;!U.paused&&x<U.concurrency&&U._tasks.length;){var Y=[],ie=[],Ee=U._tasks.length;U.payload&&(Ee=Math.min(Ee,U.payload));for(var $e=0;$e<Ee;$e++){var Re=U._tasks.shift();Y.push(Re),N.push(Re),ie.push(Re.data)}x+=1,U._tasks.length===0&&U.empty(),x===U.concurrency&&U.saturated();var He=Xe(V(Y));O(ie,He)}W=!1}},length:function(){return U._tasks.length},running:function(){return x},workersList:function(){return N},idle:function(){return U._tasks.length+x===0},pause:function(){U.paused=!0},resume:function(){U.paused!==!1&&(U.paused=!1,P(U.process))}};return U}function Eo(s,h){return To(s,1,h)}var Ot=be(dt,1);function ot(s,h,v,O){O=q(O||u);var x=A(v);Ot(s,function(N,F,k){x(h,N,function(V,W){h=W,k(V)})},function(N){O(N,h)})}function Hn(){var s=Pt(arguments,A);return function(){var h=e(arguments),v=this,O=h[h.length-1];typeof O=="function"?h.pop():O=u,ot(s,h,function(x,N,F){N.apply(v,x.concat(function(k){var V=e(arguments,1);F(k,V)}))},function(x,N){O.apply(v,[x].concat(N))})}}var Do=function(){return Hn.apply(null,e(arguments).reverse())},vl=Array.prototype.concat,fr=function(s,h,v,O){O=O||u;var x=A(v);Ct(s,h,function(N,F){x(N,function(k){return k?F(k):F(null,e(arguments,1))})},function(N,F){for(var k=[],V=0;V<F.length;V++)F[V]&&(k=vl.apply(k,F[V]));return O(N,k)})},Co=be(fr,1/0),Po=be(fr,1),Oo=function(){var s=e(arguments),h=[null].concat(s);return function(){var v=arguments[arguments.length-1];return v.apply(this,h)}};function $t(s){return s}function It(s,h){return function(v,O,x,N){N=N||u;var F=!1,k;v(O,function(V,W,U){x(V,function(Y,ie){Y?U(Y):s(ie)&&!k?(F=!0,k=h(!0,V),U(null,d)):U()})},function(V){V?N(V):N(null,F?k:h(!1))})}}function Io(s,h){return h}var hr=Et(It($t,Io)),Ht=Dt(It($t,Io)),pr=be(Ht,1);function So(s){return function(h){var v=e(arguments,1);v.push(function(O){var x=e(arguments,1);typeof console=="object"&&(O?console.error&&console.error(O):console[s]&&cr(x,function(N){console[s](N)}))}),A(h).apply(null,v)}}var _o=So("dir");function Lo(s,h,v){v=Xe(v||u);var O=A(s),x=A(h);function N(k){if(k)return v(k);var V=e(arguments,1);V.push(F),x.apply(this,V)}function F(k,V){if(k)return v(k);if(!V)return v(null);O(N)}F(null,!0)}function Gn(s,h,v){v=Xe(v||u);var O=A(s),x=function(N){if(N)return v(N);var F=e(arguments,1);if(h.apply(this,F))return O(x);v.apply(null,[null].concat(F))};O(x)}function Ao(s,h,v){Gn(s,function(){return!h.apply(this,arguments)},v)}function No(s,h,v){v=Xe(v||u);var O=A(h),x=A(s);function N(k){if(k)return v(k);x(F)}function F(k,V){if(k)return v(k);if(!V)return v(null);O(N)}x(F)}function xo(s){return function(h,v,O){return s(h,O)}}function dr(s,h,v){it(s,xo(A(h)),v)}function Gt(s,h,v,O){ar(h)(s,xo(A(v)),O)}var Wt=be(Gt,1);function Wn(s){return L(s)?s:n(function(h,v){var O=!0;h.push(function(){var x=arguments;O?P(function(){v.apply(null,x)}):v.apply(null,x)}),s.apply(this,h),O=!1})}function mr(s){return!s}var gr=Et(It(mr,mr)),zt=Dt(It(mr,mr)),yr=be(zt,1);function Ro(s){return function(h){return h?.[s]}}function bl(s,h,v,O){var x=new Array(h.length);s(h,function(N,F,k){v(N,function(V,W){x[F]=!!W,k(V)})},function(N){if(N)return O(N);for(var F=[],k=0;k<h.length;k++)x[k]&&F.push(h[k]);O(null,F)})}function wl(s,h,v,O){var x=[];s(h,function(N,F,k){v(N,function(V,W){V?k(V):(W&&x.push({index:F,value:N}),k())})},function(N){N?O(N):O(null,Pt(x.sort(function(F,k){return F.index-k.index}),Ro("value")))})}function zn(s,h,v,O){var x=pt(h)?bl:wl;x(s,h,A(v),O||u)}var vr=Et(zn),Yt=Dt(zn),br=be(Yt,1);function Mo(s,h){var v=Xe(h||u),O=A(Wn(s));function x(N){if(N)return v(N);O(x)}x()}var wr=function(s,h,v,O){O=O||u;var x=A(v);Ct(s,h,function(N,F){x(N,function(k,V){return k?F(k):F(null,{key:V,val:N})})},function(N,F){for(var k={},V=Object.prototype.hasOwnProperty,W=0;W<F.length;W++)if(F[W]){var U=F[W].key,Y=F[W].val;V.call(k,U)?k[U].push(Y):k[U]=[Y]}return O(N,k)})},Fo=be(wr,1/0),qo=be(wr,1),ko=So("log");function Tr(s,h,v,O){O=q(O||u);var x={},N=A(v);dt(s,h,function(F,k,V){N(F,k,function(W,U){if(W)return V(W);x[k]=U,V()})},function(F){O(F,x)})}var Bo=be(Tr,1/0),jo=be(Tr,1);function Vo(s,h){return h in s}function Uo(s,h){var v=Object.create(null),O=Object.create(null);h=h||$t;var x=A(s),N=n(function(k,V){var W=h.apply(null,k);Vo(v,W)?P(function(){V.apply(null,v[W])}):Vo(O,W)?O[W].push(V):(O[W]=[V],x.apply(null,k.concat(function(){var U=e(arguments);v[W]=U;var Y=O[W];delete O[W];for(var ie=0,Ee=Y.length;ie<Ee;ie++)Y[ie].apply(null,U)})))});return N.memo=v,N.unmemoized=s,N}var Er;a?Er=process.nextTick:o?Er=setImmediate:Er=l;var Xo=p(Er);function Yn(s,h,v){v=v||u;var O=pt(h)?[]:{};s(h,function(x,N,F){A(x)(function(k,V){arguments.length>2&&(V=e(arguments,1)),O[N]=V,F(k)})},function(x){v(x,O)})}function $o(s,h){Yn(it,s,h)}function Ho(s,h,v){Yn(ar(h),s,v)}var Kn=function(s,h){var v=A(s);return To(function(O,x){v(O[0],x)},h,1)},Go=function(s,h){var v=Kn(s,h);return v.push=function(O,x,N){if(N==null&&(N=u),typeof N!="function")throw new Error("task callback must be a function");if(v.started=!0,Oe(O)||(O=[O]),O.length===0)return P(function(){v.drain()});x=x||0;for(var F=v._tasks.head;F&&x>=F.priority;)F=F.next;for(var k=0,V=O.length;k<V;k++){var W={data:O[k],priority:x,callback:N};F?v._tasks.insertBefore(F,W):v._tasks.push(W)}P(v.process)},delete v.unshift,v};function Wo(s,h){if(h=q(h||u),!Oe(s))return h(new TypeError("First argument to race must be an array of functions"));if(!s.length)return h();for(var v=0,O=s.length;v<O;v++)A(s[v])(h)}function Dr(s,h,v,O){var x=e(s).reverse();ot(x,h,v,O)}function Cr(s){var h=A(s);return n(function(O,x){return O.push(function(F,k){if(F)x(null,{error:F});else{var V;arguments.length<=2?V=k:V=e(arguments,1),x(null,{value:V})}}),h.apply(this,O)})}function zo(s){var h;return Oe(s)?h=Pt(s,Cr):(h={},Xt(s,function(v,O){h[O]=Cr.call(this,v)})),h}function Yo(s,h,v,O){zn(s,h,function(x,N){v(x,function(F,k){N(F,!k)})},O)}var Ko=Et(Yo),Qn=Dt(Yo),Qo=be(Qn,1);function Zo(s){return function(){return s}}function Pr(s,h,v){var O=5,x=0,N={times:O,intervalFunc:Zo(x)};function F(U,Y){if(typeof Y=="object")U.times=+Y.times||O,U.intervalFunc=typeof Y.interval=="function"?Y.interval:Zo(+Y.interval||x),U.errorFilter=Y.errorFilter;else if(typeof Y=="number"||typeof Y=="string")U.times=+Y||O;else throw new Error("Invalid arguments for async.retry")}if(arguments.length<3&&typeof s=="function"?(v=h||u,h=s):(F(N,s),v=v||u),typeof h!="function")throw new Error("Invalid arguments for async.retry");var k=A(h),V=1;function W(){k(function(U){U&&V++<N.times&&(typeof N.errorFilter!="function"||N.errorFilter(U))?setTimeout(W,N.intervalFunc(V)):v.apply(null,arguments)})}W()}var Jo=function(s,h){h||(h=s,s=null);var v=A(h);return n(function(O,x){function N(F){v.apply(null,O.concat(F))}s?Pr(s,N,x):Pr(N,x)})};function es(s,h){Yn(Ot,s,h)}var Or=Et(It(Boolean,$t)),Kt=Dt(It(Boolean,$t)),Ir=be(Kt,1);function ts(s,h,v){var O=A(h);ur(s,function(N,F){O(N,function(k,V){if(k)return F(k);F(null,{value:N,criteria:V})})},function(N,F){if(N)return v(N);v(null,Pt(F.sort(x),Ro("value")))});function x(N,F){var k=N.criteria,V=F.criteria;return k<V?-1:k>V?1:0}}function rs(s,h,v){var O=A(s);return n(function(x,N){var F=!1,k;function V(){var W=s.name||"anonymous",U=new Error('Callback function "'+W+'" timed out.');U.code="ETIMEDOUT",v&&(U.info=v),F=!0,N(U)}x.push(function(){F||(N.apply(null,arguments),clearTimeout(k))}),k=setTimeout(V,h),O.apply(null,x)})}var Tl=Math.ceil,El=Math.max;function Dl(s,h,v,O){for(var x=-1,N=El(Tl((h-s)/(v||1)),0),F=Array(N);N--;)F[O?N:++x]=s,s+=v;return F}function Sr(s,h,v,O){var x=A(v);Ct(Dl(0,s,1),h,x,O)}var ns=be(Sr,1/0),is=be(Sr,1);function os(s,h,v,O){arguments.length<=3&&(O=v,v=h,h=Oe(s)?[]:{}),O=q(O||u);var x=A(v);it(s,function(N,F,k){x(h,N,F,k)},function(N){O(N,h)})}function ss(s,h){var v=null,O;h=h||u,Wt(s,function(x,N){A(x)(function(F,k){arguments.length>2?O=e(arguments,1):O=k,v=F,N(!F)})},function(){h(v,O)})}function as(s){return function(){return(s.unmemoized||s).apply(null,arguments)}}function Zn(s,h,v){v=Xe(v||u);var O=A(h);if(!s())return v(null);var x=function(N){if(N)return v(N);if(s())return O(x);var F=e(arguments,1);v.apply(null,[null].concat(F))};O(x)}function us(s,h,v){Zn(function(){return!s.apply(this,arguments)},h,v)}var cs=function(s,h){if(h=q(h||u),!Oe(s))return h(new Error("First argument to waterfall must be an array of functions"));if(!s.length)return h();var v=0;function O(N){var F=A(s[v++]);N.push(Xe(x)),F.apply(null,N)}function x(N){if(N||v===s.length)return h.apply(null,arguments);O(e(arguments,1))}O([])},Cl={apply:t,applyEach:ao,applyEachSeries:uo,asyncify:w,auto:Vn,autoInject:bo,cargo:Eo,compose:Do,concat:Co,concatLimit:fr,concatSeries:Po,constant:Oo,detect:hr,detectLimit:Ht,detectSeries:pr,dir:_o,doDuring:Lo,doUntil:Ao,doWhilst:Gn,during:No,each:dr,eachLimit:Gt,eachOf:it,eachOfLimit:dt,eachOfSeries:Ot,eachSeries:Wt,ensureAsync:Wn,every:gr,everyLimit:zt,everySeries:yr,filter:vr,filterLimit:Yt,filterSeries:br,forever:Mo,groupBy:Fo,groupByLimit:wr,groupBySeries:qo,log:ko,map:ur,mapLimit:Ct,mapSeries:jn,mapValues:Bo,mapValuesLimit:Tr,mapValuesSeries:jo,memoize:Uo,nextTick:Xo,parallel:$o,parallelLimit:Ho,priorityQueue:Go,queue:Kn,race:Wo,reduce:ot,reduceRight:Dr,reflect:Cr,reflectAll:zo,reject:Ko,rejectLimit:Qn,rejectSeries:Qo,retry:Pr,retryable:Jo,seq:Hn,series:es,setImmediate:P,some:Or,someLimit:Kt,someSeries:Ir,sortBy:ts,timeout:rs,times:ns,timesLimit:Sr,timesSeries:is,transform:os,tryEach:ss,unmemoize:as,until:us,waterfall:cs,whilst:Zn,all:gr,allLimit:zt,allSeries:yr,any:Or,anyLimit:Kt,anySeries:Ir,find:hr,findLimit:Ht,findSeries:pr,forEach:dr,forEachSeries:Wt,forEachLimit:Gt,forEachOf:it,forEachOfSeries:Ot,forEachOfLimit:dt,inject:ot,foldl:ot,foldr:Dr,select:vr,selectLimit:Yt,selectSeries:br,wrapSync:w};r.default=Cl,r.apply=t,r.applyEach=ao,r.applyEachSeries=uo,r.asyncify=w,r.auto=Vn,r.autoInject=bo,r.cargo=Eo,r.compose=Do,r.concat=Co,r.concatLimit=fr,r.concatSeries=Po,r.constant=Oo,r.detect=hr,r.detectLimit=Ht,r.detectSeries=pr,r.dir=_o,r.doDuring=Lo,r.doUntil=Ao,r.doWhilst=Gn,r.during=No,r.each=dr,r.eachLimit=Gt,r.eachOf=it,r.eachOfLimit=dt,r.eachOfSeries=Ot,r.eachSeries=Wt,r.ensureAsync=Wn,r.every=gr,r.everyLimit=zt,r.everySeries=yr,r.filter=vr,r.filterLimit=Yt,r.filterSeries=br,r.forever=Mo,r.groupBy=Fo,r.groupByLimit=wr,r.groupBySeries=qo,r.log=ko,r.map=ur,r.mapLimit=Ct,r.mapSeries=jn,r.mapValues=Bo,r.mapValuesLimit=Tr,r.mapValuesSeries=jo,r.memoize=Uo,r.nextTick=Xo,r.parallel=$o,r.parallelLimit=Ho,r.priorityQueue=Go,r.queue=Kn,r.race=Wo,r.reduce=ot,r.reduceRight=Dr,r.reflect=Cr,r.reflectAll=zo,r.reject=Ko,r.rejectLimit=Qn,r.rejectSeries=Qo,r.retry=Pr,r.retryable=Jo,r.seq=Hn,r.series=es,r.setImmediate=P,r.some=Or,r.someLimit=Kt,r.someSeries=Ir,r.sortBy=ts,r.timeout=rs,r.times=ns,r.timesLimit=Sr,r.timesSeries=is,r.transform=os,r.tryEach=ss,r.unmemoize=as,r.until=us,r.waterfall=cs,r.whilst=Zn,r.all=gr,r.allLimit=zt,r.allSeries=yr,r.any=Or,r.anyLimit=Kt,r.anySeries=Ir,r.find=hr,r.findLimit=Ht,r.findSeries=pr,r.forEach=dr,r.forEachSeries=Wt,r.forEachLimit=Gt,r.forEachOf=it,r.forEachOfSeries=Ot,r.forEachOfLimit=dt,r.inject=ot,r.foldl=ot,r.foldr=Dr,r.select=vr,r.selectLimit=Yt,r.selectSeries=br,r.wrapSync=w,Object.defineProperty(r,"__esModule",{value:!0})})});var iu=G((Ph,nu)=>{var Rt=1e3,Mt=Rt*60,Ft=Mt*60,Tt=Ft*24,tf=Tt*7,rf=Tt*365.25;nu.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return nf(r);if(t==="number"&&isFinite(r))return e.long?sf(r):of(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function nf(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*rf;case"weeks":case"week":case"w":return t*tf;case"days":case"day":case"d":return t*Tt;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ft;case"minutes":case"minute":case"mins":case"min":case"m":return t*Mt;case"seconds":case"second":case"secs":case"sec":case"s":return t*Rt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function of(r){var e=Math.abs(r);return e>=Tt?Math.round(r/Tt)+"d":e>=Ft?Math.round(r/Ft)+"h":e>=Mt?Math.round(r/Mt)+"m":e>=Rt?Math.round(r/Rt)+"s":r+"ms"}function sf(r){var e=Math.abs(r);return e>=Tt?mn(r,e,Tt,"day"):e>=Ft?mn(r,e,Ft,"hour"):e>=Mt?mn(r,e,Mt,"minute"):e>=Rt?mn(r,e,Rt,"second"):r+" ms"}function mn(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Gi=G((Oh,ou)=>{"use strict";function af(r){t.debug=t,t.default=t,t.coerce=p,t.disable=a,t.enable=o,t.enabled=l,t.humanize=iu(),Object.keys(r).forEach(function(g){t[g]=r[g]}),t.instances=[],t.names=[],t.skips=[],t.formatters={};function e(g){for(var P=0,w=0;w<g.length;w++)P=(P<<5)-P+g.charCodeAt(w),P|=0;return t.colors[Math.abs(P)%t.colors.length]}t.selectColor=e;function t(g){var P;function w(){if(!!w.enabled){for(var y=arguments.length,m=new Array(y),D=0;D<y;D++)m[D]=arguments[D];var L=w,A=Number(new Date),_=A-(P||A);L.diff=_,L.prev=P,L.curr=A,P=A,m[0]=t.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");var j=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,function(f,c){if(f==="%%")return f;j++;var E=t.formatters[c];if(typeof E=="function"){var I=m[j];f=E.call(L,I),m.splice(j,1),j--}return f}),t.formatArgs.call(L,m);var T=L.log||t.log;T.apply(L,m)}}return w.namespace=g,w.enabled=t.enabled(g),w.useColors=t.useColors(),w.color=e(g),w.destroy=n,w.extend=i,typeof t.init=="function"&&t.init(w),t.instances.push(w),w}function n(){var g=t.instances.indexOf(this);return g!==-1?(t.instances.splice(g,1),!0):!1}function i(g,P){return t(this.namespace+(typeof P>"u"?":":P)+g)}function o(g){t.save(g),t.names=[],t.skips=[];var P,w=(typeof g=="string"?g:"").split(/[\s,]+/),y=w.length;for(P=0;P<y;P++)!w[P]||(g=w[P].replace(/\*/g,".*?"),g[0]==="-"?t.skips.push(new RegExp("^"+g.substr(1)+"$")):t.names.push(new RegExp("^"+g+"$")));for(P=0;P<t.instances.length;P++){var m=t.instances[P];m.enabled=t.enabled(m.namespace)}}function a(){t.enable("")}function l(g){if(g[g.length-1]==="*")return!0;var P,w;for(P=0,w=t.skips.length;P<w;P++)if(t.skips[P].test(g))return!1;for(P=0,w=t.names.length;P<w;P++)if(t.names[P].test(g))return!0;return!1}function p(g){return g instanceof Error?g.stack||g.message:g}return t.enable(t.load()),t}ou.exports=af});var su=G((qe,yn)=>{"use strict";function gn(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gn=function(t){return typeof t}:gn=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gn(r)}qe.log=lf;qe.formatArgs=cf;qe.save=ff;qe.load=hf;qe.useColors=uf;qe.storage=pf();qe.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function uf(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function cf(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+yn.exports.humanize(this.diff),!!this.useColors){var e="color: "+this.color;r.splice(1,0,e,"color: inherit");var t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,function(i){i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}}function lf(){var r;return(typeof console>"u"?"undefined":gn(console))==="object"&&console.log&&(r=console).log.apply(r,arguments)}function ff(r){try{r?qe.storage.setItem("debug",r):qe.storage.removeItem("debug")}catch{}}function hf(){var r;try{r=qe.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function pf(){try{return localStorage}catch{}}yn.exports=Gi()(qe);var df=yn.exports.formatters;df.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var uu=G((Ih,au)=>{"use strict";au.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var fu=G((Sh,lu)=>{"use strict";var mf=require("os"),cu=require("tty"),ke=uu(),{env:ye}=process,ht;ke("no-color")||ke("no-colors")||ke("color=false")||ke("color=never")?ht=0:(ke("color")||ke("colors")||ke("color=true")||ke("color=always"))&&(ht=1);"FORCE_COLOR"in ye&&(ye.FORCE_COLOR==="true"?ht=1:ye.FORCE_COLOR==="false"?ht=0:ht=ye.FORCE_COLOR.length===0?1:Math.min(parseInt(ye.FORCE_COLOR,10),3));function Wi(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function zi(r,e){if(ht===0)return 0;if(ke("color=16m")||ke("color=full")||ke("color=truecolor"))return 3;if(ke("color=256"))return 2;if(r&&!e&&ht===void 0)return 0;let t=ht||0;if(ye.TERM==="dumb")return t;if(process.platform==="win32"){let n=mf.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in ye)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in ye)||ye.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in ye)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ye.TEAMCITY_VERSION)?1:0;if(ye.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ye){let n=parseInt((ye.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ye.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ye.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ye.TERM)||"COLORTERM"in ye?1:t}function gf(r){let e=zi(r,r&&r.isTTY);return Wi(e)}lu.exports={supportsColor:gf,stdout:Wi(zi(!0,cu.isatty(1))),stderr:Wi(zi(!0,cu.isatty(2)))}});var pu=G((De,wn)=>{"use strict";var yf=require("tty"),bn=require("util");De.init=Cf;De.log=Tf;De.formatArgs=bf;De.save=Ef;De.load=Df;De.useColors=vf;De.colors=[6,2,3,4,5,1];try{vn=fu(),vn&&(vn.stderr||vn).level>=2&&(De.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}var vn;De.inspectOpts=Object.keys(process.env).filter(function(r){return/^debug_/i.test(r)}).reduce(function(r,e){var t=e.substring(6).toLowerCase().replace(/_([a-z])/g,function(i,o){return o.toUpperCase()}),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function vf(){return"colors"in De.inspectOpts?Boolean(De.inspectOpts.colors):yf.isatty(process.stderr.fd)}function bf(r){var e=this.namespace,t=this.useColors;if(t){var n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o="  ".concat(i,";1m").concat(e," \x1B[0m");r[0]=o+r[0].split(`
`).join(`
`+o),r.push(i+"m+"+wn.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=wf()+e+" "+r[0]}function wf(){return De.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Tf(){return process.stderr.write(bn.format.apply(bn,arguments)+`
`)}function Ef(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function Df(){return process.env.DEBUG}function Cf(r){r.inspectOpts={};for(var e=Object.keys(De.inspectOpts),t=0;t<e.length;t++)r.inspectOpts[e[t]]=De.inspectOpts[e[t]]}wn.exports=Gi()(De);var hu=wn.exports.formatters;hu.o=function(r){return this.inspectOpts.colors=this.useColors,bn.inspect(r,this.inspectOpts).split(`
`).map(function(e){return e.trim()}).join(" ")};hu.O=function(r){return this.inspectOpts.colors=this.useColors,bn.inspect(r,this.inspectOpts)}});var du=G((_h,Yi)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Yi.exports=su():Yi.exports=pu()});var vu=G((Lh,yu)=>{var rr=require("path"),mu=require("fs"),gu=parseInt("0777",8);yu.exports=qt.mkdirp=qt.mkdirP=qt;function qt(r,e,t,n){typeof e=="function"?(t=e,e={}):(!e||typeof e!="object")&&(e={mode:e});var i=e.mode,o=e.fs||mu;i===void 0&&(i=gu),n||(n=null);var a=t||function(){};r=rr.resolve(r),o.mkdir(r,i,function(l){if(!l)return n=n||r,a(null,n);switch(l.code){case"ENOENT":if(rr.dirname(r)===r)return a(l);qt(rr.dirname(r),e,function(p,g){p?a(p,g):qt(r,e,a,g)});break;default:o.stat(r,function(p,g){p||!g.isDirectory()?a(l,n):a(null,n)});break}})}qt.sync=function r(e,t,n){(!t||typeof t!="object")&&(t={mode:t});var i=t.mode,o=t.fs||mu;i===void 0&&(i=gu),n||(n=null),e=rr.resolve(e);try{o.mkdirSync(e,i),n=n||e}catch(l){switch(l.code){case"ENOENT":n=r(rr.dirname(e),t,n),r(e,t,n);break;default:var a;try{a=o.statSync(e)}catch{throw l}if(!a.isDirectory())throw l;break}}return n}});var Tu=G(Z=>{"use strict";var bu=require("fs"),Pf=require("os"),Of=require("net"),Tn=require("path"),wu=ru(),Zi=du(),If=vu().mkdirp,Ki=Zi("portfinder:testPort"),nr=Zi("portfinder:getPort"),Sf=Zi("portfinder:defaultHosts"),Qi={};Qi.testPort=function(r,e){e||(e=r,r={}),r.server=r.server||Of.createServer(function(){}),Ki("entered testPort(): trying",r.host,"port",r.port);function t(){Ki("done w/ testPort(): OK",r.host,"port",r.port),r.server.removeListener("error",n),r.server.close(),e(null,r.port)}function n(i){if(Ki("done w/ testPort(): failed",r.host,"w/ port",r.port,"with error",i.code),r.server.removeListener("listening",t),!(i.code=="EADDRINUSE"||i.code=="EACCES"))return e(i);var o=Z.nextPort(r.port);if(o>Z.highestPort)return e(new Error("No open ports available"));Qi.testPort({port:o,host:r.host,server:r.server},e)}r.server.once("error",n),r.server.once("listening",t),r.host?r.server.listen(r.port,r.host):r.server.listen(r.port)};Z.basePort=8e3;Z.setBasePort=function(r){Z.basePort=r};Z.highestPort=65535;Z.setHighestPort=function(r){Z.highestPort=r};Z.basePath="/tmp/portfinder";Z.getPort=function(r,e){if(e||(e=r,r={}),r.port=Number(r.port)||Number(Z.basePort),r.host=r.host||null,r.stopPort=Number(r.stopPort)||Number(Z.highestPort),!r.startPort){if(r.startPort=Number(r.port),r.startPort<0)throw Error("Provided options.startPort("+r.startPort+") is less than 0, which are cannot be bound.");if(r.stopPort<r.startPort)throw Error("Provided options.stopPort("+r.stopPort+"is less than options.startPort ("+r.startPort+")")}r.host&&Z._defaultHosts.indexOf(r.host)!==-1&&Z._defaultHosts.push(r.host);var t=[],n;return wu.eachSeries(Z._defaultHosts,function(i,o){return nr("in eachSeries() iteration callback: host is",i),Qi.testPort({host:i,port:r.port},function(a,l){return a?(nr("in eachSeries() iteration callback testPort() callback","with an err:",a.code),n=i,o(a)):(nr("in eachSeries() iteration callback testPort() callback","with a success for port",l),t.push(l),o())})},function(i){if(i)if(nr("in eachSeries() result callback: err is",i),i.code==="EADDRNOTAVAIL"||i.code==="EINVAL")if(r.host===n){var o="Provided host "+r.host+" could NOT be bound. Please provide a different host address or hostname";return e(Error(o))}else{var a=Z._defaultHosts.indexOf(n);return Z._defaultHosts.splice(a,1),Z.getPort(r,e)}else return e(i);if(t.sort(function(l,p){return l-p}),nr("in eachSeries() result callback: openPorts is",t),t[0]===t[t.length-1]){if(t[0]<=r.stopPort)return e(null,t[0]);var o="No open ports found in between "+r.startPort+" and "+r.stopPort;return e(Error(o))}else return Z.getPort({port:t.pop(),host:r.host,startPort:r.startPort,stopPort:r.stopPort},e)})};Z.getPortPromise=function(r){if(typeof Promise!="function")throw Error("Native promise support is not available in this version of node.Please install a polyfill and assign Promise to global.Promise before calling this method");return r||(r={}),new Promise(function(e,t){Z.getPort(r,function(n,i){if(n)return t(n);e(i)})})};Z.getPorts=function(r,e,t){t||(t=e,e={});var n=null;wu.timesSeries(r,function(i,o){n&&(e.port=Z.nextPort(n)),Z.getPort(e,function(a,l){a?o(a):(n=l,o(null,l))})},t)};Z.getSocket=function(r,e){e||(e=r,r={}),r.mod=r.mod||parseInt(755,8),r.path=r.path||Z.basePath+".sock";function t(){bu.stat(r.path,function(o){o?o.code=="ENOENT"?e(null,r.path):e(o):(r.path=Z.nextSocket(r.path),Z.getSocket(r,e))})}function n(o){If(o,r.mod,function(a){if(a)return e(a);r.exists=!0,t()})}function i(){var o=Tn.dirname(r.path);bu.stat(o,function(a,l){if(a||!l.isDirectory())return n(o);r.exists=!0,t()})}return r.exists?t():i()};Z.nextPort=function(r){return r+1};Z.nextSocket=function(r){var e=Tn.dirname(r),t=Tn.basename(r,".sock"),n=t.match(/^([a-zA-z]+)(\d*)$/i),i=parseInt(n[2]),o=n[1];return isNaN(i)&&(i=0),i+=1,Tn.join(e,o+i+".sock")};Z._defaultHosts=function(){var r={};try{r=Pf.networkInterfaces()}catch(p){if(p.syscall!=="uv_interface_addresses")throw p}for(var e=Object.keys(r),t="0.0.0.0",n=[t],i=0;i<e.length;i++)for(var o=r[e[i]],a=0;a<o.length;a++){var l=o[a];n.push(l.address)}return n.push(null),Sf("exports._defaultHosts is: %o",n),n}()});var Af={};Rl(Af,{activate:()=>Lf});module.exports=Ml(Af);var he=ae(require("vscode"));var Ar=ae(require("fs")),Nr=ae(require("vscode"));var Me=class{static purity(e){return e?e.replace(/;.+/,"").replace(/".*?"/g,"").replace(/\{.*?\}/g,"").replace(/ +/g," ").replace(/\bgui\b.*/ig,"").replace(/\b(msgbox)\b.+?%/ig,"$1"):""}static join(e,t){if(!(e==null||t==null))if(Array.isArray(t))for(let n of t)e.push(n);else e.push(t)}static matchAll(e,t){if(!e.global)throw new Error("Only support global regex!");let n=[],i;for(;(i=e.exec(t))!=null;)n.push(i);return n}};var ds=ae(ps()),ms=ae(require("vscode"));function jl(r){return r?(0,ds.default)("yyyy-MM-dd hh:mm:ss",r):""}var Le=class{static debug(e){this.log(e,!1)}static log(e,t=!0){e instanceof Error&&(console.trace(e),e=e.message),t&&this.outputChannel.show(t);let n=jl(new Date);this.outputChannel.appendLine(`${n} ${e}`)}};Le.outputChannel=ms.window.createOutputChannel("AHK");var Lr=class{constructor(e,t,n,i){this.name=e;this.document=t;this.line=n;this.character=i}},_t=class{constructor(e,t,n,i){this.name=e;this.document=t;this.line=n;this.character=i}};var Lt=class{constructor(e,t,n,i,o,a,l){this.origin=e;this.name=t;this.document=n;this.line=i;this.character=o;this.withQuote=a;this.comment=l;this.buildParams(),this.variables=[]}buildParams(){let e=/\s*\((.+?)\)\s*$/;if(this.origin!=this.name){let t=this.origin.match(e);t?(this.params=t[1].split(",").filter(n=>n.trim()!="").map(n=>{let i=n.match(/[^:=* \t]+/);return i!=null?i[0]:n}),this.full=this.origin.replace(t[1],this.params.join(","))):(this.params=[],this.full=this.origin)}}pushVariable(e){Array.isArray(e)||(e=[e]);e:for(let t of e){for(let n of this.variables)if(n.name==t.name)continue e;for(let n of this.params)if(n==t.name)continue e;this.variables.push(t)}}};var Ge=class{static async buildByPath(e){if(!!e){if(Ar.statSync(e).isDirectory())Ar.readdir(e,(t,n)=>{if(t){Le.log(t);return}for(let i of n)i.match(/(^\.|out|target|node_modules)/)||this.buildByPath(e+"/"+i)});else if(e.match(/\b(ahk|ext)$/i)){let t=await Nr.workspace.openTextDocument(Nr.Uri.file(e));this.buildScript(t)}}}static async buildScript(e,t=!1){if(t&&this.documentCache.get(e.uri.path)!=null)return this.documentCache.get(e.uri.path);let n=[],i=[],o=[],a=[],l=[],p,g=0,P=Math.min(e.lineCount,1e4),w=!1;for(let m=0;m<P;m++){let D=e.lineAt(m).text;if(D.match(/ *\/\*/)&&(w=!0),D.match(/ *\*\//)&&(w=!1),w)continue;let L=Ge.detechMethodByLine(e,m);if(L)if(L instanceof Lt){n.push(L),i.push(new _t(L.name,e,m,L.character)),p=L,L.withQuote&&g++;continue}else Me.join(i,L);let A=Ge.getLabelByLine(e,m);if(A){o.push(A);continue}let _=Ge.getBlockByLine(e,m);_&&l.push(_),D.indexOf("{")!=-1&&g++,D.indexOf("}")!=-1&&(g--,p!=null&&(p.endLine=m));let j=Ge.detechVariableByLine(e,m);j&&(g==0||!p?this.joinVars(a,j):p.pushVariable(j))}let y={methods:n,labels:o,refs:i,variables:a,blocks:l};return this.documentCache.set(e.uri.path,y),y}static async getMethodByName(e,t){t=t.toLowerCase();for(let n of this.documentCache.get(e.uri.path).methods)if(n.name.toLowerCase()==t)return n;for(let n of this.documentCache.keys())for(let i of this.documentCache.get(n).methods)if(i.name.toLowerCase()==t)return i}static async getAllMethod(){let e=[];for(let t of this.documentCache.keys())for(let n of this.documentCache.get(t).methods)e.push(n);return e}static async getLabelByName(e,t){t=t.toLowerCase();for(let n of this.documentCache.get(e.uri.path).labels)if(n.name.toLowerCase()==t)return n;for(let n of this.documentCache.keys())for(let i of this.documentCache.get(n).labels)if(i.name.toLowerCase()==t)return i}static getAllRefByName(e){let t=[];e=e.toLowerCase();for(let n of this.documentCache.keys()){let i=this.documentCache.get(n);for(let o of i.refs)o.name.toLowerCase()==e&&t.push(o)}return t}static getBlockByLine(e,t){let{text:n}=e.lineAt(t),i=n.match(/;;(.+)/);if(i)return{document:e,line:t,name:i[1],character:n.indexOf(i[1])}}static getLabelByLine(e,t){let n=Me.purity(e.lineAt(t).text),i=/^[ \t]*([\u4e00-\u9fa5_a-zA-Z0-9]+) *:{1}(?!(:|=))/.exec(n);if(i){let o=i[1];return o.toLowerCase()=="case"||o.toLowerCase()=="default"?void 0:new Lr(i[1],e,t,n.indexOf(o))}}static detechVariableByLine(e,t){let n=Me.purity(e.lineAt(t).text),i=n.match(Ge.varDefPattern);if(i){let o=i[1];return{line:t,document:e,isGlobal:!0,method:null,name:o,character:n.indexOf(o)}}else{let o=[],a=Me.matchAll(Ge.varCommandPattern,n.replace(/\(.+?\)/g,""));for(let l=0;l<a.length;l++){if(l==0)continue;let p=a[l][1];this.keywords.includes(p.toLowerCase())||o.push({line:t,document:e,isGlobal:!0,method:null,name:p,character:n.indexOf(a[l][0])})}return o}return null}static detechMethodByLine(e,t,n){n=n!=null?n:e.lineAt(t).text;let i=Me.purity(n),o=/\s*(([\u4e00-\u9fa5_a-zA-Z0-9]+)(?<!if|while)\(.*?\))\s*(\{)?\s*/i,a=i.match(o);if(!a)return;let l=a[2],p=n.indexOf(l);if(i.length!=a[0].length){let w=[new _t(l,e,t,p)],y=this.detechMethodByLine(e,t,n.replace(new RegExp(l+"\\s*\\("),""));return Me.join(w,y),w}let g=a[1];if(a[3])return new Lt(g,l,e,t,p,!0,Ge.getRemarkByLine(e,t-1));for(let w=t+1;w<e.lineCount;w++){let y=Me.purity(e.lineAt(w).text);if(!!y.trim())return y.match(/^\s*{/)?new Lt(g,l,e,t,p,!1,Ge.getRemarkByLine(e,t-1)):new _t(l,e,t,p)}}static getRemarkByLine(e,t){if(t>=0){let{text:n}=e.lineAt(t),i=n.match(/^\s*;(.+)/);if(i)return i[1]}return null}static joinVars(e,t){if(e==null||t==null)return;Array.isArray(t)||(t=[t]);e:for(let n of t){for(let i of e)if(i.name==n.name)continue e;e.push(n)}}},te=Ge;te.documentCache=new Map,te.varDefPattern=/[ \t]*(\w+?)\s*([+\-*/.:])?(?<![=!])=(?![=!]).+/,te.varCommandPattern=/(\w+)[ \t,]+/g,te.keywords=["and","or","new","extends","if","loop"];var ni=require("path"),me=ae(require("vscode"));var at=ae(require("fs")),ti=ae(require("path")),Je=ae(require("vscode"));var At=class{static init(e){this.storagePath=e.globalStoragePath,Je.workspace.onDidSaveTextDocument(t=>{te.buildScript(t)})}static check(e){at.existsSync(e)||at.mkdirSync(e)}static show(e){if(this.storagePath||Je.window.showErrorMessage("FileManager is not init!"),!e)return;let t=`${this.storagePath}/${e}`;this.check(this.storagePath),this.check(ti.resolve(t,".."));let n=Je.Uri.file(t);return new Promise(i=>{Je.workspace.openTextDocument(n).then(async o=>{i(await Je.window.showTextDocument(o))})})}static record(e,t,n){if(this.storagePath||Je.window.showErrorMessage("FileManager is not init!"),!!e)return new Promise((i,o)=>{let a=`${this.storagePath}/${e}`;this.check(this.storagePath),this.check(ti.resolve(a,"..")),n==ri.WRITE?at.writeFileSync(a,`${t}`,{encoding:"utf8"}):at.appendFileSync(a,`${t}`,{encoding:"utf8"}),i(a)})}},ri=(t=>(t[t.WRITE=0]="WRITE",t[t.APPEND=1]="APPEND",t))(ri||{});var Nt=ae(require("vscode")),de=class{static getConfig(e){return Nt.workspace.getConfiguration(this.CONFIG_PREFIX).get(e)}static updateStatusBarItems(e){this.statusBarItem||(this.statusBarItem=Nt.window.createStatusBarItem(Nt.StatusBarAlignment.Left)),this.statusBarItem.text=e,this.statusBarItem.show()}static hide(){this.statusBarItem.hide()}};de.CONFIG_PREFIX="vscode-ahk-plus";var gs=ae(require("child_process"));var gt=class{static exec(e,t={}){return new Promise((n,i)=>{gs.exec(e,t,o=>{if(o){Le.log(o.message),i(o);return}n(!0)})})}};var et=class{static async runSelection(){let e=me.window.activeTextEditor;if(!e){me.window.showErrorMessage("Not active editor found!");return}let t=e.selection,n=e.document.getText(t);this.run(await this.createTemplate(n))}static async startDebugger(e){let t=e?me.Uri.file(e):me.window.activeTextEditor.document.uri;e=e||await this.getPathByActive();let n=me.extensions.getExtension("zero-plusplus.vscode-autohotkey-debug")!=null;me.debug.startDebugging(me.workspace.getWorkspaceFolder(t),{type:n?"autohotkey":"ahk",request:"launch",name:"Autohotkey Debugger",runtime:de.getConfig("executePath"),program:e})}static async run(e){let t=de.getConfig("executePath");this.checkAndSaveActive(),e||(e=await this.getPathByActive()),gt.exec(`"${t}" "${e}"`,{cwd:`${(0,ni.resolve)(e,"..")}`})}static async compile(){let e=me.window.activeTextEditor.document.uri.fsPath;if(!e){me.window.showErrorMessage("Unsupport compile template scripts.");return}this.checkAndSaveActive();let t=e.lastIndexOf("."),n=e.substr(0,t<0?e.length:t)+".exe",i=de.getConfig("compileIcon");i=i?`/icon "${i}"`:"";let o=de.getConfig("compileBaseFile");o=o?`/bin "${o}"`:"";let a=de.getConfig("compileMpress")?"/mpress 1":"",l=`"${de.getConfig("compilePath")}" /in "${e}" /out "${n}" ${i} ${o} ${a}`;await gt.exec(l,{cwd:`${(0,ni.resolve)(e,"..")}`})&&me.window.showInformationMessage("compile success!")}static async getPathByActive(){let e=me.window.activeTextEditor.document;return e.isUntitled?await this.createTemplate(e.getText()):e.fileName}static async createTemplate(e){let t=`temp-${this.getNowDate()}.ahk`;return await At.record(t,e,0)}static checkAndSaveActive(){me.window.activeTextEditor.document.isUntitled||me.commands.executeCommand("workbench.action.files.save")}static getNowDate(){let e=new Date,t=e.getMonth()+1,n=e.getDate();return t<=9&&(t="0"+t),n<=9&&(n="0"+n),e.getFullYear()+"-"+t+"-"+n+"-"+this.pad(e.getHours(),2)+"-"+this.pad(e.getMinutes(),2)+"-"+this.pad(e.getSeconds(),2)}static pad(e,t,n){return n=n||"0",e=e+"",e.length>=t?e:new Array(t-e.length+1).join(n)+e}};var Iu=require("vscode"),Ie=ae(Jt());var Eu=require("events");var Ja=require("events");var Zl=require("net"),Jl=Za(),sn=class extends Ja.EventEmitter{constructor(t){super();this.port=t;this.header='<?xml version="1.0" encoding="UTF-8"?>';this.parser=new Jl.Parser({attrkey:"attr",charsAsChildren:!1,charkey:"content",explicitCharkey:!0,explicitArray:!1})}start(){let n;return this.proxyServer=new Zl.Server().listen(this.port).on("connection",i=>{this.ahkConnection=i,i.on("data",o=>{n=n?Buffer.concat([n,o]):o,n[n.length-1]==0&&(this.process(n.toString()),n=null)})}).on("error",i=>{throw Le.log(i.message),i}),this}prepareNewConnection(){this.closeAhkConnection(),this.hasNew=!0}closeAhkConnection(){this.ahkConnection&&(this.ahkConnection.end(),this.ahkConnection=null)}shutdown(){if(this.closeAhkConnection(),this.hasNew){this.hasNew=!1;return}this.proxyServer&&(this.proxyServer.close(),this.proxyServer=null)}write(t){this.ahkConnection&&this.ahkConnection.write(t)}process(t){t=t.substr(t.indexOf("<?xml")),t.indexOf(this.header)==-1&&(t=this.header+t);for(let n of t.split(this.header)){if(n==null||n.trim()=="")continue;let i=this.header+n;this.parser.parseStringPromise(i).then(o=>{for(let a in o)o.hasOwnProperty(a)&&this.emit(a,o[a])}).catch(o=>{Le.log(o)})}}};var eu=require("path"),un=ae(Jt()),cn=require("fs"),an=class{constructor(){this._breakPoints=new Map}loopPoints(e){for(let t of this._breakPoints.keys())for(let n of this._breakPoints.get(t))e(n)}get(e){return this._breakPoints.get(e)}buildBreakPoint(e,t,n){if(!(0,cn.existsSync)(e))return[];let i=(0,cn.readFileSync)(e).toString().split(`
`),o=t.map(a=>{let l=new un.Breakpoint(!1,a.line,a.column,new un.Source((0,eu.basename)(e),e)),p=i[a.line];return p&&p.trim().charAt(0)!=";"&&(l.verified=!0),n(l),l});return this._breakPoints.set(e,o),o}};var ln=class{constructor(e){this.debugServer=e;this.transId=1;this.commandCallback={}}sendComand(e,t){if(!!this.debugServer)return this.transId++,e+=` -i ${this.transId}`,typeof t=="string"&&(e+=` -- ${Buffer.from(t).toString("base64")}`),e+="\0",this.debugServer.write(`${e}`),new Promise(n=>{this.commandCallback[""+this.transId]=i=>{n(i)}})}callback(e,t){let n=this.commandCallback[e];n&&n(t),this.commandCallback[e]=null}};var hn=ae(Jt()),tu=require("path"),fn=class{handle(e,t){return t?(Array.isArray(t.stack)?t.stack:Array.of(t.stack)).map((i,o)=>new hn.StackFrame(o,i.attr.where,new hn.Source((0,tu.basename)(i.attr.filename),i.attr.filename),parseInt(i.attr.lineno))):[]}};var wt=ae(Jt());var ze=class{static toArray(e){return e?Array.isArray(e)?e:[e]:[]}static atob(e){return e?Buffer.from(e,"base64").toString():null}static btoa(e){return e?Buffer.from(e).toString("base64"):null}};var pn=class{constructor(){this.variableHandles=new wt.Handles;this.variableMap=new Map}getScopeByRef(e){let t=this.variableHandles.get(e);return typeof t=="string"?t=="Local"?0:1:t.scope}getVarByRef(e){return this.variableHandles.get(e)}getVarByName(e){return this.variableMap.get(e)}obtainValue(e){let t,n=!1,i=e.match(/^(?:()|\"(.*)\"|(true|false)|([+-]?\d+)|([+-]?\d+\.[+-]?\d+)|([\w\d]+))$/si);if(!i)return Promise.reject(new Error(`"${e}" is invalid value.`));let[,o,a,l,p,g,P]=i;return o!==void 0?(t="string",e=""):a!==void 0?(t="string",e=a):l!==void 0?(t="string",e=l.match(/true/i)?"1":"0"):p!==void 0?(t="integer",e=p):g!==void 0?(t="float",e=g):(n=!0,e=P),Promise.resolve({type:t,value:e,isVariable:n})}getArrayValue(e,t,n){let i=this.getVarByRef(e);return Array.isArray(i==null?void 0:i.value)?i.value.slice(t,t+n).map((o,a)=>new wt.Variable(`[${t+a+1}]`,o)):[]}scopes(e){return this.frameId=e,[new wt.Scope("Local",this.variableHandles.create("Local"),!1),new wt.Scope("Global",this.variableHandles.create("Global"),!1)]}getFrameId(){return this.frameId}parsePropertyget(e,t){return this.parse(e.property.content?e:e.property,t)}parse(e,t){return ze.toArray(e.property).map(n=>{try{let{attr:i}=n,o,a;if(this.likeArray(n)){let p=this.getLikeArrayLength(n);o=100<p?p:void 0,a=100<p?1:void 0}let l={scope:t,frameId:t==1?-1:this.frameId,name:n.attr.fullname,value:this.buildVariableValue(n)};return this.variableMap.set(i.name,l),{type:i.type,name:i.name,value:this.formatPropertyValue(n),indexedVariables:o,namedVariables:a,variablesReference:i.type!="object"?0:this.variableHandles.create(l)}}catch(i){console.log(i)}})}buildVariableValue(e){let{attr:t,content:n=""}=e;if(["string","integer","float"].includes(t.type)===!0){let i=ze.atob(n);return t.type==="integer"||t.type==="float"?i:`"${i}"`}else if(t.type==="object"){let i=ze.toArray(e.property);return this.likeArray(e)==!0&&t.classname==="Object"?i.map(o=>ze.atob(o.content)):i.reduce((o,a)=>(o[a.attr.fullname]=ze.atob(a.content),o),{})}return`${t.classname}`}formatPropertyValue(e){let{attr:t,content:n=""}=e;if(["string","integer","float"].includes(t.type)===!0){let i=Buffer.from(n,t.encoding).toString();return t.type==="integer"||t.type==="float"?i:`"${i}"`}else if(t.type==="object"&&this.likeArray(e)==!0){let i=t.classname==="Object"?"Array":t.classname,o=this.getLikeArrayLength(e);return`${i}(${o})`}return`${t.classname}`}getLikeArrayLength(e){let t=ze.toArray(e.property);if(t.length==0)return 0;for(let n=t.length-1;n>0;n--){let i=t[n].attr.name.match(/\[([0-9]+)\]/);if(i)return parseInt(i[1])}return 0}likeArray(e){return ze.toArray(e.property).some(t=>t.attr.name.match(/\[[0-9]+\]/))}};var Du=ae(Tu()),Cu=require("child_process"),Pu=require("path"),Ou=require("fs");var En=class extends Eu.EventEmitter{async start(t){var a;await this.initDebugger(t,t.dbgpSettings);let n=(a=t.runtime)!=null?a:de.getConfig("executePath");if(t.program||(t.program=await et.getPathByActive()),!(0,Ou.existsSync)(n)){Le.log(`Autohotkey Execute Bin Not Found : ${n}`),this.end();return}let i=["/ErrorStdOut",`/debug=localhost:${this.port}`,t.program],o=(0,Cu.spawn)(n,i,{cwd:`${(0,Pu.resolve)(t.program,"..")}`});this.emit("output",`${n} ${i.join(" ")}`),o.stderr.on("data",l=>{this.emit("output",l.toString("utf8")),this.end()})}async initDebugger(t,n={}){if(this.port)return;let{max_children:i=300,max_data:o=131072}=n;this.breakPointHandler=new an,this.stackHandler=new fn,this.variableHandler=new pn,this.startArgs=t;let a=await Du.getPortPromise({port:9e3,stopPort:9100});return Le.debug(`Creating debug server, port is ${a}`),this.debugServer=new sn(a),this.commandHandler=new ln(this.debugServer),this.debugServer.start().on("init",()=>{this.breakPointHandler.loopPoints(l=>{this.setBreakPonit(l)}),this.sendComand(`feature_set -n max_children -v ${i}`),this.sendComand(`feature_set -n max_data -v ${o}`),this.sendComand("feature_set -n max_depth -v 2"),this.sendComand("stdout -c 1"),this.sendComand("stderr -c 1"),this.sendComand("run")}).on("stream",l=>{this.emit("output",Buffer.from(l.content,"base64").toString())}).on("response",l=>{if(l.attr.command)switch(this.commandHandler.callback(l.attr.transaction_id,l),l.attr.command){case"run":case"step_into":case"step_over":case"step_out":this.processRunResponse(l);break;case"stop":this.end();break}}),this.port=a,a}sendComand(t,n){return this.commandHandler?this.commandHandler.sendComand(t,n):null}async restart(){this.sendComand("stop"),this.debugServer.prepareNewConnection(),this.start(this.startArgs)}stop(){this.sendComand("stop"),this.debugServer.shutdown(),this.emit("output","The debugger has stopped.")}end(){this.debugServer.hasNew||this.emit("end"),this.debugServer.shutdown()}scopes(t){return this.variableHandler.scopes(t)}async listVariables(t){var l;if(t.filter==="named")return[];if(t.filter==="indexed")return this.variableHandler.getArrayValue(t.variablesReference,t.start,t.count);let n=this.variableHandler.getScopeByRef(t.variablesReference),i=this.variableHandler.getFrameId(),o=(l=this.variableHandler.getVarByRef(t.variablesReference))==null?void 0:l.name;if(o)return this.getVariable(i,n,o);let a=await this.sendComand(`context_get -d ${i} -c ${n}`);return this.variableHandler.parse(a,n)}async getVariableByEval(t){let n=this.variableHandler.getFrameId(),i=await this.getVariable(n,0,t);if(i.length==0)return null;if(i.length==1)return i[0].value;{let o=this.variableHandler.getVarByName(t);return JSON.stringify(o.value)}}async getVariable(t,n,i){let o=await this.sendComand(`property_get -d ${t} -c ${n} -n ${i}`);return this.variableHandler.parsePropertyget(o,n)}async setVariable(t){return this.variableHandler.obtainValue(t.value).then(async({type:n,value:i,isVariable:o})=>{var D;let a=this.variableHandler.getFrameId(),l=this.variableHandler.getScopeByRef(t.variablesReference);if(o){let L=(await this.getVariable(a,l,i))[0];if(!L)throw new Error(`variable ${t.value} not found!`);i=L.value,i.match(/^"|"$/g)&&(n="string",i=i.replace(/^"|"$/g,""))}let p=(D=this.variableHandler.getVarByRef(t.variablesReference))==null?void 0:D.name,g=t.name;p&&(g=(g.includes("[")&&g.includes("]"))===!0?`${p}${g}`:`${p}.${g}`);let P=await this.sendComand(`property_set -d ${a} -c ${l} -n ${g} -t ${n}`,i);if(!!parseInt(P.attr.success)===!1)throw new Error(`"${g}" cannot be written. Probably read-only.`);let y=n==="string"?`"${i}"`:i,m=0;return{name:t.name,value:y,type:n,variablesReference:m}})}async stack(t){let n=await this.sendComand("stack_get");return this.stackHandler.handle(t,n)}async setBreakPonit(t){if(this.debugServer&&t.verified){let n=await this.sendComand(`breakpoint_set -t line -f ${t.source.path} -n ${t.line}`);t.id=n.attr.id}}buildBreakPoint(t,n){return this.clearBreakpoints(t),this.breakPointHandler.buildBreakPoint(t,n,i=>{this.setBreakPonit(i)})}clearBreakpoints(t){let n;if(this.debugServer&&(n=this.breakPointHandler.get(t)))for(let i of n)this.sendComand(`breakpoint_remove -d ${i.id}`)}processRunResponse(t){switch(t.attr.status){case"break":this.emit("break",t.attr.command);break;case"stopping":case"stopped":this.end();break}}};var Dn=class extends Ie.LoggingDebugSession{constructor(){super("ahk-debug.txt");this.setDebuggerLinesStartAt1(!1),this.setDebuggerColumnsStartAt1(!1),this.dispather=new En,this.dispather.on("break",t=>{this.sendEvent(new Ie.StoppedEvent(t,Dn.THREAD_ID))}).on("breakpointValidated",t=>{this.sendEvent(new Ie.BreakpointEvent("changed",{verified:t.verified,id:t.id}))}).on("output",t=>{this.sendEvent(new Ie.OutputEvent(`${t}
`)),Iu.commands.executeCommand("workbench.debug.action.focusRepl")}).on("end",()=>{this.sendEvent(new Ie.TerminatedEvent)})}initializeRequest(t,n){t.body={...t.body,completionTriggerCharacters:[".","["],supportsConfigurationDoneRequest:!1,supportsEvaluateForHovers:!0,supportsStepBack:!1,supportsDataBreakpoints:!1,supportsCompletionsRequest:!0,supportsCancelRequest:!0,supportsTerminateRequest:!0,supportsRestartRequest:!0,supportsBreakpointLocationsRequest:!1,supportsSetVariable:!0},this.sendResponse(t),this.sendEvent(new Ie.InitializedEvent)}restartRequest(t,n,i){this.dispather.restart(),this.sendResponse(t)}async launchRequest(t,n){this.dispather.start(n),this.sendResponse(t)}disconnectRequest(t,n,i){this.sendResponse(t)}terminateRequest(t,n,i){this.dispather.stop(),this.sendResponse(t)}async setBreakPointsRequest(t,n){t.body={breakpoints:this.dispather.buildBreakPoint(n.source.path,n.breakpoints)},this.sendResponse(t)}async stackTraceRequest(t,n){t.body={stackFrames:await this.dispather.stack(n)},this.sendResponse(t)}scopesRequest(t,n){t.body={scopes:this.dispather.scopes(n.frameId)},this.sendResponse(t)}async variablesRequest(t,n,i){t.body={variables:await this.dispather.listVariables(n)},this.sendResponse(t)}async setVariableRequest(t,n,i){try{t.body=await this.dispather.setVariable(n),this.sendResponse(t)}catch(o){this.sendErrorResponse(t,{id:n.variablesReference,format:o.message})}}pauseRequest(t,n,i){this.dispather.sendComand("break"),this.sendResponse(t)}continueRequest(t,n){this.dispather.sendComand("run"),this.sendResponse(t)}nextRequest(t,n){this.dispather.sendComand("step_over"),this.sendResponse(t)}stepInRequest(t,n,i){this.dispather.sendComand("step_into"),this.sendResponse(t)}stepOutRequest(t,n,i){this.dispather.sendComand("step_out"),this.sendResponse(t)}threadsRequest(t){t.body={threads:[new Ie.Thread(Dn.THREAD_ID,"main thread")]},this.sendResponse(t)}async completionsRequest(t,n){t.body={targets:[...await this.dispather.listVariables({variablesReference:1e3}),...await this.dispather.listVariables({variablesReference:1001})].map(i=>({type:"variable",label:i.name,sortText:i.name}))},this.sendResponse(t)}async evaluateRequest(t,n){let i=n.expression.split("="),o;i.length==1?o=await this.dispather.getVariableByEval(n.expression):(this.dispather.setVariable({name:i[0],value:i[1],variablesReference:1e3}),o=`execute: ${n.expression}`),t.body={result:o||"null",variablesReference:0},this.sendResponse(t)}},ir=Dn;ir.THREAD_ID=1;var ve=ae(require("vscode"));var Su=require("fs"),Cn=class{async provideDefinition(e,t,n){let i=await this.tryGetFileLink(e,t);if(i)return i;let o=e.getText(e.getWordRangeAtPosition(t));if(new RegExp(o+"\\s*\\(.*?\\)").test(e.lineAt(t.line).text)){let p=await te.getMethodByName(e,o);if(p){let g=p.document;return new ve.Location(g.uri,new ve.Position(p.line,p.character))}}let a=await te.getLabelByName(e,o);if(a){let p=a.document;return new ve.Location(p.uri,new ve.Position(a.line,a.character))}let l=await te.buildScript(e,!0);for(let p of l.methods)if(t.line>=p.line&&t.line<=p.endLine){for(let g of p.variables)if(g.name==o)return new ve.Location(e.uri,new ve.Position(g.line,g.character));for(let g of p.params)if(g==o)return new ve.Location(e.uri,new ve.Position(p.line,p.character+p.origin.indexOf(g)))}for(let p of l.variables)if(p.name==o)return new ve.Location(e.uri,new ve.Position(p.line,p.character));return null}async tryGetFileLink(e,t,n){let{text:i}=e.lineAt(t.line),o=i.match(/(?<=#include).+?\.(ahk|ext)\b/i);if(o){let a=n||e.uri.path.substr(0,e.uri.path.lastIndexOf("/")),l=ve.Uri.file(o[0].trim().replace(/(%A_ScriptDir%|%A_WorkingDir%)/,a).replace(/(%A_LineFile%)/,e.uri.path));return(0,Su.existsSync)(l.fsPath)?new ve.Location(l,new ve.Position(0,0)):n?this.tryGetFileLink(e,t,ve.workspace.rootPath):null}}};var On=ae(require("vscode")),Pn=class{static createEditorListenr(){return On.window.onDidChangeActiveTextEditor(e=>{e&&e.document.languageId==="ahk"&&e.document.getText()===""&&On.commands.executeCommand("editor.action.insertSnippet",{name:"AhkTemplate"})})}};var In=ae(require("vscode"));function _f(r){let e=r.lineCount-1;return new In.Range(0,0,e,r.lineAt(e).text.length)}var Ji=class{provideDocumentFormattingEdits(e,t,n){let i="",o=0,a=0,l=!1,p=!1;for(let P=0;P<e.lineCount;P++){let w=e.lineAt(P).text;if(w.match(/ *\/\*/)&&(p=!0),w.match(/ *\*\//)&&(p=!1),p){i+=w,P!==e.lineCount-1&&(i+=`
`);continue}let y=Me.purity(w.toLowerCase()),m=!0;if((y.match(/#ifwinactive$/)||y.match(/#ifwinnotactive$/))&&(a>0?o-=a:o--,m=!1),y.match(/\b(return|ExitApp)\b/i)&&a===o&&(a==0,o--,m=!1),y.match(/^\s*case.+?:\s*$/)?(a--,o--,m=!1):y.match(/:\s*$/)&&a>0&&a===o&&(o--,m=!1),y.match(/}/)!=null){let A=y.match(/}/).length,_=y.match(/{[^{}]*}/);_&&(A=A-_.length),o-=A,A>0&&(m=!1)}if(l&&y.match(/{/)!=null){let A=y.match(/{/).length,_=y.match(/{[^{}]*}/);_&&(A=A-_.length),A>0&&(l=!1,o--)}o<0&&(o=0);let D=/;.+/.exec(w);D=D?D[0]:"";let L=w.replace(/^\s*/,"").replace(/;.+/,"").replace(/ {2,}/g," ")+D;if(i+=!L||L.trim()==""?L:" ".repeat(o*t.tabSize)+L,P!==e.lineCount-1&&(i+=`
`),l&&(l=!1,o--),(y.match(/#ifwinactive.*?\s/)||y.match(/#ifwinnotactive.*?\s/))&&(o++,m=!1),y.match(/{/)!=null){let A=y.match(/{/).length,_=y.match(/{[^{}]*}/);_&&(A=A-_.length),o+=A,A>0&&(m=!1)}if(y.match(/:\s*$/)&&(o++,a=o,m=!1),m)for(let A of Ji.oneCommandList){let _;if((_=new RegExp("\\b"+A+"\\b(.*)").exec(y))!=null&&!_[1].includes("/")){l=!0,o++;break}}}let g=[];return g.push(new In.TextEdit(_f(e),i.replace(/\n{2,}/g,`

`))),g}},or=Ji;or.oneCommandList=["ifnotexist","ifexist","ifwinactive","ifwinnotactive","ifwinexist","ifwinnotexist","ifinstring","ifnotinstring","if","else","loop","for","while","catch"];var Ce=ae(require("vscode"));var Sn=class{async provideDocumentSymbols(e,t){let n=[],i=await te.buildScript(e,!1);for(let o of i.methods)n.push(new Ce.SymbolInformation(o.full,Ce.SymbolKind.Method,o.comment,new Ce.Location(o.document.uri,new Ce.Position(o.line,o.character))));for(let o of i.labels)n.push(new Ce.SymbolInformation(o.name,Ce.SymbolKind.Field,null,new Ce.Location(o.document.uri,new Ce.Position(o.line,o.character))));for(let o of i.blocks)n.push(new Ce.SymbolInformation(o.name,Ce.SymbolKind.Module,null,new Ce.Location(o.document.uri,new Ce.Position(o.line,o.character))));return n}};var _u=require("fs"),Lu=require("path"),nt=require("vscode");var _n=class{constructor(e){this.initSnippetCache(e)}async provideHover(e,t,n){let i=this.buildContext(e,t),o=this.tryGetSnippetHover(i);if(o)return o;let a=await te.getMethodByName(e,i.word);if(a){let l=new nt.MarkdownString("",!0).appendCodeblock(a.full);return a.comment&&l.appendText(a.comment),new nt.Hover(l)}return null}tryGetSnippetHover(e){let t=e.word.toLowerCase();e.nextChart=="("&&(t+="()");let n=this.snippetCache.get(t);if(n){let i=new nt.MarkdownString(null,!0).appendCodeblock(n.body,"ahk");return n.description&&i.appendText(n.description),new nt.Hover(i)}}buildContext(e,t){let n=t.line,i=e.getWordRangeAtPosition(t),o=e.getText(i);i.start.character>0&&e.getText(new nt.Range(n,i.start.character-1,n,i.start.character))=="#"&&(o="#"+o);let a=e.getText(new nt.Range(n,i.end.character,n,i.end.character+1));return{word:o,nextChart:a}}initSnippetCache(e){var n;let t=JSON.parse((0,_u.readFileSync)((0,Lu.join)(e.extensionPath,"language","snippets.json"),"utf-8"));this.snippetCache=new Map;for(let i in t){let o=t[i];typeof o.body=="string"&&(o.body=(n=o.body)==null?void 0:n.replace(/\d{1}:/g,"")),this.snippetCache.set(i.toLowerCase(),o)}}};var An=ae(require("vscode"));var Ln=class{provideReferences(e,t,n,i){let o=e.getText(e.getWordRangeAtPosition(t)),a=[],l=te.getAllRefByName(o);for(let p of l)a.push(new An.Location(p.document.uri,new An.Position(p.line,p.character)));return a}};var Ue=ae(require("vscode"));var Nn=class{async provideRenameEdits(e,t,n,i){for(let p of Ue.workspace.textDocuments)te.buildScript(p);let o=e.getText(e.getWordRangeAtPosition(t)),a=te.getAllRefByName(o),l=new Ue.WorkspaceEdit;for(let p of a){if(p.document.uri.scheme!="file")continue;let g=[];g.push(new Ue.TextEdit(new Ue.Range(new Ue.Position(p.line,p.character),new Ue.Position(p.line,p.character+o.length)),n)),console.debug(`url:${p.document.uri},line:${p.line},character:${p.character}`),l.set(p.document.uri,g)}return l}async prepareRename(e,t,n){let i=e.getWordRangeAtPosition(t),o=e.getText(i);if(await te.getMethodByName(e,o)!=null)return i;throw new Error("You cannot rename this element.")}};var Au=ae(require("vscode"));var xn=class{async provideSignatureHelp(e,t,n,i){let o,a=e.lineAt(t.line).text,l=0;for(let P=t.character-1;P>0;P--){let w=a.charAt(P);if(w=="("){o=new Au.Position(t.line,P);break}w==","&&l++}let p=e.getText(e.getWordRangeAtPosition(o)),g=await te.getMethodByName(e,p);return g?{activeSignature:0,signatures:[{label:g.origin,parameters:g.params.map(P=>({label:P}))}],activeParameter:l}:null}};var Pe=ae(require("vscode"));var Nu=require("vscode"),Rn=class{constructor(){this.keywordList=[];this.keywordComplectionItems=[];this.initKeywordComplectionItem()}async provideCompletionItems(e,t){let n=t.character===0?t:new Pe.Position(t.line,t.character-1);if((t.character===0?null:e.getText(new Pe.Range(n,t)))==".")return[];let o=[];return(await te.getAllMethod()).forEach(l=>{let p=new Pe.CompletionItem(l.params.length==0?l.name:l.full,Pe.CompletionItemKind.Method);if(l.params.length==0?p.insertText=l.name+"()":p.insertText=new Nu.SnippetString(l.name+"($1)"),p.detail=l.comment,o.push(p),l.document==e&&t.line>=l.line&&t.line<=l.endLine){for(let g of l.params)o.push(new Pe.CompletionItem(g,Pe.CompletionItemKind.Variable));for(let g of l.variables)o.push(new Pe.CompletionItem(g.name,Pe.CompletionItemKind.Variable))}}),(await te.buildScript(e,!0)).variables.forEach(l=>{let p=new Pe.CompletionItem(l.name,Pe.CompletionItemKind.Variable);o.push(p)}),this.keywordComplectionItems.concat(o)}resolveCompletionItem(e){return e}initKeywordComplectionItem(){this.keywordList.forEach(e=>{let t=new Pe.CompletionItem(e+" ");t.kind=Pe.CompletionItemKind.Property,this.keywordComplectionItems.push(t)})}};var Mn=class{static open(){let e=de.getConfig("documentPath");gt.exec(`C:/Windows/hh.exe ${e}`)}};function Lf(r){(async()=>(de.updateStatusBarItems("Indexing Autohotkey Workspace..."),await te.buildByPath(he.workspace.rootPath),de.updateStatusBarItems("Index Workspace Success!"),de.hide()))();let e={language:"ahk"};At.init(r),r.subscriptions.push(he.languages.registerHoverProvider(e,new _n(r)),he.languages.registerDefinitionProvider(e,new Cn),he.languages.registerRenameProvider(e,new Nn),he.languages.registerSignatureHelpProvider(e,new xn,"(",","),he.languages.registerDocumentSymbolProvider(e,new Sn),he.languages.registerDocumentFormattingEditProvider(e,new or),he.languages.registerReferenceProvider(e,new Ln),he.debug.registerDebugAdapterDescriptorFactory("ahk",new eo),Pn.createEditorListenr(),he.commands.registerCommand("run.ahk",()=>et.run()),he.commands.registerCommand("run.selection.ahk",()=>et.runSelection()),he.commands.registerCommand("document.open",()=>Mn.open()),he.commands.registerCommand("debug.ahk",()=>et.startDebugger()),he.commands.registerCommand("compile.ahk",()=>et.compile())),de.getConfig("enableIntelliSense")&&r.subscriptions.push(he.languages.registerCompletionItemProvider(e,new Rn," ","."))}var eo=class{createDebugAdapterDescriptor(e){return new he.DebugAdapterInlineImplementation(new ir)}};0&&(module.exports={activate});
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */
